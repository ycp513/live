function defindExtendTools(){jQuery.handleError=function(e,t,n,i){e.error&&e.error.call(e.context||e,t,n,i),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,i])},jQuery._isIE=function(){return!!window.ActiveXObject||"ActiveXObject"in window}}function errorTips(e,t){var n=new ShowDialog.POPUP({width:380,height:228,content:'<div class="informant-result"><p class="title">'+e+'</p><p class="tips">'+(t?t:"请稍后再试")+'</p><span class="sure-btn">确定</span></div>',yourClass:"popup-mobile w-info-error-tips",mask:!0});$(CONTENT).on("click",".sure-btn",function(e){n.removePop()})}function bindDefChoseEvents(e){$(e).on("click","li",function(e){$(this).siblings().removeClass("selected").end().addClass("selected")})}function showSubmitResult(){var e=new ShowDialog.POPUP({width:380,height:228,content:'<div class="informant-result"><p class="title">举报成功</p><p class="tips">感谢您对YY的支持</p><span class="sure-btn">确定</span></div>',yourClass:"popup-mobile",mask:!0});$(CONTENT).on("click",".sure-btn",function(t){e.removePop()})}function uploadFile(e,t){$.ajaxFileUpload({url:"/upload/reportshot",secureuri:!1,type:"post",fileElementId:"upload_file",dataType:"json",success:function(n){if(12==n.result)errorTips("文件过大请重新选择(最大为4M)");else if(1==n.result){var i={u:location.href,bt:1,rt:$(".informant-center .select-content li.selected").index()+1,ps:util.JSON.stringify({ps:[{u:n.url}]})};pushInfoToSer(i,e,t)}else errorTips("图片上传失败！")},error:function(e,n,i){t.call(this,"网络异常，请稍后再试！")}})}function pushInfoToSer(e,t,n){$.ajax({url:"/report",type:"get",dataType:"json",data:e,cache:!1}).done(function(e){t(e)}).fail(function(e){n(e)})}function indexInformant(e,t){function n(e){var t=jQuery._isIE();t&&(document.getElementById("path").value=document.getElementById("upload_file").value)}function i(){var e=$("#upload_file")[0],t=e.value;t=t.substring(t.lastIndexOf(".")+1,t.length).toLowerCase(),"jpg"==t||"gif"==t||"png"==t||""===t?$(".path").val(e.value):errorTips("仅支持jpg/png/gif格式图片","请重新选择")}function a(){var e=!0;return""===$(WORKFILEINPUT).val()?($(WAITTIPS).addClass("active").html("请提供违规截图"),e=!1):1!=$(".select-content li.selected").length?($(WAITTIPS).addClass("active").html("请选择违规举报类型（单选）"),e=!1):$(WAITTIPS).removeClass("active").html("信息传输中，请稍后......"),e}function o(){$(".informant-center .submit-btn").bind("click",function(n){a()&&($(WAITTIPS).addClass("active"),uploadFile(function(t){$(WAITTIPS).removeClass("active"),0===t.resultCode?(r.removePop(),showSubmitResult(),e&&e.call(this,t)):3==t.resultCode?errorTips("您已经举报过了","感谢您对YY的支持"):errorTips("举报失败"),statistics({eventid:"10008897",act_type:"19"})},function(e){errorTips(e),t&&t.call(this,e)}))})}var r=new ShowDialog.POPUP({width:700,height:420,content:'<div class="informant-center"><p class="tips">1.请提供违规截图：</p><label class="required">*</label><input type="text" placeholder="请上传违规截图"  readonly="readonly" class="path" id="path"><label class="upload-btn">上传<input id="upload_file" name="upload_file" type="file" accept="image/*"></label><br><p class="tips select">2.请选择违规举报类型（单选）</p><ul class="select-content"><li>图片违规</li><li>文字违规</li><li>其他违规</li></ul><span class="waiting">信息传输中，请稍后......</span><span class="submit-btn">立即举报</span></div>',yourClass:"popup-mobile",mask:!0});bindDefChoseEvents(INDEXCONTENT),$(".upload-btn").bind("click",n),$(CONTENT).on("onpropertychange change",WORKFILEINPUT,i),o(),statistics({eventid:"10008897",act_type:"18"})}function aysnAddAllFile(){aysnAddDwbFile(),aysnAddDuowanJs()}function aysnAddUdbFile(){include("http://res.udb.duowan.com/lgn/js/oauth/udbsdk/pcweb/udb.sdk.pcweb.popup.min.js")}function aysnAddDwbFile(){var e=["http://res.duowan.com/pay/auth/web/style.css?v=2.0","http://res.duowan.com/pay/auth/js/auth.js"];include(e)}function aysnAddDuowanJs(){var e=["//hdjs.hiido.com/hiido_internal.js"];include(e)}define("jquery",[],function(){return jQuery}),function(window,document,undefined){String.prototype.trim=function(){return this.replace(/^(\s|\u3000)*|(\s|\u3000)*$/g,"")},String.prototype.getBytes=function(){for(var e=0,t=0;t<this.length;t++)e+=this.charCodeAt(t)>256?2:1;return e},Array.prototype.indexOf=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1};var UA={ie:!!("ActiveXObject"in window&&/(msie |Trident\/.*rv\:)(\d*)/i.test(navigator.userAgent))&&RegExp.$2,init:function(){var e=navigator.userAgent;UA.browser=function(){var t="";return t=UA.ie?"ie"+UA.ie:/Chrome/.test(e)?"chrome":/Opera/.test(e)?"opera":/FireFox/.test(e)?"firefox":"other"}(),UA.system=function(){var t="";return t=/Windows NT 10.0/.test(e)?"windows 10":/Windows NT 5.1/.test(e)?"windows xp":/Windows NT 6.1/.test(e)?"windows 7":/Windows NT 6.2/.test(e)?"windows 8":/Windows NT 6.0/.test(e)?"windows vista":/Windows NT 5.2/.test(e)?"windows 2003":/Mac OS/.test(e)?"mac":/Linux/.test(e)?"linux":"other"}()}},util={domain:function(){return"yy.duowan.com"==window.location.hostname?"//yy.duowan.com":"//www.yy.com"}(),UA:UA,flash:{init:function(e,t){var n={wmode:"opaque",width:300,height:300,flashvars:"",flashUrl:"",fullscreen:!1,bgcolor:"#000000"};if("object"==typeof t){if("undefined"!=typeof t.wmode){switch(t.wmode.toLowerCase()){case"opaque":n.wmode="opaque";break;case"window":n.wmode="window";break;case"transparent":n.wmode="transparent"}n.wmode=t.wmode}"undefined"!=typeof t.width&&(n.width=t.width),"undefined"!=typeof t.height&&(n.height=t.height),"undefined"!=typeof t.flashvars&&(n.flashvars=t.flashvars),"undefined"!=typeof t.flashUrl&&(n.flashUrl=t.flashUrl),"undefined"!=typeof t.fullscreen&&(n.fullscreen=t.fullscreen),"undefined"!=typeof t.bgcolor&&(n.bgcolor=t.bgcolor)}if(""!==n.flashUrl){var i=['<object id="{$name}" name="{$name}" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10.0.32" data="{$flashUrl}" width="{$width}" height="{$height}">','<param name="movie" value="{$flashUrl}" />','<param name="flashvars" value="{$flashvars}" />','<param name="quality" value="high" />','<param name="allowScriptAccess" value="always" />','<param name="wmode" value="{$wmode}"/>','<param name="bgcolor" value="{$bgcolor}"/>','<param name="allowFullScreen" value="{$fullscreen}"/>','<param name="allowFullScreenInteractive" value="{$fullscreen}"/>','<embed id="embed_{$name}" src="{$flashUrl}" width="{$width}" allowFullScreen="{$fullscreen}" allowFullScreenInteractive="{$fullscreen}" height="{$height}" allowScriptAccess="always" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="{$flashvars}" type="application/x-shockwave-flash" wmode="{$wmode}" bgcolor="{$bgcolor}"></embed>',"</object>"].join("");return i.replace(/\{if ie\}(.*?)\{endif ie\}/g,~navigator.appName.indexOf("Microsoft")?"$1":"").replace(/\{\$name\}/g,e).replace(/\{\$width\}/g,n.width).replace(/\{\$height\}/g,n.height).replace(/\{\$flashUrl\}/g,n.flashUrl).replace(/\{\$flashvars\}/g,n.flashvars).replace(/\{\$wmode\}/g,n.wmode).replace(/\{\$bgcolor\}/g,n.bgcolor).replace(/\{\$fullscreen\}/g,n.fullscreen)}},write:function(e,t){var n=this.init(e,t);n&&document.write(n)},add:function(e,t,n){var i=this.init(t,n);e&&i&&(e.innerHTML=i)},ctrl:function(e){var t=document.getElementById(e);return~navigator.appName.indexOf("Microsoft")?"object"==t.tagName.toLowerCase()?t:"":"embed"==t.tagName.toLowerCase()?t:t.getElementsByTagName("embed")[0]}},Promise:function(e){var t=this;return t.queue=[],t.current=0,t.isResolved=!1,t.then=function(e){return"function"==typeof e&&t.queue.push(e),t},t.start=function(){var e=Array.prototype.slice.call(arguments);return t.resolve.apply(t,e),t},t.resolve=function(){var e=Array.prototype.slice.call(arguments);e.push(t.resolve),t.current&&e.push(t.queue[t.current-1]),t.current!=t.queue.length&&t.queue[t.current++].apply(t,e)},e&&t.then(e),t},type:function(e){var t,n=Object.prototype.toString;return null===e?t=String(e):(t=n.call(e).toLowerCase(),t=t.substring(8,t.length-1)),t},isPlainObject:function(e){var t,n=this,i=Object.prototype.hasOwnProperty;if(!e||"object"!==n.type(e))return!1;if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1;for(t in e);return t===undefined||i.call(e,t)},extend:function(){var e,t,n,i,a,o,r=this,s=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[1]||{},l=2),"object"!=typeof s&&"function"!==r.type(s)&&(s={}),c===l&&(s=this,--l);l<c;l++)if(null!==(e=arguments[l]))for(t in e)n=s[t],i=e[t],s!==i&&(d&&i&&(r.isPlainObject(i)||(a="array"===r.type(i)))?(a?(a=!1,o=n&&"array"===r.type(n)?n:[]):o=n&&r.isPlainObject(n)?n:{},s[t]=r.extend(d,o,i)):i!==undefined&&(s[t]=i));return s},unitFormat:function(e,t){switch(e=parseFloat(e,10),t){case 1:return e<1e5?e:e<1e8?Math.floor(e/1e4*10)/10+"万":Math.floor(e/1e8*10)/10+"亿";case 2:return parseInt(e,10).toLocaleString().replace(/\.00$/,"")||0;case 3:return parseFloat(e,10).toLocaleString().replace(/\.00$/,"")||0;case"timeLength":for(var n=Math.floor(e/3600)+"",i=Math.floor((e-3600*n)/60)+"",a=e-3600*n-60*i+"";i.length<2;)i="0"+i;for(;a.length<2;)a="0"+a;for(;n.length<2;)n="0"+n;return n+":"+i+":"+a;default:return e}},fromNow:function(e){if(!e)return!1;var t=(new Date).getTime(),n=e,i=t-n,a="",o=6e4,r=60*o,s=24*r,l=30*s,c=12*l,d=i/c,u=i/l,h=i/(7*s),f=i/s,p=i/r,g=i/o;return a=d>=1?parseInt(d)+"年前":u>=1?parseInt(u)+"个月前":h>=1?parseInt(h)+"周前":f>=1?parseInt(f)+"天前":p>=1?parseInt(p)+"个小时前":g>=1?parseInt(g)+"分钟前":"刚刚"},getUrlParams:function(){var e=window.location.search;e=e.substr(1);var t={};if(""===e)return t;for(var n=e.split("&"),i=0,a=n.length;i<a;i++){var o=n[i],r=o.split("=");t[r[0]]=r[1]}return t},request:{search:function(e){var t=location.search.replace(/[? ]/g,"");if(""===t)return null;for(var n=t.split("&"),i=0,a=n.length;i<a;i++){var o=n[i].split("=");if(!(o.length<=1)){var r=o[0],s=o[1];if(r===e)return s}}return null},hash:function(e,t){var n=location.hash.replace(/[# ]/g,""),i="undefined"!=typeof t,a=!1;if(""===n&&!i)return null;for(var o=n.split("&"),r=0,s=o.length;r<s;r++){var l=o[r].split("=");if(!(l.length<=1)){var c=l[0],d=l[1];if(c===e){if(!i)return d;o[r]=c+"="+t,a=!0}}}return a||o.push(e+"="+t),i?(window.location.hash=o.join("&"),o.join("&")):null}},eventRender:function(e,t,n){var i=e.getElementsByTagName("*"),a=function(e){var i=e.getAttribute("yy-el");i&&(t[i]=e,e.removeAttribute("yy-el"));var a,o=e.getAttribute("yy-on"),r=function(t){var i=t.split(/\s*:\s*/g),a=i[0],o=n[i[1]];i.length>1&&o&&("undefined"!=typeof $?$(e).on(a,o):e.addEventListener?e.addEventListener(a,o,!1):e.attachEvent?e.attachEvent("on"+a,function(){o.call(e)}):e["on"+a]=o)};if(o){a=o.split(",");for(var s=0,l=a.length;s<l;s++)r(a[s]);e.removeAttribute("yy-on")}};a(e);for(var o=0,r=i.length;o<r;o++)a(i[o])},isBelong:function(e,t){for(var n=t;n;n=n.parentNode)if(n===e)return!0},htmlEncode:function(e){var t=document.createElement("span");return t.innerText=e,t.innerHTML},htmlDecode:function(e){var t=document.createElement("span");return t.innerHTML=e,t.innerText},cookies:{get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?window.unescape(t[2]):null},set:function(e,t,n,i,a,o){n||(n=24);var r=new Date;r.setTime(r.getTime()+60*n*60*1e3),document.cookie=e+"="+window.escape(t)+";expires="+r.toGMTString()+(a?";domain="+a:"")+(i?";path="+i:"")+(o===!0?";secure":"")},del:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.get(e);null!==n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())}},JSON:window.JSON?JSON:function(){function f(e){return e<10?"0"+e:e}function stringify(e,t){var n,i,a,o,r,s=/["\\\x00-\x1f\x7f-\x9f]/g;switch(typeof e){case"string":return s.test(e)?'"'+e.replace(s,function(e){var t=m[e];return t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"';case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if("function"==typeof e.toJSON)return stringify(e.toJSON());if(n=[],"number"==typeof e.length&&!e.propertyIsEnumerable("length")){for(o=e.length,i=0;i<o;i+=1)n.push(stringify(e[i],t)||"null");return"["+n.join(",")+"]"}if(t)for(o=t.length,i=0;i<o;i+=1)a=t[i],"string"==typeof a&&(r=stringify(e[a],t),r&&n.push(stringify(a)+":"+r));else for(a in e)"string"==typeof a&&(r=stringify(e[a],t),r&&n.push(stringify(a)+":"+r));return"{"+n.join(",")+"}"}}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{stringify:stringify,parse:function(text,filter){function walk(e,t){var n,i;if(t&&"object"==typeof t)for(n in t)Object.prototype.hasOwnProperty.apply(t,[n])&&(i=walk(n,t[n]),i!==undefined?t[n]=i:delete t[n]);return filter(e,t)}var j;if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof filter?walk("",j):j;throw new SyntaxError("parseJSON")}}}(),getCssProperty:function(e){for(var t=e.substr(0,1),n=e.substr(1),i=t.toUpperCase()+n,a=t.toLowerCase()+n,o=[a,"Webkit"+i,"Moz"+i,"O"+i,"-ms-"+i,"ms"+i],r=document.documentElement.style,s=0,l=o.length;s<l;s++){var c=o[s];if(c in r)return c}return null},makeArray:function(e){return Array.prototype.slice.call(e)},setVarByString:function(e,t,n){var i=t.split(".");return function a(e,t){var i=t.shift();t.length?(e[i]===undefined&&(e[i]={}),a(e[i],t)):e[i]=n}(e,i),e},getVarByString:function(e,t){for(var n=t.split("."),i=e,a=0,o=n.length;a<o&&i!==undefined;a++)i=i[n[a]];return i},trace:{enable:~location.href.indexOf("debug"),log:function(){if(this.enable&&!(UA.ie&&UA.ie<8)){var e,t=util.makeArray(arguments);t[0]="["+(new Date).toString().toLocaleString().replace(/^.* (\d+\:\d+\:\d+) .*$/,"$1")+"] "+t[0],"undefined"!=typeof console&&(UA.ie?(e=[],$(t).each(function(t,n){if("string"==typeof n)e.push(n.replace(/%c/g,"").replace(/color:\s*[^;]+;/g,""));else if("object"==typeof n)try{e.push(util.JSON.stringify(n))}catch(i){}else e.push(n)}),console.log(e.join(" "))):console.log.apply(console,t))}},info:function(){var e=util.makeArray(arguments);e=["%c[info]","color: #005982;"].concat(e),this.log.apply(this,e)},warn:function(){var e=util.makeArray(arguments);e=["%c[warning]","color: #8a8000;"].concat(e),this.log.apply(this,e)},error:function(){var e=util.makeArray(arguments);e=["%c[error]","color: #ff0000;"].concat(e),this.log.apply(this,e)},flash:function(){var e=util.makeArray(arguments);e=["%c[flash]","color: #7d0000;"].concat(e),this.log.apply(this,e)},h5:function(){var e=util.makeArray(arguments);e=["%c[h5]","color: #ff8900;"].concat(e),this.log.apply(this,e)},web:function(){var e=util.makeArray(arguments);e=["%c[web]","color: #556fb5;"].concat(e),this.log.apply(this,e)},wf:function(){var e=util.makeArray(arguments);e=["%c[web2flash]","color: #7e0043;"].concat(e),this.log.apply(this,e)},ajax:function(){var e=util.makeArray(arguments);e=["%c[AJAX]","color: #ff8900;"].concat(e),this.log.apply(this,e)}}};"undefined"!=typeof define&&define.amd?define("util",[],function(){return util}):window.util=util}(window,document),function(e,t,n,i){var a=e(t);e.fn.lazyload=function(n){function o(){var t=0;s.each(function(){var n=e(this);if(!l.skip_invisible||"none"!==n.css("display"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else n.trigger("appear"),t=0})}var r,s=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return n&&(i!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),i!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(l,n)),r=l.container===i||l.container===t?a:e(l.container),0===l.event.indexOf("scroll")&&r.on(l.event,function(e){return o()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===i||!1===n.attr("src")||""===n.attr("src"))&&n.is("img")&&n.attr("src",l.placeholder),n.one("appear",function(){if(!this.loaded){if(l.appear){var i=s.length;l.appear.call(t,i,l)}e("<img />").on("load",function(){var i=n.attr("data-"+l.data_attribute);n.hide(),n.is("img")?n.attr("src",i):n.css("background-image","url('"+i+"')"),n[l.effect](l.effect_speed),t.loaded=!0;var a=e.grep(s,function(e){return!e.loaded});if(s=e(a),l.load){var o=s.length;l.load.call(t,o,l)}}).attr("src",n.data(l.data_attribute))}}),0!==l.event.indexOf("scroll")&&n.on(l.event,function(e){t.loaded||n.trigger("appear")})}),a.on("resize",function(e){o()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&a.on("pageshow",function(t){t=t.originalEvent||t,t.persisted&&s.each(function(){e(this).trigger("appear")})}),e(t).on("load",function(){o()}),this},e.belowthefold=function(n,o){var r;return r=o.container===i||o.container===t?a.height()+a[0].scrollY:e(o.container).offset().top+e(o.container).height(),r<=e(n).offset().top-o.threshold},e.rightoffold=function(n,o){var r;return r=o.container===i||o.container===t?a.width()+a[0].scrollX:e(o.container).offset().left+e(o.container).width(),r<=e(n).offset().left-o.threshold},e.abovethetop=function(n,o){var r;return r=o.container===i||o.container===t?a[0].scrollY:e(o.container).offset().top,r>=e(n).offset().top+o.threshold+e(n).height()},e.leftofbegin=function(n,o){var r;return r=o.container===i||o.container===t?a[0].scrollX:e(o.container).offset().left,r>=e(n).offset().left+o.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.fn,{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}($,window,document),define("lazyload",function(){}),jQuery.extend({createUploadIframe:function(e,t){var n="jUploadFrame"+e,i='<iframe id="'+n+'" name="'+n+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof t?i+=' src="javascript:false"':"string"==typeof t&&(i+=' src="'+t+'"')),i+=" />",jQuery(i).appendTo(document.body),jQuery("#"+n).get(0)},createUploadForm:function(e,t,n){var i="jUploadForm"+e,a="jUploadFile"+e,o=jQuery('<form  action="" method="POST" name="'+i+'" id="'+i+'" enctype="multipart/form-data"></form>');if(n)for(var r in n)$('<input type="hidden" name="'+r+'" value="" />').val(n[r]).appendTo(o);var s=jQuery("#"+t),l=jQuery(s).clone();return jQuery(s).attr("id",a),jQuery(s).before(l),jQuery(s).appendTo(o),jQuery(o).css("position","absolute"),jQuery(o).css("top","-1200px"),jQuery(o).css("left","-1200px"),jQuery(o).appendTo("body"),o},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),n=jQuery.createUploadForm(t,e.fileElementId,"undefined"!=typeof e.data&&e.data),i=(jQuery.createUploadIframe(t,e.secureuri),"jUploadFrame"+t),a="jUploadForm"+t;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var o=!1,r={};e.global&&jQuery.event.trigger("ajaxSend",[r,e]);var s=function(t){var a=document.getElementById(i);try{a.contentWindow?(r.responseText=a.contentWindow.document.body?a.contentWindow.document.body.innerHTML:null,r.responseXML=a.contentWindow.document.XMLDocument?a.contentWindow.document.XMLDocument:a.contentWindow.document):a.contentDocument&&(r.responseText=a.contentDocument.document.body?a.contentDocument.document.body.innerHTML:null,r.responseXML=a.contentDocument.document.XMLDocument?a.contentDocument.document.XMLDocument:a.contentDocument.document)}catch(s){jQuery.handleError(e,r,null,s)}if(r||"timeout"==t){o=!0;var l;try{if(l="timeout"!=t?"success":"error","error"!=l){var c=jQuery.uploadHttpData(r,e.dataType);e.success&&e.success(c,l),e.global&&jQuery.event.trigger("ajaxSuccess",[r,e])}else jQuery.handleError(e,r,l)}catch(s){l="error",jQuery.handleError(e,r,l,s)}e.global&&jQuery.event.trigger("ajaxComplete",[r,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(r,l),jQuery(a).unbind(),setTimeout(function(){try{jQuery(a).remove(),jQuery(n).remove()}catch(t){jQuery.handleError(e,r,null,t)}},100),r=null}};e.timeout>0&&setTimeout(function(){o||s("timeout")},e.timeout);try{var n=jQuery("#"+a);jQuery(n).attr("action",e.url),jQuery(n).attr("method","POST"),jQuery(n).attr("target",i),n.encoding?jQuery(n).attr("encoding","multipart/form-data"):jQuery(n).attr("enctype","multipart/form-data"),jQuery(n).submit()}catch(l){jQuery.handleError(e,r,null,l)}return jQuery("#"+i).load(s),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&(data=r.responseText);var start=data.indexOf(">");if(start!=-1){var end=data.indexOf("<",start+1);end!=-1&&(data=data.substring(start+1,end))}return eval("data = "+data),"html"==type&&jQuery("<div>").html(data).evalScripts(),data},handleError:function(e,t,n,i){e.error&&e.error.call(e.context||e,t,n,i),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,i])}}),define("ajaxfileupload",function(){}),define("sideTool",["ajaxfileupload","util"],function(e,t){function n(e){var t={width:380,height:228,content:'<div class="informant-result"><p class="title">举报成功</p><p class="tips">感谢您对YY的支持</p><span class="sure-btn">确定</span></div>',yourClass:"popup-mobile",mask:!0};window.combine&&window.combine.reportSuccess?t=window.combine.reportSuccess:e&&(t=e);var n=new window.ShowDialog.POPUP(t);$(g).on("click",".sure-btn",function(){n.removePop()})}function i(e,t,n){$.ajax({url:"/report",type:"get",dataType:"json",data:e,cache:!1}).done(function(e){t(e)}).fail(function(e){n(e)})}function a(e,n){$.ajaxFileUpload({url:"/upload/reportshot",secureuri:!1,type:"post",fileElementId:"upload_file",dataType:"json",success:function(a){if(12==a.result)o("文件过大请重新选择(最大为4M)");else if(1==a.result){var r={u:location.href,bt:1,rt:$(".informant-center .select-content li.selected").index()+1,ps:t.JSON.stringify({ps:[{u:a.url}]})};i(r,e,n)}else o("图片上传失败！")},error:function(){n.call(this,"网络异常，请稍后再试！")}})}function o(e,t){var n=new window.ShowDialog.POPUP({width:380,height:228,content:'<div class="informant-result"><p class="title">'+e+'</p><p class="tips">'+(t?t:"请稍后再试")+'</p><span class="sure-btn">确定</span></div>',yourClass:"popup-mobile w-info-error-tips",mask:!0});$(g).on("click",".sure-btn",function(){n.removePop()})}function r(e){$(e).on("click","li",function(){$(this).siblings().removeClass("selected").end().addClass("selected")})}function s(e,t){function i(){var e=$._isIE();e&&(document.getElementById("path").value=document.getElementById("upload_file").value)}function s(){var e=$("#upload_file")[0],t=e.value;t=t.substring(t.lastIndexOf(".")+1,t.length).toLowerCase(),"jpg"==t||"gif"==t||"png"==t||""===t?$(".path").val(e.value):o("仅支持jpg/png/gif格式图片","请重新选择")}function l(){var e=!0;return""===$(v).val()?($(m).addClass("active").html("请提供违规截图"),e=!1):1!=$(".select-content li.selected").length?($(m).addClass("active").html("请选择违规举报类型（单选）"),e=!1):$(m).removeClass("active").html("信息传输中，请稍后......"),e}function c(){$(".informant-center .submit-btn").bind("click",function(){l()&&($(m).addClass("active"),a(function(i){$(m).removeClass("active"),0===i.resultCode?(d.removePop(),n(),e&&e.call(this,i)):3==i.resultCode?o("您已经举报过了","感谢您对YY的支持"):(o("举报失败"),t&&t.call(this,i.message))},function(e){o(e)}))})}var d=new window.ShowDialog.POPUP({width:700,height:420,content:'<div class="informant-center"><p class="tips">1.请提供违规截图：</p><label class="required">*</label><input type="text" placeholder="请上传违规截图"  readonly="readonly" class="path" id="path"><label class="upload-btn">上传<input id="upload_file" name="upload_file" type="file" accept="image/*"></label><br><p class="tips select">2.请选择违规举报类型（单选）</p><ul class="select-content"><li>图片违规</li><li>文字违规</li><li>其他违规</li></ul><span class="waiting">信息传输中，请稍后......</span><span class="submit-btn">立即举报</span></div>',yourClass:"popup-mobile",mask:!0});r(p),$(".upload-btn").bind("click",i),$(g).on("onpropertychange change",v,s),c()}function l(){var e=$(".go-top"),n=$(".side-tools");y&&clearTimeout(y),t.UA.ie&&t.UA.ie<9&&(n.addClass("side-tools-ie"),n.hide()),y=setTimeout(function(){c.scrollTop()>=100?(0===e.length&&$("body").append('<div class="side-tools"><div class="tool-item go-top go-top-hide"><a href="#" title="回到顶部" class="tool-btn"><i class="icon-gotop"></i><span class="icon-shade"></span><span class="txt">回到顶部</span></a><iframe frameborder="0" class="mask_iframe"></iframe></div></div>'),e.removeClass("go-top-hide"),e=$(".go-top")):e.addClass("go-top-hide"),t.UA.ie&&t.UA.ie<9&&(n.removeClass("side-tools-ie"),n.show())},500)}var c=$(window),d=$(".go-top"),u=$(".violate-report"),h=window.user,f=window.statistics,p=".informant-center",g=".popup-wrap",v="#upload_file",m=".popup-wrap .waiting";d.on("click",function(e){e.preventDefault(),$("html, body").stop(!0).animate({scrollTop:0},{duration:300})}),u.on("click",function(e){e.preventDefault(),f({eventid:"10008897",act_type:"18"}),h.isLoginSync()?s(function(){f({eventid:"10008897",act_type:"19"})}):h.showYYLoginBox()});var y=null,b=function(){l(),c.on("scroll",l),$(".side-tools .app-code").length&&$(".side-tools .app-code").on("mouseover",function(){$(this).addClass("app-code-h")}).on("mouseout",function(){$(this).removeClass("app-code-h")})};return b}),function(e,t,n,i){var a={direction:"y",scrollbar:i,distance:20,forward:i,back:i,transition:500,endDistance:40,onend:i,onbegin:i,onscroll:i,onresize:i},o={preventDefault:function(e){e=e||t.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},stopBubble:function(e){e=e||t.event,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},selection:{enable:function(){n.onselectstart=null},disable:function(){n.onselectstart=function(){return!1},t.getSelection?t.getSelection().removeAllRanges():n.selection.empty()}},getPosition:function(t){var i=n;arguments[2]&&(i=arguments[2]);var a=t.offsetLeft,o=t.offsetTop;for("fixed"==e(t).css("position")&&(a+=i.documentElement.scrollLeft||i.body.scrollLeft,o+=i.documentElement.scrollTop||i.body.scrollTop),t=t.offsetParent;t;)a+=t.offsetLeft||0,o+=t.offsetTop||0,t=t.offsetParent;return{left:a,top:o}},inertiaMotion:function(e,t,n){var i=[],a=function(){for(var a=t-e,o=0,r=n;o<r;o++)i[o]=parseInt(a*Math.pow(Math.sin(o/n*Math.PI/2),3)*100)/100+e};return a(),{Sn:function(e){return e>n?t:i[e]}}}},r={b2cMapping:function(e){var t=e,n=t.el,i=t.setting,a=t.attrs,o=n.target["scroll"+a[3]],s=parseFloat(n.bar.style[a[2]],10);i.contentNow=Math.ceil(s/i.b2eScale),i.direction=i.contentNow-o,n.target["scroll"+a[3]]=i.contentNow,r.positionCheck(t)},c2bMapping:function(e){var t=e,n=t.el,i=t.setting,a=t.attrs,o=i.contentNow=n.target["scroll"+a[3]];n.bar.style[a[2]]=o*i.b2eScale+"px",r.positionCheck(t)},positionCheck:function(e){var t=e,n=t.op,i=t.setting,a=!1,o=!1;n.onscroll&&n.onscroll(i.contentNow,i.direction),i.contentNow+n.endDistance>=i.contentLimit?(n.onend&&n.onend(),i.contentNow>=i.contentLimit&&(a=!0)):0===i.contentNow&&(n.onbegin&&n.onbegin(),o=!0),i.isEnd=a,i.isBegin=o}},s=function(e,t){return new s.fn.init(e,t)};s.fn={op:{},attrs:[],resize:function(){var t=this,n=t.op,i=t.el,a=t.setting,o=[];o="x"==n.direction?["width","Width","left","Left"]:["height","Height","top","Top"];var r=i.target["offset"+o[1]],s=i.target["scroll"+o[1]],l=i.scrollbar["offset"+o[1]];a.scale=0,r>=s?a.scale=1:a.scale=0===s?0:r/s,a.b2eScale=0===s?0:l/s,a.contentLimit=s-r,a.contentNow=i.target["scroll"+o[3]],i.bar.style[o[0]]=l*a.scale+"px",i.bar.style[o[2]]=a.contentNow*a.b2eScale+"px";var c=20,d=e(t.el.bar).closest("div").height();if(0!=d){var u=d/7.8;switch(u){case u<10:c=50*u;break;case u<20:c=20*u;break;case u<30:c=10*u;break;case u<40:c=45;break;default:c=u}}n.distance=c,n.onscroll&&n.onscroll(a.contentNow,a.direction),n.onresize&&n.onresize(a.b2eScale)},back:function(){var e=this,t=e.op,n=e.el,a=e.attrs,o=n.target["scroll"+a[3]];e.scrollTo(o-t.distance,i,!0)},forward:function(){var e=this,t=e.op,n=e.el,a=e.attrs,o=n.target["scroll"+a[3]];e.scrollTo(o+t.distance,i,!0)},scrollTo:function(e,t,n){var i=this,a=i.op,s=i.el,l=i.setting,c=i.attrs;e<0&&(e=0),e>l.contentLimit&&(e=l.contentLimit);var d=20,u=a.transition/d,h=0,f=s.target["scroll"+c[3]],p=f,g=parseInt(e,10),v=o.inertiaMotion(f,g,u);n&&(h=u),clearTimeout(l.scrollToKey),function m(){h<u?(l.isAni=!0,p=v.Sn(h),s.target["scroll"+c[3]]=p,l.direction=p-f,r.c2bMapping(i),h++,l.scrollToKey=setTimeout(m,d)):(l.isAni=!1,s.target["scroll"+c[3]]=g,s.target["scroll"+c[3]]!=g&&(l.contentLimit=s.target["scroll"+c[1]]),l.direction=g-f,r.c2bMapping(i),t&&t())}()}};var l=s.fn.init=function(s,l){var c=this,d=c.op=e.fn.extend(i,a,l),u=c.setting={scale:1,contentLimit:0,contentNow:0,barLimit:0,barNow:0,isBegin:!0,isEnd:!1,direction:0},h=c.el={target:e(s)[0],scrollbar:e(c.op.scrollbar)[0],bar:e(c.op.scrollbar).children()[0],back:e(c.op.back),forward:e(c.op.forward)};if(h.target&&h.scrollbar){c.resize();var f=[],p={down:function(i){i=i||t.event,o.preventDefault(i),o.stopBubble(i),u.isAni||(u.posX=i.clientX-this.offsetLeft,u.posY=i.clientY-this.offsetTop,o.selection.disable(),e(n).bind("mousemove",p.move),e(n).bind("mouseup",p.up),e(t).bind("losecapture",p.up),e(t).bind("blur",p.up))},move:function(e){if(e=e||t.event,o.preventDefault(e),!u.isAni){var n=e["client"+f[4]]-u["pos"+f[4]];n<0&&(n=0),n>h.scrollbar["offset"+f[1]]-h.bar["offset"+f[1]]&&(n=h.scrollbar["offset"+f[1]]-h.bar["offset"+f[1]]),h.bar.style[f[2]]=n+"px",r.b2cMapping(c)}},up:function(){o.selection.enable(),e(n).unbind("mousemove",p.move),e(n).unbind("mouseup",p.up),e(t).unbind("losecapture",p.up),e(t).unbind("blur",p.up)},wheel:function(e){e.preventDefault(),e.stopPropagation();var t=(h.target["scroll"+f[3]],e.originalEvent["wheelDelta"+f[4]]||-e.originalEvent["delta"+f[4]]||e.originalEvent.wheelDelta||-e.originalEvent.detail||-e.originalEvent.delta);clearTimeout(u.wheelKey),u.wheelKey=setTimeout(function(){u.isAni||(t>0?c.back():c.forward())},10),u.isBegin&&t>0&&!d.onbegin||u.isEnd&&t<0&&!d.onend||(o.preventDefault(e),o.stopBubble(e))}};return"x"==d.direction?f=c.attrs=["width","Width","left","Left","X"]:(f=c.attrs=["height","Height","top","Top","Y"],"onmousewheel"in h.target?(e(h.target).bind("mousewheel",p.wheel),e(h.scrollbar).bind("mousewheel",p.wheel)):(e(h.target).bind("DOMMouseScroll",p.wheel),e(h.scrollbar).bind("DOMMouseScroll",p.wheel))),h.bar.style[f[2]]=0,e(h.scrollbar).bind("mousedown",function(i){var a=this;i=i||t.event,o.preventDefault(i),o.stopBubble(i),o.selection.disable(),u.posX=i.clientX-a.offsetLeft,u.posY=i.clientY-a.offsetTop,e(n).bind("mouseup",function s(){clearTimeout(u.downKey),o.selection.enable(),e(n).unbind("mouseup",s)});var r=h.bar["offset"+f[1]];u.mousePosition=i["client"+f[4]]+(n.documentElement["scroll"+f[3]]||n.body["scroll"+f[3]])-o.getPosition(this)[f[2]],function l(){clearTimeout(u.downKey);var e=parseFloat(h.bar.style[f[2]],10),t=u.mousePosition;if(t<e)c.back();else{if(!(t>e+r))return;c.forward()}u.downKey=setTimeout(l,50)}()}),e(h.bar).bind("mousedown",p.down),
e(h.forward).bind("mousedown",function(i){i=i||t.event,clearTimeout(u.downKey),o.preventDefault(i),e(n).bind("mouseup",function a(){clearTimeout(u.downKey),e(n).unbind("mouseup",a)}),function r(){c.forward(),u.downKey=setTimeout(r,50)}()}),e(h.back).bind("mousedown",function(i){i=i||t.event,clearTimeout(u.downKey),o.preventDefault(i),e(n).bind("mouseup",function a(){clearTimeout(u.downKey),e(n).unbind("mouseup",a)}),function r(){c.back(),u.downKey=setTimeout(r,50)}()}),this}};l.prototype=s.fn,"undefined"!=typeof define&&define.amd?define("analogscroll",[],function(){return s}):t.analogscroll=s}($,window,document),define("leftMenu",["util","analogscroll"],function(e,t){var n=window.statistics,i=window.statisticEvent,a=window.pageInfo,o=window.header,r=window.staticsData,s=window.user,l={target:$("#leftMenu"),pageWrap:0!==$(".wrapper .video-wrap").length?$(".wrapper .video-wrap"):$("body > .wrapper"),onToggle:function(){}},c=document.getElementsByTagName("html")[0],d=!1,u={init:function(t){var n=this;l=e.extend(!0,l,t),l.menuLarge=l.target.find(".left-menu-large"),l.menuSmall=l.target.find(".left-menu-small"),l.switchBtn=l.target.find(".left-btn"),l.largeWidth=l.menuLarge.outerWidth(!0),l.smallWidth=l.menuSmall.find(".small-nav").outerWidth(!0),l.menuInitTop=parseInt(l.target.css("top"),10),0!==$(".w-head-nav").length&&$(".w-head-nav").is(":visible")&&(l.menuInitTop=l.menuInitTop+$(".w-head-nav").height()),l.scrollTarget=l.target.find(".scroll-cont"),l.scrollTarget.length&&(l.scrollbar=l.target.find(".scroll-area"),"undefined"==typeof a?l.largeTopDiv=l.menuLarge.find(".large-left-footer").outerHeight(!0):3!=a.type||"4426"!=o.ref&&"4427"!=o.ref&&"4428"!=o.ref?l.largeTopDiv=l.menuLarge.find(".large-left-footer").outerHeight(!0):l.largeTopDiv=0),n.scrollPageY(!0),n.detectPageWidth(),n.bindEvents(),$(window).scroll(n.scrollPageY)},initScrollBar:function(){var e=this;l.scrollTarget.length&&(e.resizeWindow(),"undefined"==typeof l.menuScroll?(l.menuScroll=t(".scroll-cont",{scrollbar:".scroll-bar"}),o.onresize&&o.onresize(function(){l.menuLarge.hasClass("hidden")||(e.resizeWindow(),l.menuScroll.resize())})):(e.resizeWindow(),l.menuScroll.resize()))},resizeWindow:function(){if(l.scrollTarget.length){var e=l.target.height()-l.largeTopDiv-parseInt(l.target.css("top"),10)-2;l.scrollTarget.find(".scroll-cont-inner").height()<e?l.scrollbar.hide():l.scrollbar.show(),l.scrollTarget.height(e),l.scrollbar.find(".scroll-bar").height(e)}},scrollPageY:function(e){var t=$(document).scrollTop();if(!e&&parseInt(l.target.css("top"),10)>0||t<=l.menuInitTop){var n=l.menuInitTop-t;l.target.css({top:n}),l.switchBtn.css({"margin-top":-(50+n/2)+"px"})}else l.target.css({top:0}),l.switchBtn.css({"margin-top":"-50px"})},detectPageWidth:function(){var e=this,t=document.getElementsByTagName("html")[0];/hidemenu/.test(t.className)?(d=!0,e.hideLargeMenu()):(d=!1,e.showLargeMenu()),$("#leftMenu").css("visibility","visible")},showLargeMenu:function(){var e=this;l.menuLarge.removeClass("hidden"),l.menuSmall.addClass("hidden"),l.switchBtn.addClass("left-btn-close"),l.scrollTarget.length&&e.initScrollBar(),$("html").removeClass("hidemenu"),d===!0&&void 0!==d||l.onToggle(!0),d=!0},hideLargeMenu:function(){l.pageWrap.offset().left<l.smallWidth?l.menuSmall.addClass("hidden"):l.menuSmall.removeClass("hidden"),l.menuLarge.addClass("hidden"),l.switchBtn.removeClass("left-btn-close"),$("html").addClass("hidemenu"),d===!1&&void 0!==d||l.onToggle(!1),d=!1},bindEvents:function(){var e=this;l.switchBtn.on("click",function(){var t=5;/hidemenu/.test(c.className)?(e.showLargeMenu(),t=12):e.hideLargeMenu(),"undefined"!=typeof r&&("1"===r.pageType&&"undefined"!=typeof a.anchorInfo&&"undefined"!=typeof a.anchorInfo.id&&(r.hostid=a.anchorInfo.id),n({eventid:$("#leftMenu").attr("data-stat-eventid"),act_type:t,uid:s.getUidSync(),bak1:r.pid,bak2:r.pageType,sid:r.sid,hostid:r.hostid}))}),l.menuSmall.find(".has-layer").on("mouseenter",function(){$(this).addClass("cur").find(".layer-wrap").show()}).on("mouseleave",function(){$(this).removeClass("cur").find(".layer-wrap").hide()}),l.menuSmall.find(".small-btn-dowm-yy").on("mouseenter",function(){$(".small-QR-code").show()}).on("mouseleave",function(){$(".small-QR-code").hide()})}};return l.target.find(".follow").on("click",function(e){e.preventDefault(),s.isLoginSync()?s.getUserInfo(s.getUidSync(),function(e){i.set({eventid:"20014317",more_info:{module:"2",moduleid:"0"}}),window.location.href="//"+window.location.hostname+"/u/follow/"+e.yynum+"#follow"}):(s.showYYLoginBox(),i.set({eventid:"20014317",more_info:{module:"2",moduleid:"1"}}))}),n.eventInit("#leftMenu",{onsend:function(e){return"1"===r.pageType&&"undefined"!=typeof a.anchorInfo&&"undefined"!=typeof a.anchorInfo.id&&(r.hostid=a.anchorInfo.id),e.uid=s.getUidSync(),e.bak1=r.pid,e.bak2=r.pageType,e.sid=r.sid,e.hostid=r.hostid,e}}),i.eventInit("#leftMenu",{eventid:"20014317"}),u}),define("../w-web2player-studio/w-web2flash",["jquery","util"],function(e,t){var n={"interface":{flashUrl4Studio:(window.flashUrlPrefix||"http://webyy.yy.com/")+"s/{$sid}/{$ssid}/yycomscene.swf"},type:0,player:"",danmu:!1,vol:!1,source:"",uid:0,livedelay:0,coop:0,sid:0,ssid:0},i={ctrl:function(e){var n=document.getElementById(e);if(n)return t.UA.ie?"object"==n.tagName.toLowerCase()?n:"":"embed"==n.tagName.toLowerCase()?n:n.getElementsByTagName("embed")[0]}},a={type:"flash",ctrl:void 0,setEventListener:function(e,n){var i=this;t.setVarByString(i.listener,e,n),t.setVarByString(window,e,n)},midware:{window:{initComplete:function(e,n){var o,r=a.listener.window,s=a.listener.w2f;if(a.ctrl||(a.ctrl=i.ctrl("player")),r&&a.ctrl)for(o in r)if(r.hasOwnProperty(o)){try{a.ctrl.registerCallBack(o,o)}catch(l){console.error(l)}t.trace.web("==","registerCallBack:","window."+o)}if(s&&a.ctrl)for(o in s)s.hasOwnProperty(o)&&(a.ctrl.registerCallBack("w2f."+o,"w2f."+o),t.trace.web("==","registerCallBack:","w2f."+o));n(e)}}},listener:{},callAs:function(e,n){var i,a=this;if(n)try{return i=a.ctrl.callAs(e,n),t.trace.web("flash.callAs:",e,n,"return:",i),i}catch(o){t.trace.error("flash.callAs error:",e,n,o)}else try{return i=a.ctrl.callAs(e),t.trace.web("flash.callAs:",e,"return:",i),i}catch(o){t.trace.error("flash.callAs error:",e,o)}},build:function(a,o){var r=this,s="",l={};n=e.fn.extend({},n,a),s=n["interface"].flashUrl4Studio,l={width:n.width,height:n.height,fullscreen:!0,flashvars:["sceneType="+n.sceneType,"danmu="+n.danmu,"volume="+n.vol,"source="+n.source,"anchorId="+n.uid,"livedelay="+n.livedelay,"coop="+n.coop,"topSid="+n.sid,"subSid="+n.ssid].join("&"),flashUrl:s.replace("{$sid}",n.sid).replace("{$ssid}",n.ssid||0)},e(n.player).append(t.flash.init("player",l)),r.ctrl=i.ctrl("player"),o()}};return"undefined"!=typeof define?a:void(window.web2flash=a)}),define("../w-web2player-studio/w-web2h5",["util"],function(e){var t={width:0,height:0,sid:0,ssid:0,type:"",player:""},n={sdkPath:"//web.yystatic.com/project/group_web_h5_player/yycom_es6_live_player/pc/lib/h5player-yy-flv-yyp2p.min.js",h5playerPath:"//web.yystatic.com/project/group_web_h5_player/yycom_es6_live_player/pc/js/YYES6LivePlayer.min.js"},i={player:null,JSConst:null,setEventListenerHold:[],callback:{}},a={},o={type:"h5",ctrl:void 0,api:void 0,midware:{window:{},w2f:{}},listener:{},setEventListener:function(t,n){var o=this,r=t.replace(/\./g,"_"),s=a[r];if(!o.api)return e.trace.web("h5.setEventListener fail","she.api is not exist, hold it",t),i.setEventListenerHold.push([t,n]);if(!s)return e.trace.error("h5.setEventListener error","name map",t,"is not exist");switch(s){case a.window_updateMicList:case a.window_getUserInfoCallback:case a.window_getUserListCallback:case a.window_getChannelOnlineCountCallback:case a.w2f_retScreenShot:i.callback[s]&&(o.api.removeEvent(s,i.callback[s]),e.trace.web("reset callback:",r))}o.api.onEvent(s,function(e){return n.apply(n,e.data)})},isSupported:function(){var e=!1;if(window.pageInfo&&!window.pageInfo.h5Supported)return!1;if(/edge\//i.test(navigator.userAgent))e=!1;else if(/chrome\//i.test(navigator.userAgent)){var t=/chrome\/(0|[1-9]\d*)\.(0|[1-9]\d*)/i.exec(navigator.userAgent);if(t){var n=+t[1],i=+t[2];e=!isNaN(n)&&!isNaN(i)&&n>=45}else e=!1}return e}(),build:function(o,r){var s=this;return t=e.extend(t,o),s.isSupported?void new e.Promise(function(e){var t=Math.round(new Date/1e3/60/10);window.requirejs.config({paths:{H5Player:n.sdkPath+"?"+t,YYES6LivePlayer:n.h5playerPath+"?"+t}}),window.requirejs(["H5Player","YYES6LivePlayer"],function(t,n){n?(window.YYES6LivePlayer=n,e()):r("h5 player not supported")})}).then(function(n){var o=i.player;o&&($(o).remove(),o=null),$(t.player).append('<div id="player"></div>'),i.player=o=$("#player")[0],$(o).css("width",t.width+"px"),$(o).css("height",t.height+"px"),s.api=new window.YYES6LivePlayer(o),i.JSConst=window.YYES6LivePlayer.JSConst,s.ctrl={callAs:function(e,t){return s.callAs(e,t)},registerCallBack:function(t,n){e.trace.web("someone try to registerCallback",t,n),s.setEventListener(t,window[n])}},a={initPlayer:i.JSConst.PLAYER.INIT,resizeVideo:i.JSConst.PLAYER.RESIZE,setVolume:i.JSConst.PLAYER.SET_VOLUME,getVolume:i.JSConst.PLAYER.SET_VOLUME,setMuted:i.JSConst.PLAYER.SET_MUTED,getMicList:i.JSConst.CHANNEL.REQUEST_MIC_USER_LIST,getChannelOnlineCount:i.JSConst.CHANNEL.REQUEST_USER_COUNT,reqVirtualUser:i.JSConst.CHANNEL.REQUEST_VIRTUAL_USER_LIST,getWyy:i.JSConst.OTHERS.GET_WEB_YY,openDanmu:i.JSConst.DANMUKU.OPEN,closeDanmu:i.JSConst.DANMUKU.CLOSE,getUserList:i.JSConst.CHANNEL.REQUEST_USER_LIST,adjustQuality:i.JSConst.PLAYER.SET_QUALITY,reqReportData:null,sendBullet:i.JSConst.DANMUKU.SEND,guestLogin:i.JSConst.CHANNEL.GUEST_LOGIN,onweblogin:i.JSConst.CHANNEL.WEB_LOGIN,callEntApp:i.JSConst.ENTAPP.CALL_ENTAPP_METHOD,entAppCallback:i.JSConst.ENTAPP.ENTAPP_METHOD_CALLBACK,reqScreenShot:i.JSConst.PLAYER.REQUEST_SCREEN_CAPTURE,getUserInfo:null,isGuestLogin:i.JSConst.CHANNEL.IS_GUEST_LOGIN,sendGiftCB:i.JSConst.AMBIENCE.SEND_GIFT_CALLBACK,getUserMoralQuality:i.JSConst.USER.REQUEST_MORAL_QUALITY,userChangePlayLine:i.JSConst.PLAYER.SET_LINE,w2f_onReady:i.JSConst.PLAYER.READY,w2f_danmuReady:i.JSConst.DANMUKU.READY,w2f_onFullscreen:i.JSConst.PLAYER.FULLSCREEN_CHANGE,w2f_onEnterLiveRoom:i.JSConst.PLAYER.JOIN_LIVE_ROOM,w2f_onInitQuality:i.JSConst.PLAYER.QUALITY_UPDATE,w2f_onStatusChange:i.JSConst.PLAYER.STATUS_CHANGE,w2f_onFlashStageIn:i.JSConst.PLAYER.MOUSE_ENTER,w2f_onFlashStageOut:i.JSConst.PLAYER.MOUSE_LEAVE,w2f_onFlashCallRecommend:i.JSConst.PLAYER.SHOW_RECOMMEND,w2f_onPrivilegeFaceData:i.JSConst.NOBLE.PRIVILEGE_FACE_CONFIG,w2f_onSetPrivilegeFaceInfo:i.JSConst.NOBLE.PRIVILEGE_FACE_DATA,w2f_onNobleLevel:i.JSConst.NOBLE.LEVEL_UP,w2f_onOpenNobleBC:i.JSConst.NOBLE.BROADCAST_OPEN_OR_REOPEN,w2f_onNobleLevelUpgrade:i.JSConst.NOBLE.BROADCAST_LEVEL_UPGRADE,w2f_new_user_car_enter_bc:i.JSConst.CHANNEL.USER_CAR_ENTER,w2f_car_exit_bc:i.JSConst.CHANNEL.USER_CAR_EXIT,w2f_onTrueloveOpen:i.JSConst.TRUELOVE.OPEN,w2f_onMessage:null,w2f_connectVideo:null,w2f_onGetUserInfo:i.JSConst.CHANNEL.REQUEST_USER_INFO,w2f_onVideoLog:null,w2f_onFollowUser:i.JSConst.PLAYER.FOLLOW,w2f_onCancelFollowUser:i.JSConst.PLAYER.CANCEL_FOLLOW,w2f_onZan:null,w2f_onSponsorsClick:null,w2f_onAnchorClick:null,w2f_onAvatarClick:null,w2f_onFailSend:i.JSConst.DANMUKU.SEND_FAIL,w2f_onPubBulletData:i.JSConst.DANMUKU.BULLET_DATA,w2f_retScreenShot:i.JSConst.PLAYER.SCREEN_CAPTURE_RESULT,w2f_onThirdMonitor:null,w2f_onPlayingLineState:i.JSConst.PLAYER.LINE_UPDATE,w2f_playLineBreak:i.JSConst.PLAYER.LINE_BREAK,w2f_playLineReconnect:i.JSConst.PLAYER.LINE_RECONNECT,w2f_onGetUserMoralQuality:i.JSConst.USER.MORAL_QUALITY_UPDATE,w2f_onLoadComplete:null,window_joinChannelFail:i.JSConst.CHANNEL.JOIN_FAIL,window_joinChannelSuccess:i.JSConst.CHANNEL.JOIN_SUCCESS,window_onuserkick:i.JSConst.CHANNEL.KICK_OUT,window_updateMicList:i.JSConst.CHANNEL.MIC_USER_LIST_UPDATE,window_getChannelOnlineCountCallback:i.JSConst.CHANNEL.ONLINE_USER_COUNT_UPDATE,window_channelInfoCallback:i.JSConst.CHANNEL.BASE_INFO_UPDATE,window_getUserListCallback:i.JSConst.CHANNEL.USER_LIST_UPDATE,window_initComplete:i.JSConst.PLAYER.INIT_COMPLETE,window_loginoutwebyy:i.JSConst.CHANNEL.WEB_LOGOUT,window_getUserInfoCallback:null,window_onSendMessage:null},s.api.call(i.JSConst.PLAYER.SET_UI_OPTIONS,{showEnterButton:!1,showControlBar:!1,showFullScreenButton:!0});for(var r;i.setEventListenerHold.length;)r=i.setEventListenerHold.shift(),s.setEventListener(r[0],r[1]);s.callAs("initPlayer",{sid:t.sid,ssid:t.ssid,sceneType:t.sceneType}),window.apiTest=s.api,n()}).then(function(){r()}).start():r&&r("h5 not support")},callAs:function(t,n){var i=this;if(!i.ctrl)return e.trace.error("h5.ctrl is not defined, break");var o=a[t];return o?(e.trace.h5("api.call",o,n),i.api.call(o,n)):void e.trace.error("api.call error:",t,"key map not exists")}};return o}),define("playerUtil",["util"],function(e){var t={},n={},i={web2player:void 0,w2any:void 0,queueFunction:function(){var t=e.makeArray(arguments),n=t.shift();$(n).each(function(n,i){try{"function"==typeof i&&i.apply(i,t)}catch(a){e.trace.error(a)}})},setEventListener:function(a){var o=this;return o.web2player?o.w2any?(a.attribute&&(o.web2player[a.attribute]=function(e){var i=a.attribute+"s";t[i]||(t[i]=[]),"function"==typeof e&&(t[i].push(e),void 0!==n[a.attribute]&&e(n[a.attribute]))}),void(a.listener&&("string"==typeof a.listener?o.w2any.setEventListener(a.listener,function(n){var r=/onPubBulletData|getChannelOnlineCountCallback/.test(a.listener);if(!a.attribute){var s=a.callback&&a.callback(n);return r||("flash"===o.w2any.type?e.trace.flash("<=",a.listener,n,"return:",s):e.trace.h5("<=",a.listener,n,"return:",s)),s}r||("flash"===o.w2any.type?e.trace.flash("<=",a.listener,n):e.trace.h5("<=",a.listener,n)),new e.Promise(function(t){var i=e.getVarByString(o.w2any.midware,a.listener);i?i(n,t):t(n)}).then(function(e,t){a.callback?a.callback(e,t):t(e)}).then(function(){if(a.attribute){var e=Array.prototype.slice.call(arguments),n=a.attribute+"s";e.pop(),i.queueFunction.apply(i,[t[n]].concat(e))}}).start()}):a.listener.callback=function(n){new e.Promise(function(e){a.callback?a.callback(n,e):e(n)}).then(function(){if(a.attribute){var e=Array.prototype.slice.call(arguments),n=a.attribute+"s";e.pop(),i.queueFunction.apply(i,[t[n]].concat(e))}}).start()}))):e.trace.error("she.w2any is not defined"):e.trace.error("she.web2player is not defined")},trace:e.trace};return i}),define("web2playerStudio",["../w-web2player-studio/w-web2flash","../w-web2player-studio/w-web2h5","util","playerUtil"],function(e,t,n,i){var a,o={player:null,type:"",sid:0,ssid:0,width:200,height:100},r={crashStat:"http://statistics.yy.com/statistics/StatisticsAction.json?uri={$stat}&value={$val}"},s={initComplete:!1,micList:[],quality:{current:-1,data:[]},isReady:!1,status:"",callAsHolds:[],resid:0,zanCount:0,hasInitComplete:!1,getUserListisTimeout:!1,getUserListTimeoutKey:void 0,isBan:!1,hasPlay:!1,userCount:0,virtualCount:0,virtualUsers:[],crashKey:0,crashStat:"",changeQualityHandle:void 0,delayOnlineCount:!1};t.isSupported?(i.w2any=a=t,n.trace.info("h5 player is supported")):(i.w2any=a=e,n.trace.info("h5 player is not supported, use flash"));var l={ctrl:void 0,reset:function(e){},build:function(e,t){var i=this;o=n.extend(o,e),n.trace.web("web2player.build",e),new n.Promise(function(e){a.build(o,function(n){return n?t&&t(n):(i.ctrl=a.ctrl,void e())})}).then(function(e){i.init(o,e)}).then(function(){return t&&t()}).start()},initPlayer:function(e){var t=this;n.trace.web("webplayer.initPlayer",e),s.type=e.type,s.status="",t.callAs("initPlayer",e)},init:function(e,t){n.trace.web("web2player.init",e);var i=/^on/g;for(var a in e)e.hasOwnProperty(a)&&a.match(i)&&l[a]&&l[a](e[a]);return t&&t()},callAs:function(e,t){return s.isReady?a.callAs(e,t):(n.trace.warn("web2player.callAs noready hold it:",e,t),void s.callAsHolds.push([e,t]))},resize:function(e,t){"flash"==a.type&&a.ctrl&&(a.ctrl.width=e,a.ctrl.height=t),this.callAs("resizeVideo",{width:e,height:t})},getCurrentTimeSync:function(){var e=this;return e.callAs("getCurrentTime")}};return i.web2player=l,i.setEventListener({attribute:"onReady",listener:"w2f.onReady",callback:function(e,t){if(s.isReady)return void n.trace.warn("w2f.onReady is already run, break it");if(s.isReady=!0,"flash"===a.type&&(clearInterval(s.crashKey),s.crashKey=setInterval(function(){try{a.ctrl.callAs("heartbeat")}catch(e){clearInterval(s.crashKey),n.trace.error("sorry, the flash has crashed"),(new Image).src=r.crashStat.replace("{$stat}",s.crashStat).replace("{$val}",2)}},5e3)),s.callAsHolds.length)for(var i;s.callAsHolds.length;)i=s.callAsHolds.shift(),i.length&&l.callAs(i[0],i[1]);t(e)}}),s.onError={},i.setEventListener({attribute:"onError",listener:s.onError}),i.setEventListener({listener:"window.joinChannelFail",callback:function(e){s.onError.callback&&s.onError.callback(e.param)}}),i.setEventListener({listener:"window.onuserkick",callback:function(e){s.onError.callback&&s.onError.callback(e.param)}}),i.setEventListener({listener:"window.loginoutwebyy",callback:function(){s.onError.callback&&s.onError.callback(-1)}}),i.setEventListener({attribute:"onInitComplete",listener:"window.initComplete",callback:function(e,t){s.initComplete=!0,t(e)}}),i.setEventListener({attribute:"onStatusChange",listener:"w2f.onStatusChange",callback:function(e,t){return"stop"==e.type&&(e.type="end"),e.type==s.status?n.trace.warn("w2f.onStatusChange status is same, no callback",e.type):s.isBan&&"end"==e.type?n.trace.warn("w2f.onStatusChange end not work, because video has baned",e.type):(s.initComplete&&!s.isReady&&(n.trace.warn("w2f.onReady is delate, calling by js now"),window.w2f.onReady(void 0,!0)),s.status=e.type,clearTimeout(s.statusChangeDelayKey),void("end"==e.type?(n.trace.warn("w2f.onStatusChange end not work, cause maybe it just before videostart, delay 2s"),s.statusChangeDelayKey=setTimeout(function(){t(e.type)},2e3)):t(e.type)))}}),i.setEventListener({attribute:"onEnterLiveRoom",listener:"w2f.onEnterLiveRoom",callback:function(e,t){t(e)}}),i.setEventListener({attribute:"onMicListChange",listener:"window.updateMicList",callback:function(e,t){t(e.param)}}),i.setEventListener({attribute:"onFullscreen",listener:"w2f.onFullscreen"}),i.setEventListener({attribute:"onFlashStageOut",listener:"w2f.onFlashStageOut"}),i.setEventListener({attribute:"onFlashCallRecommend",listener:"w2f.onFlashCallRecommend"}),i.setEventListener({attribute:"onPrivilegeFaceData",listener:"w2f.onPrivilegeFaceData"}),i.setEventListener({attribute:"onSetPrivilegeFaceInfo",listener:"w2f.onSetPrivilegeFaceInfo"}),i.setEventListener({attribute:"onNobleLevel",listener:"w2f.onNobleLevel"}),i.setEventListener({attribute:"onUserCarEnter",listener:"w2f.new_user_car_enter_bc",callback:function(e,t){e.carInfo&&e.carInfo.length&&$(e.carInfo).each(function(e,t){t.userName=decodeURIComponent(t.userName)}),t(e)}}),i.setEventListener({attribute:"onUserCarExit",listener:"w2f.car_exit_bc"}),i.setEventListener({attribute:"onOpenNobleBC",listener:"w2f.onOpenNobleBC"}),i.setEventListener({attribute:"onNobleLevelUpgrade",listener:"w2f.onNobleLevelUpgrade"}),i.setEventListener({attribute:"onTrueloveOpen",listener:"w2f.onTrueloveOpen"}),i.setEventListener({attribute:"onMessage",listener:"w2f.onMessage"}),i.setEventListener({attribute:"onConnectVideo",listener:"window.connectVideo",callback:function(e,t){s.onConnectVideo=e,t(e)}}),i.setEventListener({attribute:"onGetUserInfo",listener:"w2f.onGetUserInfo"}),i.setEventListener({attribute:"onVideoLog",listener:"w2f.onVideoLog"}),i.setEventListener({attribute:"onFollowUser",listener:"w2f.onFollowUser"}),i.setEventListener({attribute:"onCancelFollowUser",listener:"w2f.onCancelFollowUser"}),i.setEventListener({attribute:"onZan",listener:"w2f.onZan"}),i.setEventListener({attribute:"onSponsorsClick",listener:"w2f.onSponsorsClick"}),i.setEventListener({attribute:"onAnchorClick",listener:"w2f.onAnchorClick"}),i.setEventListener({attribute:"onAnchorClick",listener:"w2f.onAnchorClick"}),i.setEventListener({attribute:"onAvatarClick",listener:"w2f.onAvatarClick"}),i.setEventListener({attribute:"onFailSend",listener:"w2f.onFailSend",callback:function(e,t){t(e.ecode,e.str,e.yynum,e.time,e.subCode)}}),i.setEventListener({attribute:"onPubBulletData",listener:"w2f.onPubBulletData",callback:function(e,t){var n=e;$(n.data).each(function(e,t){try{t.text=decodeURIComponent(t.text)}catch(n){}try{t.name=decodeURIComponent(t.name)}catch(n){}}),t(n)}}),i.setEventListener({attribute:"onThirdMonitor",listener:"w2f.onThirdMonitor"}),l.danmu={open:function(){var e=l;e.config.set("danmu",!0)},close:function(){var e=l;e.config.set("danmu",!1)}},l.config={cookiesname:"playerConfig",source:void 0,get:function(e,t){var i=l,a=this,o="";if(!a.source){a.source={};try{a.source=n.JSON.parse(n.cookies.get(a.cookiesname)),"object"==typeof a.source&&a.source||(a.source={})}catch(r){}void 0===a.source.danmu&&(a.source.danmu=!0),void 0===a.source.bright&&(a.source.bright=.5),void 0===a.source.vol&&(a.source.vol=.5),a.source.quality=s.quality.current}switch(t?((a.source.quality<0||s.quality.data.length&&a.source.quality>s.quality.data.length-1)&&(a.source.quality=s.quality.current),o={volumn:a.source.vol,bright:a.source.bright,quality:{data:s.quality.data,current:a.source.quality<0?s.quality.current:a.source.quality},danmu:a.source.danmu}):o={volumn:i.callAs("getVolume")&&i.callAs("getVolume").vol,bright:0,quality:{data:s.quality.data,current:a.source.quality<0?s.quality.current:a.source.quality},danmu:a.source.danmu},e){case"volumn":return n.trace.wf("web2flash.config.get("+e+","+t+")",o.volumn),o.volumn;case"quality":return n.trace.wf("web2flash.config.get("+e+", "+t+")",o.quality),o.quality;case"all":return n.trace.wf("web2flash.config.get("+e+", "+t+")",o),o;case"danmu":return n.trace.wf("web2flash.config.get("+e+", "+t+")",o.danmu),o.danmu;default:return}},set:function(e,t){var i=l,a=this;switch(e){case"volumn":"play"!=o.type?(0!==t?i.callAs("setVolume",t):i.callAs("setMuted",!0),a.source.vol=t):a.source.vol=t.vol;break;case"quality":i.callAs("adjustQuality",{quality:t}),s.quality.current=t,a.source.quality=t;break;case"line":i.callAs("userChangePlayLine",{lineIndex:t}),a.source.line=t;break;case"danmu":"studio"==o.type&&(t?i.callAs("openDanmu"):i.callAs("closeDanmu")),a.source.danmu=!!t;break;case"all":0!==t.vol?i.callAs("setVolume",t.vol):i.callAs("setMuted",!0),i.source.val=t.vol,i.callAs("adjustBrightness",t.bright),i.source.bright=t.bright,i.callAs("adjustQuality",{quality:t.quality}),i.source.quality=t.qualigy,s.quality.current=t;break;default:return}n.cookies.set(a.cookiesname,n.JSON.stringify(a.source),24,"/",window.location.hostname)}},l.getDanmu=function(){return l.config.get("danmu",!0)},l.setDanmu=function(e){l.config.set("danmu",e)},l.getVolume=function(){return l.config.get("volumn",!0)},l.setVolume=function(e){l.config.set("volumn",e)},l.isLoginSync=function(){return window.user.isLoginSync()},i.setEventListener({listener:"window.getChannelOnlineCountCallback"}),l.getUserCount=function(e){var t=this;i.setEventListener({listener:"window.getChannelOnlineCountCallback",callback:function(t){s.delayOnlineCount||(s.delayOnlineCount=!0,s.userCount=parseInt(t.param.subCount,10)||0,e(s.userCount+s.virtualCount),setTimeout(function(){s.delayOnlineCount=!1},3e3))}}),t.callAs("getChannelOnlineCount"),t.callAs("reqVirtualUser")},i.setEventListener({listener:"window.getUserListCallback"}),l.getUserList=function(e,t){var a=this,o=10,r=(e-1)*o;r>s.userCount+s.virtualCount?t([]):r>=s.userCount?t(s.virtualUsers.slice(r-s.userCount,r-s.userCount+o)):(i.setEventListener({listener:"window.getUserListCallback",callback:function(e){if(s.getUserListIsTimeout)return void n.trace.warn("web2player.getUserListCallback is timeout, break");var i=e.param,a=10;i.length&&i.length<a&&(i=i.concat(s.virtualUsers.slice(0,a-i.length))),n.trace.wf("web2player.getUserListCallback",i),clearTimeout(s.getUserListTimeoutKey),t(i)}}),s.getUserListIsTimeout=!1,clearTimeout(s.getUserListTimeoutKey),a.callAs("getUserList",{index:(e-1)*o,count:o}),s.getUserListTimeoutKey=setTimeout(function(){s.getUserListIsTimeout=!0,t(!1,"userlist get timeout")},3e3))},i.setEventListener({listener:"window.getUserInfoCallback"}),l.getUserInfo=function(e,t){var n=this;i.setEventListener({listener:"window.getUserInfoCallback",callback:function(e){t(e)}}),n.callAs("getUserInfo",{uid:e})},l.getAnchorId=function(e){var t,i=this,a=i.getMicListSync(),o=5;n.trace.web("web2flash.getAnchorId"),function r(){a=i.getMicListSync(),o--,a&&a.length?(clearTimeout(t),e(a[0])):"end"!=s.status&&o?t=setTimeout(r,500):(clearTimeout(t),e(0))}()},l.rotate=function(e){var t=this;t.callAs("rolateVideo",{rolate:e})},l.sendMessage=function(e,t){var i=this,a=o;if(!s.isReady)return void t(!1,"flash no ready");switch(a.type){case"index":break;case"play":4!=s.type&&3!=s.type||$.ajax({type:"POST",url:r.danmu.replace("{$pid}",s.resid).replace("{$currentTime}",i.getCurrentTimeSync()).replace("{$content}",encodeURIComponent(e)).replace("{$type}",s.type),timeout:3e3,success:function(a){n.trace.ajax(a),0===a.resultCode?(i.callAs("sendBullet",e),t(!0,e)):1==a.resultCode?t(!1,"您输入的内容含有敏感词，请重新输入"):2==a.resultCode?t(!1,"弹幕频率过高,继续发送会被禁言"):3==a.resultCode?t(!1,"弹幕发送失败"):t(!1)},error:function(){t(!1)}},"json");break;case"studio":i.callAs("sendMessage",e)}},l.getMicListSync=function(){var e=this,t=e.callAs("getMicList")||[];return t},l.getMicList=function(e){var t=this;t.getAnchorId(function(){e(t.getMicListSync())})},l.getQualityListSync=function(){var e=this,t=e.callAs("getMultiVideos")||[];return t},l.zan=function(e,t){return t()},l.getPCUStatSync=function(){var e=this,t=e.callAs("reqReportData");return t?t:{}},l.setZanCount=function(e){var t=this;s.zanCount=e,t.callAs("setZanCount",{count:e})},l.setUserInfo=function(e){var t=this;t.config.get("danmu")&&(e?e.code=1:e={code:0},t.callAs("setUserInfo",e))},l.setFullscreen=function(e){var t=this;t.callAs("setFullscreen",e)},i.setEventListener({attribute:"onJoinChannel",listener:"window.joinChannelSuccess",callback:function(e,t){t(e)}}),l.joinChannel=function(){var e=this,t={username:n.cookies.get("username"),password:n.cookies.get("udb_l"),token:n.cookies.get("udb_n")};t.username&&t.password&&t.token?e.callAs("onweblogin",t):e.callAs("guestLogin")},l.getWyy=function(){var e=this;return e.callAs("getWyy")},l.reqScreenShot=function(e){var t=this;return i.setEventListener({listener:"w2f.retScreenShot",callback:function(t){e(t)}}),t.callAs("reqScreenShot")},l.setBgImg=function(e){this.callAs("setBgImg",e)},i.setEventListener({listener:"w2f.retScreenShot"}),i.setEventListener({listener:"w2f.onGetUserMoralQuality"}),l.getUserMoralQuality=function(e){i.setEventListener({listener:"w2f.onGetUserMoralQuality",callback:function(t){e(t)}}),l.callAs("getUserMoralQuality")},i.setEventListener({attribute:"onInitQuality",listener:"w2f.onInitQuality",callback:function(e,t){var n=[],i=e.current;if(2==e.qualitys.length)n.push({txt:"高清",index:0,rate:e.qualitys[0].codeRate}),n.push({txt:"流畅",index:1,rate:e.qualitys[1].codeRate});else if(e.qualitys.length>=3){var a=e.qualitys[0],o=a.codeRate,r="";r=0===o?"超清":o>=3e3&&o<8e3?"1080P":o>=8e3?"4K":"超清",n.push({txt:r,index:0,rate:o}),n.push({txt:"高清",index:e.qualitys.length-2,rate:e.qualitys[e.qualitys.length-2].codeRate}),n.push({txt:"流畅",index:e.qualitys.length-1,rate:e.qualitys[e.qualitys.length-1].codeRate})}e&&(s.quality.current=i,s.quality.data=n),s.onInitQuality=s.quality,t(s.quality)}}),i.setEventListener({attribute:"onPlayLineChangeState",listener:"w2f.onPlayingLineState",callback:function(e,t){s.onPlayingLineState=e,t(e)}}),i.setEventListener({attribute:"onPlayLineBreakState",listener:"w2f.playLineBreak"}),i.setEventListener({attribute:"onPlayLineReconnectState",listener:"w2f.playLineReconnect"}),i.setEventListener({attribute:"onDanmuReady",listener:"w2f.danmuReady",callback:function(e,t){s.danmuReady=!0,t(e)}}),i.setEventListener({attribute:"onSendMessage",listener:"window.onSendMessage"}),i.setEventListener({attribute:"onLoadComplete",listener:"w2f.onLoadComplete"}),i.setEventListener({attribute:"onChannelInfoCallback",listener:"window.channelInfoCallback",callback:function(e,t){t(e.param)}}),i.setEventListener({attribute:"onPlayVideoUid",listener:"w2f.onPlayVideoUid",callback:function(e,t){t(e.uid)}}),l.fn=i,~location.href.indexOf("debug")&&(window.web2player=l),l}),!function(){function e(e){return e.replace(b,"").replace(w,",").replace(C,"").replace(k,"").replace(T,"").split(I)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function n(n,i){function a(e){return h+=e.split(/\n/).length-1,d&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=y[1]+t(e)+y[2]+"\n"),e}function o(t){var n=h;if(c?t=c(t,i):r&&(t=t.replace(/\n/g,function(){return h++,"$line="+h+";"})),0===t.indexOf("=")){var a=u&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),a){var o=t.replace(/\s*\([^\)]+\)/,"");f[o]||/^(include|print)$/.test(o)||(t="$escape("+t+")")}else t="$string("+t+")";t=y[1]+t+y[2]}return r&&(t="$line="+n+";"+t),m(e(t),function(e){if(e&&!g[e]){var t;t="print"===e?w:"include"===e?C:f[e]?"$utils."+e:p[e]?"$helpers."+e:"$data."+e,k+=e+"="+t+",",g[e]=!0}}),t+"\n"}var r=i.debug,s=i.openTag,l=i.closeTag,c=i.parser,d=i.compress,u=i.escape,h=1,g={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},v="".trim,y=v?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],b=v?"$out+=text;return $out;":"$out.push(text);",w="function(){var text=''.concat.apply('',arguments);"+b+"}",C="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+b+"}",k="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(r?"$line=0,":""),T=y[0],I="return new String("+y[3]+");";m(n.split(s),function(e){e=e.split(l);var t=e[0],n=e[1];1===e.length?T+=a(t):(T+=o(t),n&&(T+=a(n)))});var _=k+T+I;r&&(_="try{"+_+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(n)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var L=new Function("$data","$filename",_);return L.prototype=f,L}catch(E){throw E.temp="function anonymous($data,$filename) {"+_+"}",E}}var i=function(e,t){return"string"==typeof t?v(t,{filename:e}):r(e,t)};i.version="3.0.0",i.config=function(e,t){a[e]=t};var a=i.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},o=i.cache={};i.render=function(e,t){return v(e,t)};var r=i.renderFile=function(e,t){var n=i.get(e)||g({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};i.get=function(e){var t;if(o[e])t=o[e];else if("object"==typeof document){var n=document.getElementById(e);if(n){var i=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=v(i,{filename:e})}}return t};var s=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?s(e.call(e)):""),e},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},c=function(e){return l[e]},d=function(e){return s(e).replace(/&(?![\w#]+;)|[<>"']/g,c)},u=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},h=function(e,t){var n,i;if(u(e))for(n=0,i=e.length;i>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},f=i.utils={$helpers:{},$include:r,$string:s,$escape:d,$each:h};i.helper=function(e,t){p[e]=t};var p=i.helpers=f.$helpers;i.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var g=function(e){return i.onerror(e),function(){return"{Template Error}"}},v=i.compile=function(e,t){function i(n){try{return new l(n,s)+""}catch(i){return t.debug?g(i)():(t.debug=!0,v(e,t)(n))}}t=t||{};for(var r in a)void 0===t[r]&&(t[r]=a[r]);var s=t.filename;try{var l=n(e,t)}catch(c){return c.filename=s||"anonymous",c.name="Syntax Error",g(c)}return i.prototype=l.prototype,i.toString=function(){return l.toString()},s&&t.cache&&(o[s]=i),i},m=f.$each,y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",b=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,w=/[^\w$]+/g,C=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),k=/^\d[^,]*|,\d[^,]*/g,T=/^,+|,+$/g,I=/^$|,+/;
a.openTag="{{",a.closeTag="}}";var _=function(e,t){var n=t.split(":"),i=n.shift(),a=n.join(":")||"";return a&&(a=", "+a),"$helpers."+i+"("+e+a+")"};a.parser=function(e){e=e.replace(/^\s/,"");var t=e.split(" "),n=t.shift(),a=t.join(" ");switch(n){case"if":e="if("+a+"){";break;case"else":t="if"===t.shift()?" if("+t.join(" ")+")":"",e="}else"+t+"{";break;case"/if":e="}";break;case"each":var o=t[0]||"$data",r=t[1]||"as",s=t[2]||"$value",l=t[3]||"$index",c=s+","+l;"as"!==r&&(o="[]"),e="$each("+o+",function("+c+"){";break;case"/each":e="});";break;case"echo":e="print("+a+");";break;case"print":case"include":e=n+"("+t.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(a)){var d=!0;0===e.indexOf("#")&&(e=e.substr(1),d=!1);for(var u=0,h=e.split("|"),f=h.length,p=h[u++];f>u;u++)p=_(p,h[u]);e=(d?"=":"=#")+p}else e=i.helpers[n]?"=#"+n+"("+t.join(",")+");":"="+e}return e},"function"==typeof define?define("artTemplate",[],function(){return i}):"undefined"!=typeof exports?module.exports=i:this.template=i}(),!function(){var shareTo=function(title,content,url,pic){function setShareUrl(e,t){var n=url||window.location.href;return shareFrom&&(n+=/\?\S/.test(n)?"&":"?",t.bdUrl=n+shareFrom),t}var shareFrom="";with($(function(){$(".bdsharebuttonbox a").mouseover(function(){$(this).attr("data-type")&&(shareFrom="f="+$(this).attr("data-type"))})}),window._bd_share_config={common:{onBeforeClick:setShareUrl,bdSnsKey:{tsina:"427941017"},bdText:title||"",bdDesc:content||"",bdPic:pic||"",bdStyle:"0",bdSize:"32",render:!1},share:{}},document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="//yyweb.yystatic.com/pc/js/lib/baidushare/static/api/js/share-e81df695cb.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]};"undefined"!=typeof define&&define.amd?define("shareTo",[],function(){return shareTo}):window.shareTo=shareTo}(),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("analogrange requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=e.document,i=jQuery,a={getPosition:function(e){var t=n;arguments[2]&&(t=arguments[2]);var a=e.offsetLeft,o=e.offsetTop;for("fixed"==i(e).css("position")&&(a+=t.documentElement.scrollLeft||t.body.scrollLeft,o+=t.documentElement.scrollTop||t.body.scrollTop),e=e.offsetParent;e;)a+=e.offsetLeft||0,o+=e.offsetTop||0,e=e.offsetParent;return{left:a,top:o}},upper1stLetter:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},preventDefault:function(t){t=t||e.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1},px2precent:function(e,t){var n=(e.options,e.key),i=t/e.target["offset"+n.wh2];return a.precentFix(i)},precentFix:function(e){return e<0&&(e=0),e>1&&(e=1),Math.round(100*e)/100}},o={direction:"x",onchange:function(e){},reverse:!1,onready:function(){}},r={target:void 0,bar:void 0,nowPos:0,nowPrecent:0,key:{pos:"",dir:"",wh:"",nwh:""}},s=function(e,t){return new s.fn.init(e,t)};s.fn=s.prototype={changeTo:function(e){var t=this,n=t.options,i=t.key;t.bar.style[i.wh]=100*a.precentFix(e)+"%",t.nowPrecent!=e&&n.onchange(e),t.nowPrecent=e}};var l=s.fn.init=function(t,s){var l=this,c=l.options=i.fn.extend({},o,s);i.fn.extend(l,r);var d=l.target=i(t)[0],u=l.bar=i(t)[0].children[0],h=l.key=i.fn.extend({},r.key);"x"==c.direction?(h.pos="left",h.dir="x",h.wh="width",h.nwh="height"):(h.pos="top",h.dir="y",h.wh="height",h.nwh="width"),h.pos2=a.upper1stLetter(h.pos),h.dir2=a.upper1stLetter(h.dir),h.wh2=a.upper1stLetter(h.wh),h.nwh2=a.upper1stLetter(h.nwh);var f={posM:0,down:function(t){t=t||e.event;var o=t["client"+h.dir2];c.reverse&&(o=-o),f.posM=o-u["offset"+h.wh2],i(n).on("mousemove",f.move),i(n).on("mouseup",f.up),i(e).on("blur",f.up),i(e).on("losecapture",f.up),a.preventDefault(t)},move:function(t){t=t||e.event;var n=t["client"+h.dir2];c.reverse&&(n=-n);var i=n-f.posM,o=a.px2precent(l,i);l.changeTo(o),a.preventDefault(t)},up:function(t){t=t||e.event,i(n).off("mousemove",f.move),i(n).off("mouseup",f.up),i(e).off("blur",f.up),i(e).off("losecapture",f.up)}};return i(d).on("click",function(t){t=t||e.event;var i=t["client"+h.dir2]-a.getPosition(d)[h.pos]+n.body["scroll"+h.pos2],o=a.px2precent(l,i);c.reverse&&(o=1-o),l.changeTo(o)}),i(u).on("mousedown",f.down),c.onready(),l};l.prototype=s.fn,"function"==typeof define&&define.amd&&define("analogrange",[],function(){return s}),"undefined"==typeof t&&(e.analogrange=s)});var webPcuCount=function(){function e(e,t){function n(e,t){return e<<t|e>>>32-t}function i(e,t){var n,i,a,o,r;return a=2147483648&e,o=2147483648&t,n=1073741824&e,i=1073741824&t,r=(1073741823&e)+(1073741823&t),n&i?2147483648^r^a^o:n|i?1073741824&r?3221225472^r^a^o:1073741824^r^a^o:r^a^o}function a(e,t,n){return e&t|~e&n}function o(e,t,n){return e&n|t&~n}function r(e,t,n){return e^t^n}function s(e,t,n){return t^(e|~n)}function l(e,t,o,r,s,l,c){return e=i(e,i(i(a(t,o,r),s),c)),i(n(e,l),t)}function c(e,t,a,r,s,l,c){return e=i(e,i(i(o(t,a,r),s),c)),i(n(e,l),t)}function d(e,t,a,o,s,l,c){return e=i(e,i(i(r(t,a,o),s),c)),i(n(e,l),t)}function u(e,t,a,o,r,l,c){return e=i(e,i(i(s(t,a,o),r),c)),i(n(e,l),t)}function h(e){for(var t,n=e.length,i=n+8,a=(i-i%64)/64,o=16*(a+1),r=Array(o-1),s=0,l=0;l<n;)t=(l-l%4)/4,s=l%4*8,r[t]=r[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,r[t]=r[t]|128<<s,r[o-2]=n<<3,r[o-1]=n>>>29,r}function f(e){var t,n,i="",a="";for(n=0;n<=3;n++)t=e>>>8*n&255,a="0"+t.toString(16),i+=a.substr(a.length-2,2);return i}var p,g,v,m,y,b,w,C,k,T=Array(),I=7,_=12,L=17,E=22,x=5,S=9,A=14,R=20,P=4,M=11,$=16,D=23,N=6,B=10,U=15,O=21;for(T=h(e),b=1732584193,w=4023233417,C=2562383102,k=271733878,p=0;p<T.length;p+=16)g=b,v=w,m=C,y=k,b=l(b,w,C,k,T[p+0],I,3614090360),k=l(k,b,w,C,T[p+1],_,3905402710),C=l(C,k,b,w,T[p+2],L,606105819),w=l(w,C,k,b,T[p+3],E,3250441966),b=l(b,w,C,k,T[p+4],I,4118548399),k=l(k,b,w,C,T[p+5],_,1200080426),C=l(C,k,b,w,T[p+6],L,2821735955),w=l(w,C,k,b,T[p+7],E,4249261313),b=l(b,w,C,k,T[p+8],I,1770035416),k=l(k,b,w,C,T[p+9],_,2336552879),C=l(C,k,b,w,T[p+10],L,4294925233),w=l(w,C,k,b,T[p+11],E,2304563134),b=l(b,w,C,k,T[p+12],I,1804603682),k=l(k,b,w,C,T[p+13],_,4254626195),C=l(C,k,b,w,T[p+14],L,2792965006),w=l(w,C,k,b,T[p+15],E,1236535329),b=c(b,w,C,k,T[p+1],x,4129170786),k=c(k,b,w,C,T[p+6],S,3225465664),C=c(C,k,b,w,T[p+11],A,643717713),w=c(w,C,k,b,T[p+0],R,3921069994),b=c(b,w,C,k,T[p+5],x,3593408605),k=c(k,b,w,C,T[p+10],S,38016083),C=c(C,k,b,w,T[p+15],A,3634488961),w=c(w,C,k,b,T[p+4],R,3889429448),b=c(b,w,C,k,T[p+9],x,568446438),k=c(k,b,w,C,T[p+14],S,3275163606),C=c(C,k,b,w,T[p+3],A,4107603335),w=c(w,C,k,b,T[p+8],R,1163531501),b=c(b,w,C,k,T[p+13],x,2850285829),k=c(k,b,w,C,T[p+2],S,4243563512),C=c(C,k,b,w,T[p+7],A,1735328473),w=c(w,C,k,b,T[p+12],R,2368359562),b=d(b,w,C,k,T[p+5],P,4294588738),k=d(k,b,w,C,T[p+8],M,2272392833),C=d(C,k,b,w,T[p+11],$,1839030562),w=d(w,C,k,b,T[p+14],D,4259657740),b=d(b,w,C,k,T[p+1],P,2763975236),k=d(k,b,w,C,T[p+4],M,1272893353),C=d(C,k,b,w,T[p+7],$,4139469664),w=d(w,C,k,b,T[p+10],D,3200236656),b=d(b,w,C,k,T[p+13],P,681279174),k=d(k,b,w,C,T[p+0],M,3936430074),C=d(C,k,b,w,T[p+3],$,3572445317),w=d(w,C,k,b,T[p+6],D,76029189),b=d(b,w,C,k,T[p+9],P,3654602809),k=d(k,b,w,C,T[p+12],M,3873151461),C=d(C,k,b,w,T[p+15],$,530742520),w=d(w,C,k,b,T[p+2],D,3299628645),b=u(b,w,C,k,T[p+0],N,4096336452),k=u(k,b,w,C,T[p+7],B,1126891415),C=u(C,k,b,w,T[p+14],U,2878612391),w=u(w,C,k,b,T[p+5],O,4237533241),b=u(b,w,C,k,T[p+12],N,1700485571),k=u(k,b,w,C,T[p+3],B,2399980690),C=u(C,k,b,w,T[p+10],U,4293915773),w=u(w,C,k,b,T[p+1],O,2240044497),b=u(b,w,C,k,T[p+8],N,1873313359),k=u(k,b,w,C,T[p+15],B,4264355552),C=u(C,k,b,w,T[p+6],U,2734768916),w=u(w,C,k,b,T[p+13],O,1309151649),b=u(b,w,C,k,T[p+4],N,4149444226),k=u(k,b,w,C,T[p+11],B,3174756917),C=u(C,k,b,w,T[p+2],U,718787259),w=u(w,C,k,b,T[p+9],O,3951481745),b=i(b,g),w=i(w,v),C=i(C,m),k=i(k,y);return 32==t?f(b)+f(w)+f(C)+f(k):f(w)+f(C)}function t(e,t,n){n=n||168;var i=new Date,a=8,o=i.getTime()+6e4*i.getTimezoneOffset(),r=o+36e5*a,s=new Date(r);s.setTime(s.getTime()+60*n*60*1e3),document.cookie=e+"="+decodeURIComponent(t)+";path=/;expires="+s.toGMTString()+";"}function n(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?encodeURIComponent(t[2]):null}function i(){var i=n("_pwcWyy"),o=n("hiido_ui");null==v.wyy&&(null!=i?p=i:null!=o?p=o:(p=e(u(16)),t("_pwcWyy",p,5040))),$.extend(v,{wy:p}),$.extend(m,{wyy:p}),a()}function a(){var t=Date.parse(new Date),n=u(4);f=e("".concat(t).concat(p).concat(n)),$.extend(v,{sed:f}),$.extend(m,{sessid:f}),o(),s(),l()}function o(){var e=2,t=0,n=Math.round(new Date/1e3);c(e,n,t),d()}function r(){var e=3,t=Math.round(new Date/1e3),n=Math.round(Math.round(new Date/1e3)-g/1e3);c(e,t,n),d()}function s(){$(window).unload(function(){r()})}function l(){var e=setInterval(function(){var t=Math.round(new Date/1e3),n=1,i=t,a=Math.round(t-g/1e3);if(y<18&&(y++,c(n,i,a),d()),18==y){clearInterval(e);setInterval(function(){var e=Math.round(new Date/1e3),t=1,n=e,i=Math.round(e-g/1e3);c(t,n,i),d()},6e4)}},1e4)}function c(t,n,i){var a=f+n+b;$.extend(v,{te:t,ot:n,dr:i,key:e(a,32)}),$.extend(m,{type:t,time:n,dr:i,ky:e(a,32)})}function d(){var e=location.protocol,t="dataaq.yy.com/",n="ylog.hiido.com/",i=1===h?"d.gif?":"g.gif?",a="c.gif?",o="",r="",s="",l="",c=new Image,d=new Image,u="";for(key in v)"inx"!=key?o+=key+"="+v[key]+"&":u=v.inx;o+="in="+u;for(key in m)r+=key+"="+m[key]+"&";s=e+"//"+t+i+o,l=e+"//"+n+a+r;try{c.src=s,d.src=l}catch(f){}}function u(e){for(var t=e,n="0123456789abcdefghijklmnopqrstuvwxyz",i=0,a="";i<t;i++)a+=n.charAt(Math.floor(Math.random()*n.length));return a}var h=1,f=!1,p="",g=!1,v={},m={},y=0,b="web540h5";return{init:function(e,t,a){var o=n("yyuid"),r=encodeURIComponent(e.info);3==arguments.length&&(h=a),g=new Date,v={sed:"",te:0,rl:e.rel||null,td:e.tempid||null,ip:e.ip||null,sd:e.sid||null,sbd:e.subsid||null,ud:"undefined"==o?null:o,ot:0,dr:0,wy:e.wyy||null,rf:encodeURIComponent(location.href),sr:e.source||null,cd:e.cpuid||null,ui:n("hiido_ui"),key:0,inx:"undefined"==r?null:r},m={act:1==h?"webentchndo":"webentvediodo",sessid:"",type:0,rel:e.rel||null,tempid:e.tempid||null,ip:e.ip||null,sid:e.sid||null,subsid:e.subsid||null,uid:"undefined"==o?null:o,time:0,dr:0,wyy:e.wyy||null,ref:encodeURIComponent(location.href),source:e.source||null,cpuid:e.cpuid||null,ui:n("hiido_ui"),ky:0,info:"undefined"==r?null:r},t&&($.extend(v,t),$.extend(m,t)),i()}}}();window.webPcuCount=webPcuCount,"undefined"!=typeof module&&"object"==typeof exports?module.exports=webPcuCount:"function"==typeof define&&define.amd&&define("webpcucount",[],function(){return webPcuCount});var flashPcucount=function(){function e(e,t){function n(e,t){return e<<t|e>>>32-t}function i(e,t){var n,i,a,o,r;return a=2147483648&e,o=2147483648&t,n=1073741824&e,i=1073741824&t,r=(1073741823&e)+(1073741823&t),n&i?2147483648^r^a^o:n|i?1073741824&r?3221225472^r^a^o:1073741824^r^a^o:r^a^o}function a(e,t,n){return e&t|~e&n}function o(e,t,n){return e&n|t&~n}function r(e,t,n){return e^t^n}function s(e,t,n){return t^(e|~n)}function l(e,t,o,r,s,l,c){return e=i(e,i(i(a(t,o,r),s),c)),i(n(e,l),t)}function c(e,t,a,r,s,l,c){return e=i(e,i(i(o(t,a,r),s),c)),i(n(e,l),t)}function d(e,t,a,o,s,l,c){return e=i(e,i(i(r(t,a,o),s),c)),i(n(e,l),t)}function u(e,t,a,o,r,l,c){return e=i(e,i(i(s(t,a,o),r),c)),i(n(e,l),t)}function h(e){for(var t,n=e.length,i=n+8,a=(i-i%64)/64,o=16*(a+1),r=Array(o-1),s=0,l=0;l<n;)t=(l-l%4)/4,s=l%4*8,r[t]=r[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,r[t]=r[t]|128<<s,r[o-2]=n<<3,r[o-1]=n>>>29,r}function f(e){var t,n,i="",a="";for(n=0;n<=3;n++)t=e>>>8*n&255,a="0"+t.toString(16),i+=a.substr(a.length-2,2);return i}var p,g,v,m,y,b,w,C,k,T=Array(),I=7,_=12,L=17,E=22,x=5,S=9,A=14,R=20,P=4,M=11,$=16,D=23,N=6,B=10,U=15,O=21;for(T=h(e),b=1732584193,w=4023233417,C=2562383102,k=271733878,p=0;p<T.length;p+=16)g=b,v=w,m=C,y=k,b=l(b,w,C,k,T[p+0],I,3614090360),k=l(k,b,w,C,T[p+1],_,3905402710),C=l(C,k,b,w,T[p+2],L,606105819),w=l(w,C,k,b,T[p+3],E,3250441966),b=l(b,w,C,k,T[p+4],I,4118548399),k=l(k,b,w,C,T[p+5],_,1200080426),C=l(C,k,b,w,T[p+6],L,2821735955),w=l(w,C,k,b,T[p+7],E,4249261313),b=l(b,w,C,k,T[p+8],I,1770035416),k=l(k,b,w,C,T[p+9],_,2336552879),C=l(C,k,b,w,T[p+10],L,4294925233),w=l(w,C,k,b,T[p+11],E,2304563134),b=l(b,w,C,k,T[p+12],I,1804603682),k=l(k,b,w,C,T[p+13],_,4254626195),C=l(C,k,b,w,T[p+14],L,2792965006),w=l(w,C,k,b,T[p+15],E,1236535329),b=c(b,w,C,k,T[p+1],x,4129170786),k=c(k,b,w,C,T[p+6],S,3225465664),C=c(C,k,b,w,T[p+11],A,643717713),w=c(w,C,k,b,T[p+0],R,3921069994),b=c(b,w,C,k,T[p+5],x,3593408605),k=c(k,b,w,C,T[p+10],S,38016083),C=c(C,k,b,w,T[p+15],A,3634488961),w=c(w,C,k,b,T[p+4],R,3889429448),b=c(b,w,C,k,T[p+9],x,568446438),k=c(k,b,w,C,T[p+14],S,3275163606),C=c(C,k,b,w,T[p+3],A,4107603335),w=c(w,C,k,b,T[p+8],R,1163531501),b=c(b,w,C,k,T[p+13],x,2850285829),k=c(k,b,w,C,T[p+2],S,4243563512),C=c(C,k,b,w,T[p+7],A,1735328473),w=c(w,C,k,b,T[p+12],R,2368359562),b=d(b,w,C,k,T[p+5],P,4294588738),k=d(k,b,w,C,T[p+8],M,2272392833),C=d(C,k,b,w,T[p+11],$,1839030562),w=d(w,C,k,b,T[p+14],D,4259657740),b=d(b,w,C,k,T[p+1],P,2763975236),k=d(k,b,w,C,T[p+4],M,1272893353),C=d(C,k,b,w,T[p+7],$,4139469664),w=d(w,C,k,b,T[p+10],D,3200236656),b=d(b,w,C,k,T[p+13],P,681279174),k=d(k,b,w,C,T[p+0],M,3936430074),C=d(C,k,b,w,T[p+3],$,3572445317),w=d(w,C,k,b,T[p+6],D,76029189),b=d(b,w,C,k,T[p+9],P,3654602809),k=d(k,b,w,C,T[p+12],M,3873151461),C=d(C,k,b,w,T[p+15],$,530742520),w=d(w,C,k,b,T[p+2],D,3299628645),b=u(b,w,C,k,T[p+0],N,4096336452),k=u(k,b,w,C,T[p+7],B,1126891415),C=u(C,k,b,w,T[p+14],U,2878612391),w=u(w,C,k,b,T[p+5],O,4237533241),b=u(b,w,C,k,T[p+12],N,1700485571),k=u(k,b,w,C,T[p+3],B,2399980690),C=u(C,k,b,w,T[p+10],U,4293915773),w=u(w,C,k,b,T[p+1],O,2240044497),b=u(b,w,C,k,T[p+8],N,1873313359),k=u(k,b,w,C,T[p+15],B,4264355552),C=u(C,k,b,w,T[p+6],U,2734768916),w=u(w,C,k,b,T[p+13],O,1309151649),b=u(b,w,C,k,T[p+4],N,4149444226),k=u(k,b,w,C,T[p+11],B,3174756917),C=u(C,k,b,w,T[p+2],U,718787259),w=u(w,C,k,b,T[p+9],O,3951481745),b=i(b,g),w=i(w,v),C=i(C,m),k=i(k,y);return 32==t?f(b)+f(w)+f(C)+f(k):f(w)+f(C)}function t(e,t,n){n=n||168;var i=new Date,a=8,o=i.getTime()+6e4*i.getTimezoneOffset(),r=o+36e5*a,s=new Date(r);s.setTime(s.getTime()+60*n*60*1e3),document.cookie=e+"="+decodeURIComponent(t)+";path=/;expires="+s.toGMTString()+";"}function n(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?encodeURIComponent(t[2]):null}function i(){var i=n("_pwcWyy"),o=n("hiido_ui");null==v.wyy&&(null!=i?p=i:null!=o?p=o:(p=e(u(16)),t("_pwcWyy",p,5040))),$.extend(v,{wy:p}),$.extend(m,{wyy:p}),a()}function a(){var t=Date.parse(new Date),n=u(4);f=e("".concat(t).concat(p).concat(n)),$.extend(v,{sed:f}),$.extend(m,{sessid:f}),o(),s(),l()}function o(){var e=2,t=0,n=Math.round(new Date/1e3);c(e,n,t),d()}function r(){var e=3,t=Math.round(new Date/1e3),n=Math.round(Math.round(new Date/1e3)-g/1e3);c(e,t,n),d()}function s(){$(window).unload(function(){r()})}function l(){w=setInterval(function(){var e=Math.round(new Date/1e3),t=1,n=e,i=Math.round(e-g/1e3);y<18&&(y++,c(t,n,i),d()),18==y&&(clearInterval(w),C=setInterval(function(){var e=Math.round(new Date/1e3),t=1,n=e,i=Math.round(e-g/1e3);c(t,n,i),d()},6e4))},1e4)}function c(t,n,i){var a=f+n+b;$.extend(v,{te:t,ot:n,dr:i,key:e(a,32)}),$.extend(m,{type:t,time:n,dr:i,ky:e(a,32)})}function d(){var e=location.protocol,t="dataaq.yy.com/",n="ylog.hiido.com/",i=1===h?"d.gif?":"g.gif?",a="c.gif?",o="",r="",s="",l="",c=new Image,d=new Image,u="";for(key in v)"inx"!=key?o+=key+"="+v[key]+"&":u=v.inx;o+="in="+u;for(key in m)r+=key+"="+m[key]+"&";s=e+"//"+t+i+o,l=e+"//"+n+a+r;try{c.src=s,d.src=l}catch(f){}}function u(e){for(var t=e,n="0123456789abcdefghijklmnopqrstuvwxyz",i=0,a="";i<t;i++)a+=n.charAt(Math.floor(Math.random()*n.length));return a}var h=1,f=!1,p="",g=!1,v={},m={},y=0,b="web540h5",w=null,C=null;return{init:function(e,t,a){y=0,clearInterval(w),clearInterval(C);var o=n("yyuid"),r=encodeURIComponent(e.info);3==arguments.length&&(h=a),g=new Date,v={sed:"",te:0,rl:e.rel||null,td:e.tempid||null,ip:e.ip||null,sd:e.sid||null,sbd:e.subsid||null,ud:"undefined"==o?null:o,ot:0,dr:0,wy:e.wyy||null,rf:encodeURIComponent(location.href),sr:e.source||null,cd:e.cpuid||null,ui:n("hiido_ui"),key:0,inx:"undefined"==r?null:r},m={act:1==h?"webentchndo":"webentvediodo",sessid:"",type:0,rel:e.rel||null,tempid:e.tempid||null,ip:e.ip||null,sid:e.sid||null,subsid:e.subsid||null,uid:"undefined"==o?null:o,time:0,dr:0,wyy:e.wyy||null,ref:encodeURIComponent(location.href),source:e.source||null,cpuid:e.cpuid||null,ui:n("hiido_ui"),ky:0,info:"undefined"==r?null:r},t&&($.extend(v,t),$.extend(m,t)),i()}}}();window.flashPcucount=flashPcucount,"undefined"!=typeof module&&"object"==typeof exports?module.exports=flashPcucount:"function"==typeof define&&define.amd&&define("flashPcucount",[],function(){return flashPcucount}),function(e){"function"==typeof define&&define.amd?define("cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function i(e){return t(s.json?JSON.stringify(e):String(e))}function a(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),s.json?JSON.parse(e):e}catch(t){}}function o(t,n){var i=s.raw?t:a(t);return e.isFunction(n)?n(i):i}var r=/\+/g,s=e.cookie=function(a,r,l){if(void 0!==r&&!e.isFunction(r)){if(l=e.extend({},s.defaults,l),"number"==typeof l.expires){var c=l.expires,d=l.expires=new Date;d.setTime(+d+864e5*c)}return document.cookie=[t(a),"=",i(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=a?void 0:{},h=document.cookie?document.cookie.split("; "):[],f=0,p=h.length;f<p;f++){var g=h[f].split("="),v=n(g.shift()),m=g.join("=");if(a&&a===v){u=o(m,r);break}a||void 0===(m=o(m))||(u[v]=m)}return u};s.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define("thirdmonitor",["jquery","util","web2playerStudio"],function(e,t,n){var i={source:{clientType:"web",data:{sid:"",ssid:"",userId:"0",anchor_id:"0"},monitorTypes:[]},onScriptDone:void 0,scriptDone:!1,barrData:{},airuiScriptUrl:[],monitorSwitch:!1,monitorVersion:"",init:function(a){var o=i,r=o.source;r.data=t.extend(r.data,a),n.onThirdMonitor(function(t){var n=t.monitorJsUrl,i=t.monitors;if(parseInt(t.version)>parseInt(o.monitorVersion)&&(r.monitorTypes=[]),!(i.length<1)){for(var a=0,s=i.length;a<s;a++)r.monitorTypes.push(i[a].monitorType);o.airuiScriptUrl.join("|").split(t.monitorJsUrl).length<2&&(o.airuiScriptUrl.push(t.monitorUrl),e.getScript(n,function(){o.onScriptDone?(o.onScriptDone(),o.onScriptDone=void 0):o.scriptDone=!0})),o.monitorVersion=t.version}})},statEnterChannel:function(e){var t=i,n=t.source.data;n.anchor_id=e.toString();var a=function(){var e=JSON.stringify(t.source);t.monitorSwitch=!1,window.mon.enterChannelMonitor(e)};t.scriptDone?a():t.onScriptDone=a},statSendMessage:function(){var e=i;if(e.barrData=t.extend(e.source,e.barrData),e.barrData.data.barr_cnt="1",e.monitorSwitch){var n=JSON.stringify(e.barrData);window.mon.sendMsgMonitor(n)}}};return i}),define("webyyConsts",[],function(){var e={Events:null,EntFns:null};return e.Events={APP_READY:"app_ready_cb",CONTRIBUTE:{READY:"contribute_ready_cb",RECEIVE_CONTRIBUTE:"recevive_contribute_cb",RESET_CONTRIBUTE:"reset_contribute_cb",PREV_RESULT:"prev_result_cb",NEXT_RESULT:"next_result_cb",PREV_PAGE:"prev_page_cb",NEXT_PAGE:"next_page_cb"},RECEIVE_SINGLE_CONTRIBUTE:{SINGLE_CONTRIBUTION:"refresh_single_contribution_rank"},ENTPUB:{PRESENT_READY:"present_ready_cb",LIST_PRESENT_READY:"list_present_cb",RECEIVE_PRESENT:"receive_present_cb",BUY_PRESENT_RESULT:"buy_present_result_cb",BUY_PRESENT_CONFIRM:"buy_present_confirm_result_cb",BUY_PRESENT_CONFIRM_RESULT:"buy_present_confirm_result_cb",BUY_PRESENT_COMBO_EFFECT:"buy_present_combo_effect_cb",BUY_PRESENT_UNION_GIFT_CB:"buy_present_union_gift_cb",BUY_PRESENT_COMBO_EFFECT_ALL_CB:"buy_present_combo_effect_all_cb",CANCEL_PRESENT_UNION_GIFT_CB:"cancel_present_union_gift_cb",BUY_PRESENT_FREE_REQ:"call_buy_present",BUY_PRESENT_FREE_RESP:"free_present_send_result_cb",FREE_PACKAGE_LIST_REQ:"call_free_package_list",FREE_PACKAGE_LIST_RESP:"free_present_list_cb"},INFORMME:{READY:"inform_ready_cb",NUMBER_CHANGE:"inform_number_change_cb",SUB_RESULT:"sub_inform_result_cb",SUB_CLICK:"sub_inform_click"},PERSONAL:{FIRST_MIC_CHANGE:"first_mic_change_cb",FLOWER_CHANGE:"flower_change_cb",TICKET_CHANGE:"ticket_change_cb"},CHAT:{CHAT_READY:"chat_ready_cb",CHAT_MSG_BROADCAST_CB:"chat_msg_broadcast_cb",CHAT_SEND_MSG_CB:"chat_send_msg_cb",CHAT_FOR_BID_REQ_CB:"Chat_for_bid_req_cb"},CAR:{CAR_RSP_CHANNEL_PARK:"car_rsp_channel_park",CAR_BC_USER_CAR_ENTER:"car_bc_user_car_enter",CAR_BC_USER_CAR_OUT:"car_bc_user_car_out"},NOBLE:{RECEVIVE_NOBLE_RANK_CB:"as_send_noble_list_cb",AS_CALL_SHOW_NOBLE_LIST_CB:"as_call_show_noble_list_cb",NOTICE_NOBLE_UPDATE:"responseMynobleInfo"},ACT_TURNTABLE:{SHOW_TREASURE_GRAB_RANK_BOX:"callJsTreasureBoxGrabRank",SHOW_EXCHANGE_RED_DIAMOND_BOX:"callJsExchangeRedDiamond",SHOW_TURNTABLE_ICON:"callJsTurnableIconUrl",RECEIVED_TURNTABLE_GIFT:"callJsUpdateGift",SHOW_LACK_RED_BOX:"callJsNotEnoughRedDiamond",IS_LOGIN_FOR_RANK_BOX:"grabTreasureNoLogin",RECEIVED_MY_RANK_DATA:"callJsMyGrab"},HEADER:{REFRESH_USER_INFO_FLAG:"userLoginInfoUIRefresh"}},e.EntFns={CONTRIBUTE:{REQUEST_LIST:"call_contribute_request_list"},ENTPUB:{BUY_PRESENT:"call_buy_present",BUY_PRESENT_CONFIRM:"call_buy_present_confirm"},INFORMME:{SUB_UNSUB:"call_sub_unsub"},CHAT:{CHAT_SEND_MSG_CALL:"chat_send_msg_call",CHAT_FOR_BID_REQ:"Chat_for_bid_req"},NOBLE:{CHAT_SEND_NOBLE_MSG_CALL:"chat_send_noble_msg_call"},ACT_ACT_TURNTABLE:{SHOW_TURNTABLE:"callAsPopupTurnTableWindow",UPDATE_TURNTABLE_RED:"callAsUpdateRedDiamond",HIDE_TURNTABLE_FORWARD_ICON:"callAsHideForwardIcon"}},e}),define("pageContext",[],function(){var e={pageType:"",owuid:"",channelType:""};return e}),define("loginUtil",["jquery","pageContext"],function(e,t){function n(){for(var e=document.cookie,t=e.split("; "),n=0;n<t.length;n++){var a=t[n].split("=");if(null!=a&&a.length>0){if("hiido_ui"==a[0])continue;i(a[0])}}}function i(t){var n=new Date;n.setTime(n.getTime()-2592e6);var i=e.cookie(t);document.cookie=t+"="+i+"; expires="+n.toGMTString()+"; path=/;domain=."+a.domain}var a={customLoginCallBacks:[],customLogoutCallBacks:[],getShowUserInfoCallBacks:[],getUserInfoCallBacks:[],closeLoginCallBack:[],userContext:{},domain:function(){return"yy.duowan.com"==window.location.hostname?"yy.duowan.com":"yy.com"}(),init:function(){window.user=window.user||void 0,this.isLogin()&&this.getUserInfo(),this.onLogStateChange(),this.bindEvent()},bindEvent:function(){},isLogin:function(){if(window.user)return window.user.isLoginSync();var t=!1,n=e.cookie("yyuid");return n&&""!=n&&(t=!0),t},getUserInfo:function(){window.user&&window.user.getUserInfo(this.getUserInfoCallBack)},getUserInfoCallBack:function(n){if(n){a.userContext.userNick=n.nick,a.userContext.yyNum=n.yynum,a.userContext.uid=n.uid,a.userContext.anchor=n.anchor,a.userContext.level=n.level,a.userContext.logo=n.logo,a.userContext.hdLogo=n.hdLogo,n.nick&&e.cookie("nick",n.nick,{path:"/",domain:a.domain});var i=n.hdLogo;i||(i=n.logo),e.cookie("hdLogo",i,{path:"/",domain:a.domain})}if("undefined"!=typeof t&&"room"==t.pageType&&a.getShowUserInfo(),null!=a.getUserInfoCallBacks)for(var o=a.getUserInfoCallBacks.length,r=0;r<o;r++)a.getUserInfoCallBacks[r](a.userContext)},addUserInfoCallBacks:function(e){this.getUserInfoCallBacks.push(e)},getShowUserInfo:function(){e.ajax({url:domain+"/ent/user/getExtraUserInfo.action?t="+(new Date).getTime(),type:"get",dataType:"json",data:{},excetpion:function(e){},success:function(e){if(e&&"-99999"!=e.result&&(a.userContext.isNoble=e.isNoble,a.userContext.nobleLevel=e.nobleLevel,a.userContext.honourLevel=e.honourLevel,a.userContext.nobleState=e.nobleState,null!=a.getShowUserInfoCallBacks))for(var t=a.getShowUserInfoCallBacks.length,n=0;n<t;n++)a.getShowUserInfoCallBacks[n](e)}})},addShowUserInfoCallbacks:function(e){this.getShowUserInfoCallBacks.push(e)},getUserFocusListCallBack:function(e){},getLoginUserAccount:function(){return e.cookie("username")},getLoginUid:function(){return window.user?window.user.getUidSync():e.cookie("yyuid")},showLoginOrRegister:function(){window.user&&window.user.showYYLoginBox(this.loginCallBack)},loginCallBack:function(){if(this.getUserInfo(),null!=a.customLoginCallBacks)for(var e=a.customLoginCallBacks.length,t=0;t<e;t++)a.customLoginCallBacks[t]()},addLoginCallbacks:function(e){this.customLoginCallBacks.push(e)},logout:function(){window.user&&window.user.logout(this.logoutCallBack)},logoutCallBack:function(){if(n(),null!=a.customLogoutCallBacks)for(var e=a.customLogoutCallBacks.length,t=0;t<e;t++)a.customLogoutCallBacks[t]()},addLogoutCallbacks:function(e){this.customLogoutCallBacks.push(e)},isGuestLogin:function(){console.warn("loginUtil.isGuestLogin(); 方法已经被注销！")},getMt:function(){return window.getMM()},onLogStateChange:function(){window.header?window.header.onLogStateChange(function(e){e?a.loginCallBack():a.logoutCallBack()}):console.log("onLogStateChange header is not ready")}};return window.LoginUtil=a,a}),define("entAppReady",[],function(){var e={ready:!1,flashEntReadyCallback:[],isReady:function(){return this.ready},init:function(){window.asCheckJS=function(){return console.log("entAppReady:asCheckJS:ok"),"ok"}},addFlashEntReadyCallback:function(e){return"function"!=typeof e?void console.log("addFlashEntReadyCallback,param is wrong! "+e+" is not a function"):void(this.ready?e():this.flashEntReadyCallback.push(e))},invokeCallbackFuns:function(){if(!this.flashEntReadyCallback)return void console.log("no flashEntReadyCallback!");for(var e in this.flashEntReadyCallback)if(this.flashEntReadyCallback[e])try{this.flashEntReadyCallback[e]()}catch(t){console.warn("entAppReady:invokeCallbackFuns",this.flashEntReadyCallback[e],t)}}};return window.asIsReady=function(){console.log("entAppReady:asIsReady"),!e.ready&&e.invokeCallbackFuns(),e.ready=!0},window.asCheckJS=function(){return console.log("entAppReady:asCheckJS:no"),"no"},"undefined"==typeof window.ctx&&"undefined"==typeof window.domain&&(window.ctx="/home",window.domain="//www.yy.com",window.baseUrl="//www.yy.com/home",window.serverTime="",window.formatTime=new Date(serverTime),window.hours=window.formatTime.getHours(),window.mins=window.formatTime.getMinutes(),window.messageTime=window.hours+":"+window.mins,window.videoStaticPath="//v.m.yystatic.com",window.staticPath="//res.home.yystatic.com",window.staticPath1="//res1.home.yystatic.com",window.roomUrl="//www.yy.com/home/show/room/index.action",window.rechargeUrl="//pay.duowan.com/userDepositDWAction.action"),e}),define("SWFURLHandler",[],function(){var e="http://live1.yystatic.com/live/wandou",t={getFlashHelperSwfURL:function(){return e+"/swf/flashHelper/FlashHelper.swf?v="+(new Date).getTime()},getRoomSwfURLByUid:function(e,t){var n="http://webyy.yy.com/s/"+e+"/"+t+"/yycomScene.swf";return n},getLoadingSwfURL:function(){return"http://live.yystatic.com/live/swf/loading.swf?v=2015101501"},getGiftEffectSwfURL:function(){return e+"/flash/gift_roll_list.swf?v=2016040601"},getComboEffectSwfURL:function(){return e+"/flash/combo_gift.swf?v=2016040601"},getRandomGiftEffectSwfURL:function(){return e+"/flash/gift.swf?v=2015122801"},loadComboAllSwfURL:function(){return staticPath+"/swf/AllCombo.swf?v=2696477a.4"}};return t}),define("FlashEmbeder",[],function(){var e=function(){function t(){if(!H){try{var e=B.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}H=!0;for(var n=F.length,i=0;i<n;i++)F[i]()}}function n(e){H?e():F[F.length]=e}function i(e){if(typeof N.addEventListener!=S)N.addEventListener("load",e,!1);else if(typeof B.addEventListener!=S)B.addEventListener("load",e,!1);else if(typeof N.attachEvent!=S)y(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function a(){O?o():r()}function o(){var e=B.getElementsByTagName("body")[0],t=m(A);t.setAttribute("type",M);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=S){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),V.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=j.length;if(e>0)for(var t=0;t<e;t++){var n=j[t].id,i=j[t].callbackFn,a={success:!1,id:n};if(V.pv[0]>0){var o=v(n);if(o)if(!b(j[t].swfVersion)||V.wk&&V.wk<312)if(j[t].expressInstall&&l()){var r={};r.data=j[t].expressInstall,r.width=o.getAttribute("width")||"0",r.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(r.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(r.align=o.getAttribute("align"));for(var u={},h=o.getElementsByTagName("param"),f=h.length,p=0;p<f;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(u[h[p].getAttribute("name")]=h[p].getAttribute("value"));c(r,u,n,i)}else d(o),i&&i(a);else C(n,!0),i&&(a.success=!0,a.ref=s(n),i(a))}else if(C(n,!0),i){var g=s(n);g&&typeof g.SetVariable!=S&&(a.success=!0,a.ref=g),i(a)}}}function s(e){var t=null,n=v(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=S)t=n;else{var i=n.getElementsByTagName(A)[0];i&&(t=i)}return t}function l(){return!z&&b("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function c(e,t,n,i){z=!0,_=i||null,L={success:!1,id:n};var a=v(n);if(a){"OBJECT"==a.nodeName?(T=u(a),I=null):(T=a,I=n),e.id=$,(typeof e.width==S||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==S||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),B.title=B.title.slice(0,47)+" - Flash Player Installation";var o=V.ie&&V.win?"ActiveX":"PlugIn",r="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+B.title;if(typeof t.flashvars!=S?t.flashvars+="&"+r:t.flashvars=r,V.ie&&V.win&&4!=a.readyState){var s=m("div");n+="SWFObjectNew",s.setAttribute("id",n),a.parentNode.insertBefore(s,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}h(e,t,n)}}function d(e){if(V.ie&&V.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=m("div");if(V.win&&V.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(A)[0];if(n){var i=n.childNodes;if(i)for(var a=i.length,o=0;o<a;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function h(e,t,n){var i,a=v(n);if(V.wk&&V.wk<312)return i;if(a)if(typeof e.id==S&&(e.id=n),V.ie&&V.win){var o="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?o+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(o+=" "+r+'="'+e[r]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+s+"</object>",G[G.length]=e.id,i=v(e.id)}else{var c=m(A);c.setAttribute("type",M);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?c.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&c.setAttribute(d,e[d]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&f(c,u,t[u]);a.parentNode.replaceChild(c,a),i=c}return i}function f(e,t,n){var i=m("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=v(e);t&&"OBJECT"==t.nodeName&&(V.ie&&V.win?(t.style.display="none",
function(){4==t.readyState?g(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function g(e){var t=v(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function v(e){var t=null;try{t=B.getElementById(e)}catch(n){}return t}function m(e){return B.createElement(e)}function y(e,t,n){e.attachEvent(t,n),q[q.length]=[e,t,n]}function b(e){var t=V.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function w(e,t,n,i){if(!V.ie||!V.mac){var a=B.getElementsByTagName("head")[0];if(a){var o=n&&"string"==typeof n?n:"screen";if(i&&(E=null,x=null),!E||x!=o){var r=m("style");r.setAttribute("type","text/css"),r.setAttribute("media",o),E=a.appendChild(r),V.ie&&V.win&&typeof B.styleSheets!=S&&B.styleSheets.length>0&&(E=B.styleSheets[B.styleSheets.length-1]),x=o}V.ie&&V.win?E&&typeof E.addRule==A&&E.addRule(e,t):E&&typeof B.createTextNode!=S&&E.appendChild(B.createTextNode(e+" {"+t+"}"))}}}function C(e,t){if(Y){var n=t?"visible":"hidden";H&&v(e)?v(e).style.visibility=n:w("#"+e,"visibility:"+n)}}function k(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=S?encodeURIComponent(e):e}var T,I,_,L,E,x,S="undefined",A="object",R="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",M="application/x-shockwave-flash",$="SWFObjectExprInst",D="onreadystatechange",N=window,B=document,U=navigator,O=!1,F=[a],j=[],G=[],q=[],H=!1,z=!1,Y=!0,V=function(){var e=typeof B.getElementById!=S&&typeof B.getElementsByTagName!=S&&typeof B.createElement!=S,t=U.userAgent.toLowerCase(),n=U.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),a=n?/mac/.test(n):/mac/.test(t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),r=!1,s=[0,0,0],l=null;if(typeof U.plugins!=S&&typeof U.plugins[R]==A)l=U.plugins[R].description,!l||typeof U.mimeTypes!=S&&U.mimeTypes[M]&&!U.mimeTypes[M].enabledPlugin||(O=!0,r=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=S)try{var c=new ActiveXObject(P);c&&(l=c.GetVariable("$version"),l&&(r=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(d){}return{w3:e,pv:s,wk:o,ie:r,win:i,mac:a}}();(function(){V.w3&&((typeof B.readyState!=S&&"complete"==B.readyState||typeof B.readyState==S&&(B.getElementsByTagName("body")[0]||B.body))&&t(),H||(typeof B.addEventListener!=S&&B.addEventListener("DOMContentLoaded",t,!1),V.ie&&V.win&&(B.attachEvent(D,function(){"complete"==B.readyState&&(B.detachEvent(D,arguments.callee),t())}),N==top&&!function(){if(!H){try{B.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}()),V.wk&&!function(){if(!H)return/loaded|complete/.test(B.readyState)?void t():void setTimeout(arguments.callee,0)}(),i(t)))})(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var t=q.length,n=0;n<t;n++)q[n][0].detachEvent(q[n][1],q[n][2]);for(var i=G.length,a=0;a<i;a++)p(G[a]);for(var o in V)V[o]=null;V=null;for(var r in e)e[r]=null;e=null})}();return{registerObject:function(e,t,n,i){if(V.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=n,a.callbackFn=i,j[j.length]=a,C(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(V.w3)return s(e)},embedSWF:function(e,t,i,a,o,r,s,d,u,f){var p={success:!1,id:t};V.w3&&!(V.wk&&V.wk<312)&&e&&t&&i&&a&&o?(C(t,!1),n(function(){i+="",a+="";var n={};if(u&&typeof u===A)for(var g in u)n[g]=u[g];n.data=e,n.width=i,n.height=a;var v={};if(d&&typeof d===A)for(var m in d)v[m]=d[m];if(s&&typeof s===A)for(var y in s)typeof v.flashvars!=S?v.flashvars+="&"+y+"="+s[y]:v.flashvars=y+"="+s[y];if(b(o)){var w=h(n,v,t);n.id==t&&C(t,!0),p.success=!0,p.ref=w}else{if(r&&l())return n.data=r,void c(n,v,t,f);C(t,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){Y=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,n){return V.w3?h(e,t,n):void 0},showExpressInstall:function(e,t,n,i){V.w3&&l()&&c(e,t,n,i)},removeSWF:function(e){V.w3&&p(e)},createCSS:function(e,t,n,i){V.w3&&w(e,t,n,i)},addDomLoadEvent:n,addLoadEvent:i,getQueryParamValue:function(e){var t=B.location.search||B.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return k(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=v($);e&&T&&(e.parentNode.replaceChild(T,e),I&&(C(I,!0),V.ie&&V.win&&(T.style.display="block")),_&&_(L)),z=!1}}}}(),t=function(e,t,n){this.flashID=e,this.swfURL=t,this.flashVars=n,this.isFlashReady=!1};return t.prototype.width="100%",t.prototype.height="100%",t.prototype.swfVersionStr="11.4",t.prototype.hide=function(){this.width="1",this.height="1"},t.prototype.attributes={id:this.flashID,name:this.flashID,align:"middle"},t.prototype.swfParams={quality:"high",bgcolor:"#ffffff",allowScriptAccess:"always",menu:"false"},t.prototype.embedSwf=function(){this.swfParams.wmode="opaque",e.embedSWF(this.swfURL,this.flashID,this.width,this.height,this.swfVersionStr,null,this.flashVars,this.swfParams,this.attributes)},t.prototype.embedGiftSwf=function(){var t={quality:"high",bgcolor:"#ffffff",allowScriptAccess:"always",menu:"false",wmode:"transparent"};e.embedSWF(this.swfURL,this.flashID,this.width,this.height,this.swfVersionStr,null,this.flashVars,t,this.attributes)},t.prototype.embedRollSwf=function(){var t={quality:"high",bgcolor:"#F8F6EE",allowScriptAccess:"always",menu:"false",wmode:"opaque"};e.embedSWF(this.swfURL,this.flashID,this.width,this.height,this.swfVersionStr,null,this.flashVars,t,this.attributes)},t.prototype.embedRandomSwf=function(){var t={quality:"high",allowScriptAccess:"always",menu:"false",wmode:"transparent"};e.embedSWF(this.swfURL,this.flashID,this.width,this.height,this.swfVersionStr,null,this.flashVars,t,this.attributes)},t.prototype.getFlashObj=function(e){return e||(e=this.flashID),navigator.appName.indexOf("Microsoft")!=-1?window["ie-"+e]:document[e]},t.prototype.getReadyStatus=function(){return this.isFlashReady},t.prototype.changeReadyStatus=function(){this.isFlashReady=!0},t}),define("flashHelperHandler",["pageContext","roomFlashContainer"],function(e,t){var n={target:null,bind:function(e){this.target=e},logicHandler:function(e){switch(t.hideTxtTips(),e){case 11:t.hideLivingIco();break;case 12:t.hideLivingIco(),t.showTxtTips("请调整视频后，在直播助手进行开播确认......");break;case 13:break;case 14:t.hideLivingIco();break;case 15:t.hideLivingIco(),t.showTxtTips("请用当前账号登录直播助手......");break;case 16:t.showLivingIco()}},errorHandler:function(e){switch(e){case-21:t.showErrorTips("找不到指定的摄像头设备。");break;case-22:t.showErrorTips("用户不同意摄像头和麦克风的权限申请。");break;case-23:t.showErrorTips("摄像头被占用。")}},log:function(e){console.log("flash test:"+e)},killCurSocket:function(){try{this.getFlashObj().stopConnect()}catch(e){console.log("killCurSocket error:"+e)}console.log("close current socket connection...")},getCurUserUID:function(){if(e.owner&&0!=e.owner)try{this.getFlashObj().setCurUserUID(e.owner)}catch(t){console.log("getCurUserUID error:"+t)}},getFlashObj:function(){return this.target.getFlashObj()}};return n}),define("hiido",["jquery"],function(e){var t=function(){var n=navigator.userAgent,i=(navigator.appVersion,n.indexOf("Android")>-1||n.indexOf("Linux")>-1),a=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),o=n.match(/.*YY([\/\(])?(ClientVersion:)?([0-9\.]+).*/),r=(window._hiidoDebug||!1,r||"");return window.yyinfo=o,{domain:"ylog.hiido.com",ipPrefix:"14.17.112.",ips:[232,233,234,235,236,237],hiido_params:{},setHiidoParams:function(){var e=this.getSysTerminal();this.hiido_params={act:"webevent",eventype:"1",sys:e,act_type:"0"}},getServerUrl:function(e){e=e||this.domain;var t=location.protocol,n="j.gif?";return t+"//"+e+"/"+n},randomIp:function(){var e=Math.random(),t=Math.round(e*(this.ips.length-1)),n=this.ips[t];return this.ipPrefix+n},getParam:function(e){var t=e,n=[];t.time=parseInt(1*new Date/1e3),t.uid=this.getCookie("uid")||this.getCookie("yyuid"),t.ui=this.getCookie("hiido_ui"),t.username=this.getCookie("username");for(h in t)t.hasOwnProperty(h)&&n.push(encodeURIComponent(h)+"="+(void 0===t[h]||null===t[h]?"":encodeURIComponent(t[h])));return n.join("&")},send:function(e,t,n){var i=n||0,a=new Image,o=this;a.onerror=function(){i<=1?o.send(e,t,++i):2==i&&o.send(t,t,++i)},a.src=e},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},getSysTerminal:function(){var e=window.fromH5||"web";return window.fromH5||!i&&!a||(e="h5"),i?2:a?0:"h5"==e?5:4},hiido_init_changci:function(e){this.hiido_params.bak1=e},hiido_init_type:function(e){this.hiido_params.bak2=e},hiido_stat:function(t,n,i){var a=this.hiido_params,o={act:a.act,eventid:this.current_eventid||a.eventid,eventype:a.eventype,class2:a.class2,sys:a.sys,bak1:n||r||a.bak1,bak2:i||a.bak2,act_type:t,uid:window._loginUid||e.cookie("yyuid")||""};this.appHiidoStat(o)},appHiidoStat:function(e){if(!e)return!1;var n=this.getServerUrl(),i=this.getParam(e),a=n+i,o=this.getServerUrl(t.randomIp())+i;this.send(a,o)},addDuowanJs:function(){var e=document.getElementsByTagName("head")[0]||document.documentElement,t=document.createElement("script");t.src="//hdjs.hiido.com/hiido_internal.js?nocdn=true",t.type="text/javascript",e.insertBefore(t,e.firstChild)},getBak1:function(){return""},statisticEvent:function(e,t,n,i,a,o,r,s,l,c,d,u,h){var f={act:"webevent",eventid:e,act_type:t,sys:this.getSysTerminal(),value:1,eventype:1,class1:o?o:"",class2:r?r:"",bak1:n?n:this.getBak1(),bak2:i?i:"",bak3:a?a:"",parm1:s+""?s:"",parm2:l?l:"",parm3:c?c:"",sid:d?d:"",hostid:u?u:"",source:h?h:""};try{this.appHiidoStat(f)}catch(p){}},init:function(){this.addDuowanJs(),this.setHiidoParams()}}}();return console.log("hiido"),t.init(),t}),define("roomStatistics",["jquery","entAppLive","hiido"],function(e,t,n){var i={pageId:"",eventid:"10008953",sid:null,hostid:null,actType:{enter:"1",contribute:"200",noble:"201",cherish:"202",buyNoble:"203",giftNum:"204",give:"205",pay:"206",guideWin:"207",loginGuide:"208",weekStar:"209",ALFree:"210",ALPaid:"211",animationGive:"212",attention:"17",attentionSuccess:"18",turntableClick:"300"},businessId:{yule:"4"},onReady:function(){t=t||require("entAppLive"),i.sid=t.pageInfo.sid||t.pageInfo.ssid||"",i.hostid=t.pageInfo.uid||"",i.sharefrom=(header.ref||300)+"_"+(header.cpuid||0)||"","_"===i.sharefrom&&(i.sharefrom=""),i.bindEvent()},bindEvent:function(){e("#wLiveplayerBangArea .w-liveplayer-tabArea-hd a:eq(0)").click(function(){e(this).hasClass("current")&&n.statisticEvent(i.eventid,i.actType.contribute,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}).hover(function(){e(this).hasClass("current")&&n.statisticEvent(i.eventid,i.actType.contribute,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e("#wLiveplayerBangArea .w-liveplayer-tabArea-hd a:eq(1)").click(function(){e(this).hasClass("current")&&n.statisticEvent(i.eventid,i.actType.noble,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}).hover(function(){e(this).hasClass("current")&&n.statisticEvent(i.eventid,i.actType.noble,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e(window).delegate(".ent-content #contribution-noble li a.follow","click",function(){n.statisticEvent(i.eventid,i.actType.attention,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e(window).delegate(".ent-content #contribution-noble #open-noble-btn","click",function(){n.statisticEvent(i.eventid,i.actType.buyNoble,i.pageId,null,"01",null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e("#wLiveplayerBottom  #gift-select-img-id").click(function(){e("#wLiveplayerBottom  #gift-select-list-id").hasClass("expand")||n.statisticEvent(i.eventid,i.actType.giftNum,i.pageId,null,"1",null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e("#wLiveplayerBottom  #gift-select-img-id .option-list li").click(function(){var t=(e(this).index()||0)+1,a=e(this).find("span").text();n.statisticEvent(i.eventid,i.actType.giftNum,i.pageId,null,"2",null,null,t,null,a,i.sid,i.hostid,i.sharefrom)}),e("#wLiveplayerBottom #gift-select-list-id #hit_animate .submit").click(function(){n.statisticEvent(i.eventid,i.actType.give,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e("#wLiveplayerBottom #gift-select-list-id #hit_animate .animation").click(function(){n.statisticEvent(i.eventid,i.actType.animationGive,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e("#week-star-id").click(function(){e("#room-week-star").hasClass("current")||n.statisticEvent(i.eventid,i.actType.weekStar,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)}),e("#turntable-id").click(function(){n.statisticEvent(10010205,i.actType.turntableClick,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)})},guideWinForRightBottom:function(){n.statisticEvent(i.eventid,i.actType.guideWin,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)},loginGuideWin:function(){n.statisticEvent(i.eventid,i.actType.loginGuide,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)},payClick:function(){n.statisticEvent(i.eventid,i.actType.pay,i.pageId,null,null,null,null,null,null,null,i.sid,i.hostid,i.sharefrom)},attentionSuccess:function(e){n.statisticEvent(i.eventid,i.actType.attentionSuccess,i.pageId,null,null,null,null,null,null,e,i.sid,i.hostid,i.sharefrom)}};return i}),define("roomAttention",["require","jquery","loginUtil"],function(e,t,n){function i(e){this.load=!1,this.attentionedMap={},this.attentionListener=null,t.extend(this,e)}i.prototype={attention:function(i,a){if(n=n||e("loginUtil"),!n.isLogin())return void n.showLoginOrRegister();var o=this;t.ajax({url:domain+"/ent/user/attention.action",data:{objectId:i,mt:n.getMt()},dataType:"json",autoAlert:!0,success:function(e){"0"==e?(a&&a(),o.attentionedMap[i]=!0,o.callAllAttentionListener(i)):"-99999"==e?(o.popMessage("登陆状态过期，请重新登录!"),n.logout()):"2"!=e&&"1"!=e||o.popMessage("服务器繁忙，关注失败，请重新关注。")}})},unAttention:function(i,a){if(n=n||e("loginUtil"),n.isLogin()){var o=this;t.ajax({url:domain+"/ent/user/unAttention.action",data:{objectId:i,mt:n.getMt()},dataType:"json",autoAlert:!0,success:function(e){return"-99999"==e?(o.popMessage("登陆状态过期，请重新登录!"),void n.logout()):(o.attentionedMap[i]=!1,void(a&&a()))}})}},loadAttentionedMap:function(t){n=n||e("loginUtil"),n.isLogin()&&(this.load||this.getAttentionList(t))},getAttentionList:function(i){if(n=n||e("loginUtil"),n.isLogin()){var a=this;t.ajax({url:domain+"/ent/user/getAttentionList.action?v="+new Date,data:{},dataType:"json",autoAlert:!0,success:function(e){if(0==e.result){a.load=!0;var n=e.data.list||null;!n||0>=n.length||(t.each(n,function(e,t){a.attentionedMap[t]=!0}),i&&i(e.data.list))}}})}},popMessage:function(e){new ShowDialog.POPUP({width:200,content:e,timeout:!0})},addAttentionListener:function(e){return t.isFunction(e)?(this.attentionListener||(this.attentionListener=[]),void this.attentionListener.push(e)):void console.log("attentionListener,param is wrong! "+e+" is not a function")},callAllAttentionListener:function(e){if(this.attentionListener)for(var t in this.attentionListener)this.attentionListener[t](e)},setUnLoad:function(){this.load=!1,this.attentionedMap={}}};var a=new i({});return a}),define("roomDedicate",["require","jquery","webyyConsts","artTemplate","loginUtil","entAppHandler","analogscroll","roomStatistics","roomAttention"],function(e,t,n,i,a,o,r,s,l){function c(e){this.rankContainer=t("#contributeList"),this.scrollarea=t(".billboard .w-contribution-scrollarea"),this.contributionListDiv=t("#contribution-list-div"),this.hasPrevPage=0,this.hasNextPage=1,this.pageIndex=0,this.pageSize=15,this.contributeMap={},this.rankList=[],this.total=0,this.hasResp=!0,t.extend(this,e),this.isDedicateDivInit=!1,this.hasDataFromFlash=!1,this.httpDedicateData=[],this.isHttpDataInDiv=!1,this.scrollObj=null,this.top10YYNumStr=null,this.yyNumToRankNumMap=null,this.bangCntGxbTab=null,this.singleRankContainer=null,this.httpSingleDedicateData=[],this.currentBangCntGxbCnt=void 0,this.singleRankList=[],this.isHttpSingleDataInDiv=!1,this.hasSingleDataFromFlash=!1,this.haveBenchang=!1,this.currentUl=t("#contributeList"),this.scrollPane=null,this.tpl=["{{if haveBenchang}}",'<div class="bangCntGxbTab" id="bangCntGxbTab">',"<ul>",'<li class="active"><a href="javascript:void(0);">本场贡献榜</a></li>','<li><a href="javascript:void(0);">7天贡献榜</a></li>',"</ul>","</div>","{{/if}}",'<div class="bangCntGxbCon">','<div class="module-box billboard" id="contribution-noble" style="height:inherit;">','<div class="contribution-list hover" id="contribution-list-div">','<div id="contributeCon" style="overflow: hidden;position:relative;top: 2px;">',"{{if haveBenchang}}",'<ul id="singleContributeList" style="overflow: hidden; ">{{#singleListHtml}}</ul>','<ul id="contributeList" style="overflow: hidden; display: none;">{{#listHtml}}</ul>',"{{else}}",'<ul id="contributeList" style="overflow: hidden;">{{#listHtml}}</ul>',"{{/if}}","</div>",'<div class="w-contribution-scrollarea w-liveplayer-scrollarea" style="position:absolute;top:0px;height: 100%;width: 12px;right:0;display: none;">','<a href="javascript:void(0);" class="w-contribution-scrollbar w-live-scrollbar w-liveplayer-scrollbar" style="height: 100%;display:block;position: absolute;"></a>',"</div>",'<div class="shadow-mask"></div>',"</div>","</div>"].join(""),this.itemTpl=["<li>",'<div class="info">','<div class="fortune">','<i class="red-diamond"></i>',"{{consume}}","</div>","{{if combineFlag}}",'<div class="combine">','<i class="red-diamond"></i>{{consume}}',"</div>","{{/if}}","</div>",'<div class="user">','<i class="order order-{{rankNum}}">{{rankNum}}</i>','<span class="nick ellipsis">',"{{if userType == 2}}",'<i class="noble noble-{{userLevel}}"></i>',"{{/if}}",'<a href="//{{domain}}/u/{{yynum}}" target="_blank" title="{{nick}}">{{nick}}</a>',"</span>","{{if isUpdate}}",'<i class="arrow"><span class="top"></span><span class="bot"></span></i>',"{{/if}}","</div>","</li>"].join("")}var d;return c.prototype={init:function(){d.bindEvent(),o=o||e("entAppHandler"),a.addLoginCallbacks(d.loginCallback4Dedicate),a.addLogoutCallbacks(d.logoutCallback4Dedicate),d.getDataFromHttp()},addEntListeners:function(){o.addEventListener(n.Events.CONTRIBUTE.READY,this.ready),o.addEventListener(n.Events.CONTRIBUTE.RECEIVE_CONTRIBUTE,this.receiveContribute),o.addEventListener(n.Events.CONTRIBUTE.PREV_RESULT,this.prevResult),o.addEventListener(n.Events.CONTRIBUTE.NEXT_RESULT,this.nextResult),o.addEventListener(n.Events.RECEIVE_SINGLE_CONTRIBUTE.SINGLE_CONTRIBUTION,this.receiveSingleContribute)},logoutCallback4Dedicate:function(){l.setUnLoad()},loginCallback4Dedicate:function(){},scrollEnd:function(){if(0>=d.rankList.length)return void d.nextPage();if(d.isHttpDataInDiv&&(d.rankContainer.empty(),d.pageIndex=0),d.pageIndex<d.rankList.length){var e=d.rankList.slice(d.pageIndex,d.pageIndex+d.pageSize),t=d.renderer(e);d.pageIndex+=e.length,d.rankContainer.append(t),d.bindEventAfterRender(),d.scrollObjResize()}else d.rankList.length<d.total&&d.nextPage()},scrollObjResize:function(){if(d.scrollObj){var e=d.currentBangCntGxbCnt;if(e){var n=parseInt(e.find("li:eq(0)").css("height")),i=n*e.find("li").length,a=d.bangCntGxbTab.height()||0,o=10*n,r=3*n;(0===i||i>o)&&(i=o),i<r&&(i=r),d.scrollarea.css("height",i+a+"px"),d.scrollObj.resize(),d.scrollPane.css("height",i+"px"),t("#bangCntGxb").css({height:i+a+"px"});var s=parseInt(t("#contributeCon .w-contribution-scrollarea").css("height")),l=parseInt(t("#contributeCon .w-contribution-scrollbar").css("height")),c=Math.abs(s-l)<5,u=d.pageIndex>=d.total;c&&(d.isHttpDataInDiv||u)?t("#contributeCon .w-contribution-scrollarea").hide():t("#contributeCon .w-contribution-scrollarea").show()}}},bindEvent:function(){t(window).on("resize",function(){try{setTimeout(function(){d.scrollObjResize()},250)}catch(e){console.log(e)}})},bindEventAfterRender:function(){function e(){function e(e){var n=t(e).index();t(e).addClass("active").siblings().removeClass("active"),i.eq(n).show().siblings().hide(),d.currentBangCntGxbCnt=t("#"+t(i.eq(n)).attr("id")),d.currentUl=t("#"+t(i.eq(n)).attr("id")),d.scrollObjResize(),d.scrollObj.scrollTo(0,null,!0)}var n=t(".bangCntGxbTab li"),i=t(".bangCntGxbCon ul");n.mouseover(function(){e(this)})}t("#contributeList li a.follow").unbind("click").click(function(){var e=t(this),n=e.attr("objectNum")||"0";l.attention(n,function(){e.parent().parent().append('<div class="button"><span>已关注</span></div>'),e.parent().remove(),s&&(s.attentionSuccess("2"),window.RoomStatistics&&window.RoomStatistics.attentionSuccess("2"))})}),t("#contribution-noble").unbind("mouseover").mouseover(function(){d.contributionListDiv.addClass("hover"),d.scrollarea.show(),d.scrollObjResize()}).unbind("mouseleave").mouseleave(function(){d.scrollarea.hide(),d.contributionListDiv.removeClass("hover")}),e()},ready:function(){},receiveSingleContribute:function(e){var n=1===e.isAttention;if(!n){if(e.dataArray.length)return 0;n=!1,t(".bangCntGxbTab").hide(),t("#contributeList").show(),d.reRrenderRank(!1),d.scrollObj.resize()}return d.hasSingleDataFromFlash=!0,d.singleRankList=e.dataArray,n!=d.haveBenchang?(d.haveBenchang=n,void d.initRender()):void(t("#wLiveplayerBangArea .w-liveplayer-tabArea-hd a:eq(1)").hasClass("current")&&d.reRrenderSingleRank())},receiveContribute:function(e){var n=parseInt(e.minType||2);2==n&&(d.hasResp=!0);var i=e.data;if(!i||0>=i.length)return 0;var a=d.hasDataFromFlash;d.hasDataFromFlash=!0,d.total=e.total||i.length;for(var o=0;o<i.length;o++){var r=i[o];d.contributeMap[r.rankNum]=r}d.yyNumToRankNumMap||d.setYyNumToRankNumMap(d.contributeMap),d.top10YYNumStr||d.setTop10YYNumStr(d.contributeMap);var s=d.top10ChangeFlag(d.contributeMap);if(t("#wLiveplayerBangArea .w-liveplayer-tabArea-hd a:eq(1)").hasClass("current")){var l=a&&2==n;d.reRrenderRank(l)}s&&d.setYyNumToRankNumMap(d.contributeMap)},prevResult:function(e){d.hasPrevPage=e.result||0},nextResult:function(e){d.hasNextPage=e.result||0},prePage:function(){d.hasResp?(d.hasResp=!1,o.call(n.Events.CONTRIBUTE.PREV_PAGE)):console.log("上次请求还没有响应，这次不发起请求！")},nextPage:function(){d.hasResp?(d.hasResp=!1,o.call(n.Events.CONTRIBUTE.NEXT_PAGE)):console.log("上次请求还没有响应，这次不发起请求！")},sortRankList:function(e){return e?(e.sort(function(e,t){var n=parseInt(e.rankNum)||0,i=parseInt(t.rankNum)||0;return n<i?-1:n>i?1:0}),e):[]},initRender:function(e){d.cleanTop10Flag(),d.isDedicateDivInit=!0,d.rankList=[];for(var n in d.contributeMap)d.rankList.push(d.contributeMap[n]);d.sortRankList(d.rankList),d.pageIndex=0;var a=d.getDedicateList(!1),o=d.getSingleDedicateList(!1);d.pageIndex=a.length;var r=i.compile(d.tpl)({haveBenchang:d.haveBenchang,singleListHtml:d.renderer(o),listHtml:d.renderer(a)});t("#"+e).empty().html(r),d.postInitRender(),d.bindEventAfterRender(),d.reRrenderSingleRank()},postInitRender:function(){this.rankContainer=t("#contributeList"),this.scrollarea=t(".billboard .w-contribution-scrollarea"),this.contributionListDiv=t("#contribution-list-div"),this.scrollPane=t("#contributeCon"),this.bangCntGxbTab=t("#bangCntGxbTab"),this.currentBangCntGxbCnt=t("#contributeCon ul").eq(0),this.singleRankContainer=t("#singleContributeList");try{d.scrollObj=r(d.scrollPane,{scrollbar:d.scrollarea,onend:d.scrollEnd,distance:30,endDistance:0})}catch(e){}d.scrollObjResize(),d.cleanTop10Flag(),d.setTop10YYNumStr(d.contributeMap),d.setYyNumToRankNumMap(d.contributeMap)},reRrenderSingleRank:function(){var e=d.sortRankList(d.singleRankList),n=d.renderer(e);d.singleRankContainer.empty().html(n),d.currentUl=t("#singleContributeList"),d.scrollObjResize(),d.bindEventAfterRender()},reRrenderRank:function(e){l.loadAttentionedMap(function(){d.reRrenderRank(!1)}),d.rankList=[];for(var t in d.contributeMap)d.rankList.push(d.contributeMap[t]);d.sortRankList(d.rankList);var n=d.getDedicateList(e),i=d.renderer(n),a=d.pageIndex;d.pageIndex=n.length,d.rankContainer.empty().html(i),d.scrollObjResize(),e&&d.scrollObj&&d.scrollObj.scrollTo(34*a),d.bindEventAfterRender()},getSingleDedicateList:function(){return d.hasSingleDataFromFlash?d.singleRankList:(d.isHttpSingleDataInDiv=!0,d.httpSingleDedicateData)},getDedicateList:function(e){if(d.hasDataFromFlash){var t=0;return e?t=d.pageIndex+d.pageSize:(d.pageIndex=0,t=d.pageSize),d.isHttpDataInDiv=!1,d.rankList.slice(0,t)}return console.log("use http dedicate data!"),d.isHttpDataInDiv=!0,d.httpDedicateData},renderer:function(e){var n="";return e?(t.each(e,function(e,t){var o={domain:window.location.hostname,userType:t.userType||3,consume:t.consume||0,yynum:t.yyNum||"",rankNum:t.rankNum,userLevel:t.userLevel||0,nick:decodeURIComponent(t.nick||""),isUpdate:d.yyNumToRankNumMap&&t.rankNum<=10&&t.rankNum<(d.yyNumToRankNumMap[t.yyNum]||0),combineFlag:window.combineFlag};a.userContext&&o.yyNum==a.userContext.yyNum&&a.userContext.nobleLevel&&(o.userLevel=a.userContext.nobleLevel),n+=i.compile(d.itemTpl)(o)}),n):n},getDataFromHttp:function(){var e=window.pageInfo,n=void 0===e.sid?0:e.sid,i=void 0===e.ssid?0:e.ssid,a=!1,o=!1,r=function(){a&&o&&(0<t("#bangCntGxb").length&&(!d.isDedicateDivInit||d.isDedicateDivInit&&!d.hasDataFromFlash)?(console.log("try to use http dedicate data"),d.initRender("bangCntGxb")):console.log("no need to use http dedicate data"))};t.ajax({url:"/ent/room/queryDedicate.action",data:{topCid:n,subCid:i,offset:0,limit:4},dataType:"json",success:function(e){return o=!0,e&&"0"==e.result&&e.data?(d.httpDedicateData=e.data.dedicatList,void r()):r()}}),t.ajax({url:"/ent/room/queryCurDedicate.action",data:{topCid:n,subCid:i,offset:0,limit:4},dataType:"json",success:function(e){return a=!0,e&&"0"==e.result&&e.data?(d.haveBenchang=1===e.data.isBegan,d.httpSingleDedicateData=e.data.dedicatList,void r()):r()}})},adapt:function(){},setTop10YYNumStr:function(e){var t=[];for(var n in e)parseInt(n)>10||t.push(e[n]);d.sortRankList(t);for(var i="",a=0;a<t.length;a++)i+=t[a].yyNum;d.top10YYNumStr=i},top10ChangeFlag:function(e){if(!t("#wLiveplayerBangArea .w-liveplayer-tabArea-hd a:eq(0)").hasClass("current")&&d.hasTop10Flag())return!1;var n=[];for(var i in e)parseInt(i)>10||n.push(e[i]);d.sortRankList(n);for(var a="",o=0;o<n.length;o++)a+=n[o].yyNum;return""!==a&&a===d.top10YYNumStr?(d.cleanTop10Flag(),!1):(t("#bangTabGxb").addClass("warning"),d.top10YYNumStr=a,!0)},setYyNumToRankNumMap:function(e){d.yyNumToRankNumMap={};for(var t in e)d.yyNumToRankNumMap[e[t].yyNum]=e[t].rankNum},hasTop10Flag:function(){return t("#bangTabGxb").hasClass("warning")},cleanTop10Flag:function(){t("#bangTabGxb").removeClass("warning")}},d=new c({}),d=new c({})}),define("html5Test",[],function(){function e(e){this.element=e,this.length=0,this.makeArray()}var t={transition:!1,transform:!1,transform3d:!1,borderRadius:!1,rgba:!1,animation:!1,boxShadow:!1,flex:!1},n="",i="",a=document.documentElement;if(e.prototype={constructor:e,add:function(){if(arguments.length){for(var e=" "+this.element.className+" ",t=0,n=arguments.length,i="";t<n;t++)i=" "+arguments[t]+" ",e.indexOf(i)<0&&(e+=i);this.element.className=e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}},remove:function(){if(arguments.length){for(var e=" "+this.element.className+" ",t=0,n=arguments.length;t<n;t++)e=e.replace(" "+arguments[t]+" "," ");this.element.className=e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}},contains:function(e){var t=this.element.className;return t&&(" "+t+" ").indexOf(" "+e+" ")>-1},toggle:function(e){return this.contains(e)?(this.remove(e),!1):(this.add(e),!0)},item:function(e){return this[e]},makeArray:function(){for(var e=this.element.className.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").split(" "),t=0,n=e.length;t<n;t++)Array.prototype.push.call(this,e[t])}},"classList"in a||"undefined"==typeof HTMLElement||!Object.defineProperty||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){return new e(this)}}),window.requestAnimationFrame||(window[n+"RequestAnimationFrame"]?(window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]):(window.requestAnimationFrame=function(e){window.setTimeout(e,1e3/60)},window.cancelAnimationFrame=window.clearTimeout)),window.addEventListener){var o=document.createElement("div"),r=window.getComputedStyle(a);try{n=[].slice.call(r).join("").match(/-(webkit|ms|moz|o)-/i)[1]}catch(s){console.log("no css prefix info",s)}var l="width:1px; height:1px; position: absolute;-"+n+"-transition: all .1s linear; transition: all .1s linear;-"+n+"-transform: translate3d(0,0,0); transform: translate3d(0,0,0);display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;background:rgba(0,0,0,.5);";r=o.style,"string"!=typeof r.transition&&"string"!=typeof r[n+"Transition"]||(t.transition=!0),"string"!=typeof r.transform&&"string"!=typeof r[n+"Transform"]||(t.transform=!0),"string"!=typeof r.animation&&"string"!=typeof r[n+"Animation"]||(t.animation=!0),"string"!=typeof r.borderRadius&&"string"!=typeof r[n+"BorderRadius"]||(t.borderRadius=!0),"string"!=typeof r.boxShadow&&"string"!=typeof r[n+"BoxShadow"]||(t.boxShadow=!0),o.style.cssText=l,r.backgroundColor&&(t.rgba=!0),r.display&&(t.flex=!0),(r.transform||r[n+"Transform"])&&(t.transform3d=!0),r=null,o=null}else window.attachEvent&&(n="ms");if("classList"in a)for(i in t)!t[i]&&a.classList.add("no-"+i.replace(/([A-Z])/g,"-$1").toLowerCase());else{var c=new e(a);for(i in t)!t[i]&&c.add("no-"+i.replace(/([A-Z])/g,"-$1").toLowerCase())}var d={cssPrefix:n,cssProperties:t};return d}),define("roomRegistGuide",["require","jquery","loginUtil","entAppLive","html5Test","roomStatistics"],function(e,t,n,i,a,o){var r={showLowerRightCornerTime:3e4,registBox:t("#regist-guide-box-id"),roomRightSide:t(".w-liveplayer .w-liveplayer-side"),init:function(){var a=r;r.suitSize(),window.header.onresize(function(){r.suitSize()}),i=i||e("entAppLive"),t("#regist-guide-box-id").bind("click",function(e){e=e||window.event;var t=e.target||e.srcElement;if("A"==t.nodeName)return a.hideRegistGuideBox(),void e.stopPropagation();var i=n.isLogin();i||(n.showLoginOrRegister(),a.hideRegistGuideBox())})},suitSize:function(){var e=navigator.userAgent.toLowerCase(),t=/msie 7.0/.test(e),n=r.roomRightSide.width(),i=0-n+1;t?r.registBox.css({width:n,right:0}):r.registBox.css({width:n,right:i})},hideRegistGuideBox:function(){var e=r;a.cssProperties.transition?e.registBox.removeClass("show"):e.registBox.animate({height:"0px"},500)},showRegistGuideBox:function(){var e=r,s=n.isLogin();if(!s&&i.pageInfo.anchorInfo){var l=i.pageInfo.anchorInfo.logo,c=i.pageInfo.anchorInfo.nick;c&&(c.length>10&&(c=c.substring(0,10)+"..."),t("#anchor-nick-span").html(c)),l&&(t("#regist-header-img1").attr("src",l),t("#regist-header-img2").attr("src",l)),r.suitSize(),a.cssProperties.transition?e.registBox.addClass("show"):e.registBox.animate({height:"226px"},500),o&&o.guideWinForRightBottom()}},timeoutShowBox:function(){var e=r;window.setTimeout(function(){e.showRegistGuideBox()},e.showLowerRightCornerTime)}};return r}),define("roomFlashContainer",["jquery","pageContext","SWFURLHandler","FlashEmbeder","flashHelperHandler","roomDedicate","roomRegistGuide"],function(e,t,n,i,a,o,r){function s(){var t=null==e.cookie("uc_states")||""==e.cookie("uc_states")?"&states=2":"&states="+e.cookie("uc_states"),n="&loginFrom=yy";return null==!e.cookie("newqq_info")||""==!e.cookie("newqq_info")?n="&loginFrom=qq":null!=!e.cookie("sina_info")&&""!=!e.cookie("sina_info")||(n="&loginFrom=sina"),t+n}var l={flashContainer:e("#flash-container"),noPlayingTimes:0,
from:"",loadAnchorFlash:function(){this.clearFlashContainer(),this.flashContainer.html('<div id="room-flash"></div><div id="flash-helper-flash"></div>'),this.showTxtTips("");var o=n.getFlashHelperSwfURL(),r=new i("flash-helper-flash",o,null);r.embedSwf(),a.bind(r),e(".download-kaibo").show();var l=n.getRoomSwfURLByUid(t.topSid,t.subSid),c=new i("room-flash",l,{islive:1,onlybase:!0,source:encodeURIComponent(sourceAdmin.getFullURL()+s())});c.hide(),c.embedSwf()},loadUserFlash:function(){console.log("loadUserFlash..."),this.clearFlashContainer(),this.flashContainer.html('<div id="room-flash"></div>'),t.isLiving||l.showRecomAnchorMask();var e=n.getRoomSwfURLByUid(t.topSid,t.subSid),a=new i("room-flash",e,{islive:0,appid:25112,myyTopsid:"true"==t.popularize?1:0,source:encodeURIComponent(sourceAdmin.getFullURL()+s())});a.embedSwf()},loadFlashFirstTime:function(){var e=n.getRoomSwfURLByUid(t.topSid,t.subSid);new i("room-flash",e,{islive:0,myyTopsid:"true"==t.popularize?1:0,source:encodeURIComponent(sourceAdmin.getFullURL()+s())})},showErrorTips:function(t){var n=e(".flash-error-tips");n.html(t),n.show()},hideErrorTips:function(){e(".flash-error-tips").hide()},showTxtTips:function(t){var n=e(".flash-txt-tips");n.html(t),n.show()},hideTxtTips:function(){e(".flash-txt-tips").hide()},showLoadingMask:function(){e("#video_loading_mask").show()},hideLoadingMask:function(){e("#video_loading_mask").hide()},showRecomAnchorMask:function(){},hideRecomAnchorMask:function(){e(".webyy .no-living").hide()},hideKaiboTips:function(){e(".download-kaibo").hide()},clearFlashContainer:function(){this.hideErrorTips(),this.hideTxtTips(),this.hideLoadingMask(),this.hideRecomAnchorMask(),this.hideKaiboTips(),this.flashContainer.html()},showLivingIco:function(){e("#live .live-status").show()},hideLivingIco:function(){e("#live .live-status").hide()},getRecommendAnchor:function(){e.ajax({url:"/live/anch/recommendAnchorsForVideo.action",type:"post",dataType:"json",data:{uid:window.uid},success:function(e){l.showRecommend(e.list)}})},showRecommend:function(t){for(var n="",i=0;i<t.length;i++){var a=t[i],o="";o=a.loadUrl?new String(a.loadUrl).indexOf("http:")>=0?a.loadUrl:"//static.m.yy.com/"+a.loadUrl:"//res.channelboard.yy.com/entlobby/images/public/default_215x162.gif",n+="<li>",n+='<div class="photo">',n+='<a target="_top" class="urlFilter" href="http://m.yy.com/room/'+a.shortId+'/" class="urlFilter">',n+='<img width="180" height="120" class="loadUrl" src="'+o+'">',n+='<div class="mask"></div>',n+='<span class="ico-play"></span>',n+="</a>",n+='<p class="nick">'+arrowFilter(a.nick)+"</p>",n+='<div class="live-ico"></div>',n+="</div>",n+='<div class="type">',a.columnName&&(n+='<span class="singer-type anchor-nav-3">'+a.columnName+"</span>"),n+="</div>",n+="</li>"}e("#noLivingRecomAnchorList").html(n)}};return window.videoStopCallback=function(){console.log("-----------------------------------videoStopCallback---------------------------------"),l.hideLivingIco(),"true"!=t.isOwner&&(l.hideLoadingMask(),l.showRecomAnchorMask()),o&&(t.living=0,t.isLiving=!1,o.clearLoadDayDedicateInterval())},window.videoPlayCallback=function(){console.log("-----------------------------------videoPlayCallback---------------------------------"),l.showLivingIco(),"true"!=t.isOwner&&(l.hideLoadingMask(),l.hideRecomAnchorMask(),r.hideGifLoading()),o&&(t.living=1,t.isLiving=!0,o.setLoadDayDedicateInterval(),o.queryDayDedicateOnLiving())},l}),function(e){"function"==typeof define&&define.amd?define("messagebox",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){e.uiwidget=e.uiwidget||{},e.uiwidget.Messagebox=function(t,n){e.extend(this,n),this.messagebox=e(t),this.init(),this.render()};var t=!0;e.uiwidget.Messagebox.prototype={OK_TEXT:"确 定",CANCEL_TEXT:"取 消",CLOSE_TEXT:"关 闭",ASK_TITLE:"操作提示",ALERT_TITLE:"操作提示",SUCCESS_TITLE:"操作提示",ERROR_TITLE:"操作提示",WIDTH:500,init:function(){var t=this;e(window).bind("resize",function(){t.reLayout()}),e(window).bind("scroll",function(){t.reLayout()})},render:function(){},renderWindow:function(){var t=e(['<div class="message_box" style="width:'+WIDTH+'px;"><div class="msg_box_title"><div class="msg_box_title_left"><div class="msg_box_title_right">','<div class="msg_box_title_midle"></div><span class="msg_box_close" title="关闭" ></span>',"</div></div></div>",'<div class="msg_box_content" style="width:'+(WIDTH-6)+'px;">','<div class="msg-window-ico-prompt"></div><div class="msg-window-msg-content" style="width:'+(WIDTH-146)+'px;"><table cellpadding="0" cellspacing="0"><tr><td></td></tr></table>','</div><div class="clearfix"></div>','<div class="msg-window-button" >',"</div> ","</div>",'<div class="msg_box_bottom"><div class="msg_box_bottom_left"><div class="msg_box_bottom_rigth"><div class="msg_box_bottom_middle"></div></div></div></div></div>'].join(""));return e(document.body).append(t),this.titleEl=t.find("div.msg_box_title_midle"),this.msgEl=t.find("div.msg_box_content td"),this.iconEl=t.find("div.msg_box_content>div")[0],this.buttonEl=t.find("div.msg-window-button"),t},renderMask:function(){var t=e('<div class="mask"><iframe frameborder="0" style="width:100%;height:100%;background-color:#000;filter: alpha(opacity=0);-moz-opacity: 0;opacity: 0;"></iframe></div>');return e(document.body).append(t),t},message:function(e){e.width?WIDTH=e.width:WIDTH=500,t="boolean"!=typeof e.IsAutoClose||e.IsAutoClose,this.show(),e.type?this[e.type](e):this.customCommand(e)},customCommand:function(n){n.title&&this.setTitle(n.title),this.setMsg(n.msg),n.iconCls&&this.setIconCls(n.iconCls),this.reSetWidth(WIDTH);var i=this.getWindow(),a=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,o=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;i.css("left",(e(window).width()-i.eq(0).width())/2+a),i.css("top",(e(window).height()-i.eq(0).height())/2+o),i.css("z-index",30024),n.buttons&&this.setButton(n.buttons);var r=this;this.windowEl.find(".msg_box_btn").each(function(i){e(this).bind("click",function(){n.fn&&n.fn({index:i},n.msg,r),t&&r.hide()}),e(this).find("li.middle-normal").hover(function(){e(this).prev().addClass("left-over"),e(this).addClass("middle-over"),e(this).next().addClass("right-over")},function(){e(this).prev().removeClass("left-over"),e(this).removeClass("middle-over"),e(this).next().removeClass("right-over")})}),this.windowEl.find("span.msg_box_close").unbind("click"),this.windowEl.find("span.msg_box_close").bind("click",function(){n.fn&&n.fn({index:-1},n.msg),r.hide()})},ask:function(e){this.setTitle(this.ASK_TITLE),this.setIconCls("msg-window-ico-prompt"),this.setButton([{text:this.OK_TEXT,iconCls:"ico-btn-order-ok"},{text:this.CANCEL_TEXT,iconCls:"ico-btn-order-close"}]),this.customCommand(e)},alert:function(e){this.setTitle(this.ALERT_TITLE),this.setIconCls("msg-window-ico-warning"),this.setButton([{text:this.OK_TEXT,iconCls:"ico-btn-order-ok"}]),this.customCommand(e)},success:function(e){this.setTitle(this.SUCCESS_TITLE),this.setIconCls("msg-window-ico-success"),this.setButton([{text:this.OK_TEXT,iconCls:"ico-btn-order-ok"}]),this.customCommand(e)},error:function(e){this.setTitle(this.ERROR_TITLE),this.setIconCls("msg-window-ico-error"),this.setButton([{text:this.OK_TEXT,iconCls:"ico-btn-order-ok"}]),this.customCommand(e)},pay:function(e){this.setTitle("操作提示"),this.setIconCls("msg-window-ico-pay"),this.setButton([{text:"同意",iconCls:"ico-btn-order-ok"},{text:"不同意",iconCls:"ico-btn-order-close"},{text:"同意不再提醒",iconCls:"msg-btn-long"}]),this.customCommand(e)},getWindow:function(){return this.windowEl||(this.windowEl=this.renderWindow())},getMask:function(){return this.maskEl||(this.maskEl=this.renderMask())},setTitle:function(e){this.titleEl.html(e)},setMsg:function(e){this.msgEl.html(e)},setIconCls:function(e){this.iconEl.className=e},reSetWidth:function(e){var t=this.getWindow();t.find("div.msg_box_content").css("width",e-6),t.css("width",e)},setButton:function(e){this.buttonEl.empty();for(var t=0;t<e.length;t++)e[t].iconCls?t>0?this.buttonEl.append(['&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" class="msg_box_btn ',e[t].iconCls,'" id="delete_ajax" value="',e[t].text,'">'].join("")):this.buttonEl.append(['<input type="button" class="msg_box_btn ',e[t].iconCls,'" id="delete_ajax" value="',e[t].text,'">'].join("")):this.buttonEl.append(['<ul><li class="left-normal"></li><li class="middle-normal">',e[t].text,'</li><li class="right-normal"></li></ul>'].join(""))},show:function(){var t=this.getWindow();t.css("width",WIDTH),t.find("div.msg_box_content").css("width",WIDTH-6),t.find("div.msg-window-msg-content").css("width",WIDTH-146),t.show(),this.getMask();var n=document.body.scrollHeight;document.body.scrollHeight<=document.body.clientHeight&&(n=document.body.clientHeight);var i=document.body.scrollWidth;document.body.scrollWidth<=document.body.clientWidth&&(i=document.body.clientWidth),e("div.mask").width(i).height(n).show()},hide:function(){this.getWindow().hide(),this.getMask().hide()},reLayout:function(){var t=this.getWindow(),n=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,i=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;t.css("left",(e(window).width()-t.eq(0).width())/2+n),t.css("top",(e(window).height()-t.eq(0).height())/2+i);var a=document.body.scrollHeight;document.body.scrollHeight<=document.body.clientHeight&&(a=document.body.clientHeight);var o=document.body.scrollWidth;document.body.scrollWidth<=document.body.clientWidth&&(o=document.body.clientWidth),e("div.mask").width(o).height(a)}},e.messagebox=function(t){return e.uiwidget.Messagebox.instance=e.uiwidget.Messagebox.instance||new e.uiwidget.Messagebox(document.body,{}),e.uiwidget.Messagebox.instance.message(t)}}),define("entAppHandler",["jquery","web2playerStudio","webyyConsts","entAppReady","roomFlashContainer","messagebox"],function(e,t,n,i,a,o){var r={appid:"60040",entKey:{toAs:"callEntApp",toJs:"entAppCallback"},cbMethods:{},init:function(){try{this.registerCallBack(this.entKey.toJs,"asEntAppHandlerCallback")}catch(e){console.warn("entAppHandler:init",e)}this.addEventListener("live_app_ready_cb",r.entAppReady),this.addEventListener("ENT_JSON_CALL_BACK",r.entAppCallback),this.addEventListener("channel_kick",r.kickoutChannel),this.addEventListener("logout",r.logoutChannel),this.addEventListener(n.Events.HEADER.REFRESH_USER_INFO_FLAG,function(){window.header.headerUserInfoRefresh=!0})},registerCallBack:function(e,n){try{t.ctrl.registerCallBack(e,n)}catch(i){console.warn("entAppHandler:registerCallBack",i)}},entCallback:function(e){if(e.param){var t=e.param.uri,n=e.param.data;if(r.cbMethods[t])try{r.cbMethods[t](n)}catch(i){"undefined"!=typeof console&&console.warn&&console.warn("entAppHandler:entCallback:"+t+":",i)}}},call:function(e,t){return this.sendToFlash(this.entKey.toAs,{uri:e,data:t})},sendToFlash:function(e,n){if(i.isReady())try{return t.ctrl.callAs(e,n)}catch(a){console.warn("entAppHandler:sendToFlash",a)}return!1},addEventListener:function(e,t){e&&"function"==typeof t&&(this.cbMethods[e]=t)},baseSend:function(t,n){return n=e.parseJSON(n),n.appid=this.appid,n=JSON.stringify(n),console.log("SAL UP:"+n),this.sendToFlash(this.entKey.toAs,{uri:t,data:n})},send:function(e){this.baseSend("sendEntJsonV2",e)},sendJson:function(e){this.baseSendJson("sendEntJsonV2",e)},baseSendJson:function(e,t){return t.appid=this.appid,t=JSON.stringify(t),console.log("SAL UP:"+t),r.sendToFlash(this.entKey.toAs,{uri:e,data:t})},kickoutChannel:function(){},logoutChannel:function(){}};return window.asEntAppHandlerCallback=function(e){r.entCallback(e)},window.EntAppHandler=r,r}),define("entAppLive",["require","web2playerStudio","entAppHandler","entAppReady"],function(e,t,n,i){var a={userlist:!0,share:!0,more:!0,endPage:!0,pageInfo:null,player:null,firstMic:null,iResearch_Monitor:0,monitorType:[],showMaskList:{},onVideoPlayCallbacks:[],onVideoPauseCallbacks:[],onVideoStopCallbacks:[],onMicListChangeCallbacks:[],onFollowUserCallbacks:[],onCancelFollowUserCallbacks:[],onZanCallbacks:[],currentMaskUser:"",web2player:null,onload:function(e,n){a.pageInfo=e,a.player=n,a.web2player=t,a.pageInfo.sid=a.pageInfo.sid||window.pageInfo.sid,a.pageInfo.ssid=a.pageInfo.ssid||window.pageInfo.ssid,console.log("entAppLive:onload:pageInfo,web2player,liveplayer",a.pageInfo,a.web2player,a.player),a.init()},init:function(){a.web2player.onStatusChange(a.onStatusChange),a.web2player.onEnterLiveRoom(a.onEnterLiveroom),a.web2player.onMicListChange(a.onMicListChange),a.web2player.onFollowUser(a.onFollowUser),a.web2player.onCancelFollowUser(a.onCancelFollowUser),a.web2player.onZan(a.onZan),a.web2player.onThirdMonitor(a.onThirdMonitor),a.onPopMaskShow(),a.addMicListChangeCallback(function(e){0==e.length?("function"==typeof p_activity_anchor_down_channel_callback&&p_activity_anchor_down_channel_callback(),a.firstMic=null):(null==a.firstMic?a.firstMic=e[0]:a.firstMic==e[0]||("function"==typeof p_activity_anchor_down_channel_callback&&p_activity_anchor_down_channel_callback(),a.firstMic=e[0]),"function"==typeof p_activity_anchor_up_channel_callback&&p_activity_anchor_up_channel_callback())});var t=a.web2player.getMicListSync();t&&t.length>0&&(a.firstMic=t[0]),n=n||e("entAppHandler"),i=i||e("entAppReady"),n.init(),i.init()},onThirdMonitor:function(e){if(null!=e){var t=e.monitorJsUrl;if(document.getElementById("third_monitor_id"))document.getElementById("third_monitor_id").src=t;else{var n=document.createElement("script");n.type="text/javascript",n.language="javascript",n.id="third_monitor_id",n.src=t,$("head")[0].appendChild(n)}if(a.monitorType=[],e.monitors)for(var i in e.monitors)null!=e.monitors[i]&&null!=e.monitors[i].monitorType&&a.monitorType.push(e.monitors[i].monitorType)}},onStatusChange:function(e){switch(e){case"play":a.onChange(a.onVideoPlayCallbacks);break;case"pause":a.onChange(a.onVideoPauseCallbacks);break;case"stop":a.onChange(a.onVideoStopCallbacks)}},onChange:function(e,t){var n=e.length;if(n>0)for(var i=0;i<n;i++)e[i](t)},addVideoPlayCallback:function(e){a.onVideoPlayCallbacks.push(e)},addVideoPlayCallback:function(e){a.onVideoPauseCallbacks.push(e)},addVideoPlayCallback:function(e){a.onVideoStopCallbacks.push(e)},onEnterLiveroom:function(e){},onMicListChange:function(e){a.onChange(a.onMicListChangeCallbacks,e)},addMicListChangeCallback:function(e){a.onMicListChangeCallbacks.push(e)},onFollowUser:function(){a.onChange(a.onFollowUserCallbacks)},addFollowUserCallback:function(e){a.onFollowUserCallbacks.push(e)},onCancelFollowUser:function(){a.onChange(a.onCancelFollowUserCallbacks)},addCancelFollowUserCallback:function(e){a.onCancelFollowUserCallbacks.push(e)},onZan:function(){a.onChange(a.onZanCallbacks)},addOnZanCallbacks:function(e){a.onZanCallbacks.push(e)},setSponsorsIcon:function(e){a.web2player.setSponsorsIcon(e)},resize:function(e,t){a.web2player.resize(e,t)},enableDanmu:function(){a.web2player.danmu.enable()},disableDanmu:function(){a.web2player.danmu.disable()},followUser:function(e){a.web2player.followUser(e)},cancelFollowUser:function(e){a.web2player.cancelFollowUser(e)},getUserCount:function(e){a.web2player.getUserCount(e)},getUserList:function(e,t){a.web2player.getUserList(e,t)},sendMessage:function(e){a.web2player.sendMessage(e)},zan:function(){a.web2player.zan()},getConfig:function(e){a.web2player.config.get(e)},setConfig:function(e,t){a.web2player.config.set(e,t)},setZanCount:function(e){a.web2player.setZanCount(e)},showMask:function(e){e&&(a.currentMaskUser=e),a.player&&a.player.popMask.show()},hideMask:function(){a.player&&a.player.popMask.hide()},onPopMaskShow:function(){a.player.popMask.onPopMaskShow(function(){a.clearMask()})},onPopMaskHide:function(){a.player.popMask.onPopMaskHide(function(){})},hasSponsor:function(){return!!a.pageInfo&&("undefined"!=typeof a.pageInfo.sponsors.url&&null!=a.pageInfo.title&&""!=a.pageInfo.title)},clearMask:function(){$(".useMask").removeClass("current")},onFullscreen:function(e,t){a.web2player.onFullscreen(e,t)}};return a}),define("roomNoble",["require","jquery","webyyConsts","loginUtil","entAppLive","entAppHandler","roomAttention","analogscroll","roomStatistics"],function(e,t,n,i,a,o,r,s,l){function c(e){this.vipListContainer=t("#vip-list"),this.nobleScrollarea=t("#vip-list-div .w-vipList-scrollarea"),this.vipListDiv=t("#vip-list-div"),this.roomNobleMap={},this.renderNobleList=[],this.total=0,this.pageIndex=0,this.pageSize=30,this.hasResp=!0,t.extend(this,e),this.isNobleDivInit=!1,this.hasDataFromFlash=!1,this.httpNobleData=[],this.isHttpDataInDiv=!1,this.myNobleTimer=null,this.scrollObj=null,this.timeoutId=0}function d(e,t,n,i,a,o){t||(t=2);var r="//m.yy.com/earn/noble/v2/noble-priv-tab-v3.html?agentId="+e+"&c="+t+"&source=1&partner=0&guard=0&userId="+i+"&topId="+a+"&subId="+o+"&joint=2&domain="+window.domain+"/";window.noblePop=new ShowDialog.POPUP({width:0,height:0,content:'<div id="nobleDiv" class="open-noble-div"><iframe id="nobleIframe" src="'+r+'" width="800px" height="580px" style="border:none;background: transparent;border-radius: 5px;"></iframe></div>',yourClass:"popup-noble"}),u()}function u(){t(".popup-noble .popup-box").css({width:"0px",height:"0px","margin-left":"-500px","margin-top":"-320px"})}var h;return c.prototype={init:function(){o=o||e("entAppHandler"),this.bindEvent(),i.addLoginCallbacks(h.loginCallback4Dedicate),i.addLogoutCallbacks(h.logoutCallback4Dedicate),i.addShowUserInfoCallbacks(h.renderMyNobleInfoCallBack),h.getDataFromHttp()},logoutCallback4Dedicate:function(){r.setUnLoad(),h.reRenderNoble();var e="";e+='开通贵族送红钻，续费更返110%！<a href="javascript:void(0);" class="btn" title="开通贵族" id="open-noble-btn">开通贵族</a>',t("#my-noble-div").removeClass("renew").empty().html(e),t(".ent-content #contribution-noble #open-noble-btn").unbind("click").click(function(){h.showNobleBox()})},loginCallback4Dedicate:function(){h.reRenderNoble()},addEntListeners:function(){o.addEventListener(n.Events.NOBLE.RECEVIVE_NOBLE_RANK_CB,this.respNoble),o.addEventListener(n.Events.NOBLE.NOTICE_NOBLE_UPDATE,this.myNobleInfoResponse),o.addEventListener("nobleLevelUpgrade",this.nobleLevelUpgrade),o.addEventListener("openNobleBC",this.openNobleBC)},scrollEnd:function(){if(0>=h.renderNobleList.length)return void h.getNextBatchNobleList();if(h.isHttpDataInDiv&&(h.vipListContainer.empty(),h.pageIndex=0),h.pageIndex<h.renderNobleList.length){var e=h.renderNobleList.slice(h.pageIndex,h.pageIndex+h.pageSize);h.pageIndex+=e.length;var t=h.renderer(e);h.vipListContainer.append(t),h.scrollObjResize(),h.bindEventAfterRender()}else h.renderNobleList.length<h.total&&h.getNextBatchNobleList()},scrollObjResize:function(){if(h.scrollObj){h.scrollObj.resize();var e=parseInt(h.vipListDiv.find(".head").css("height")),n=parseInt(h.vipListContainer.find("li:eq(0)").css("height")),i=n*h.vipListContainer.find("li").length,a=10*n-e,o=3*n-e;(0==i||i>a)&&(i=a),i<o&&(i=o);var r=i+e;h.vipListContainer.css({height:i+"px"}),h.vipListContainer.parent().parent().css({height:i+"px"}),t("#bangCntGbx").css({height:r+"px"}),h.nobleScrollarea.css({height:i+"px"})}},showNobleBox:function(e){if(e||(e=2),i.isLogin()){if(!a.pageInfo)return void new ShowDialog.POPUP({width:200,content:"获取主播信息失败！",timeout:!0});a.pageInfo.anchorInfo.yynum?window.roomNoble.openNoble(a.pageInfo.anchorInfo.yynum,e,300,i.userContext.uid,a.pageInfo.sid,a.pageInfo.ssid):new ShowDialog.POPUP({width:200,content:"首麦无人",timeout:!0})}else i.showLoginOrRegister()},bindEvent:function(){t(window).on("resize",function(){setTimeout(function(){try{h.scrollObjResize()}catch(e){console.log(e)}},250)})},bindEventAfterRender:function(){t(".ent-content #contribution-noble #vip-list a.follow").unbind("click").click(function(){var e=t(this),n=e.attr("objectNum")||"0";r.attention(n,function(){e.parent().parent().append('<div class="button"><span>已关注</span></div>'),e.parent().remove(),l&&l.attentionSuccess("2")})}),h.vipListDiv.unbind("mouseover").mouseover(function(){h.nobleScrollarea.show(),h.scrollObj&&h.scrollObj.resize()}).unbind("mouseleave").mouseleave(function(){h.nobleScrollarea.hide(),h.scrollObj&&h.scrollObj.resize()})},isNoble:function(e){return!!h.roomNobleMap[e]},getNobleLevel:function(e){return h.isNoble(e)?h.roomNobleMap[e].grade:0},getNextBatchNobleList:function(){h.hasResp?(h.hasResp=!1,o.call("call_noble_next_page")):console.log("上次请求还没有响应，这次不发起请求！")},respNoble:function(e){h.hasResp=!0;var n=parseInt(e.count)||0;h.total=n||h.renderNobleList.length;var i=e.nobleList||[],a=e.nobleLeave||[];(i&&i.length||a&&a.length)&&(h.hasDataFromFlash=!0,0<i.length&&t.each(i,function(e,t){t.icon=t.icon||"//s5.yy.com/guild/header/10001.jpg",h.roomNobleMap[t.uid]=t}),0<a.length&&t.each(a,function(e,t){delete h.roomNobleMap[t.uid]}),t("#wLiveplayerBangArea .w-liveplayer-tabArea-hd a:eq(0)").hasClass("current")&&h.reRenderNoble())},initRender:function(e){if(!h.isNobleDivInit){r.loadAttentionedMap(function(){h.reRenderNoble()});var n=[];for(var i in h.roomNobleMap)n.push(h.roomNobleMap[i]);h.sortNobleList(n),h.renderNobleList=n,h.pageIndex=0;var a=h.getNobleList();h.pageIndex+=a.length;var o=h.renderer(a),o='<div class="module-box billboard" id="contribution-noble" style="position:relative;height:inherit;"><div class="vip-list" id="vip-list-div" style="position:relative;height:100%;"><div class="head" id="my-noble-div" style="position:relative;z-index:1;display:none">开通贵族送红钻，续费更返110%！<a href="javascript:void(0);" class="btn" title="开通贵族" id="open-noble-btn">开通贵族</a></div><div class="body" style="position:relative;"><div id="vip-list-scroll" style="overflow: hidden;position:relative;top: 2px;height:100%;"><ul id="vip-list" style="position:relative;overflow: hidden;height:100%;">'+o+'</ul><div class="w-vipList-scrollarea w-liveplayer-scrollarea" style="position:absolute;top:0px;height: 100%;width: 12px;right:0;display: none;"><a href="javascript:void(0);" class="w-vipList-scrollbar w-live-scrollbar w-liveplayer-scrollbar" style="height: 100%;display:block;position: absolute;"></a></div></div></div><div class="tips" id="nobleUpgrage"><i class="icon noble-x50 noble-5"></i><div class="text"><span class="nick ellipsis" id="nobleNick">贡丸乀吾魄"『护狼团』</span><br><span class="ellipsis" id="nobleLevel">荣升男爵Lv20</span></div><div class="flash"></div></div></div></div>';t("#"+e).empty().html(o),h.postInitRender();var s=this;t(".ent-content #contribution-noble #open-noble-btn").unbind("click").click(function(){s.showNobleBox()}),h.bindEventAfterRender(),h.isNobleDivInit=!0}},requestMyNobleInfo:function(){o.call("requestMynobleInfo")},myNobleInfoResponse:function(e){if(console.log("w-noble:myNobleInfoResponse",e),i.userContext.nobleLevel=e.nobelLevel,i.userContext.nobleLevel>0){i.userContext.isNoble="true",i.userContext.honourLevel=e.honourLevel;var t={};if(t.nobleLevel=i.userContext.nobleLevel,t.honourLevel=i.userContext.honourLevel,t.isNoble=i.userContext.isNoble,e.toUnValidTime>0){var n=(new Date).getTime()+1e3*e.toUnValidTime;t.nobleExpDate=new Date(n)}else t.nobleState=2;console.log(t),h.renderMyNobleInfo(t)}},nobleLevelUpgrade:function(e){var t=e.levelUpgradeType;0!=t&&(e.isUngrade=!0,e.userName=e.extend.nick,h.showNobleTips(e))},openNobleBC:function(e){e.isUngrade=!1,e.nobelLevel=e.nobleLevel,h.showNobleTips(e)},showNobleTips:function(e){var n=h.getNobleTypeByLevel(parseInt(e.nobelLevel)),i="";i=e.isUngrade?"荣升"+n+"Lv"+e.honourLevel:"荣升"+n,clearTimeout(h.timeoutId),h.timeoutId=0,t("#nobleUpgrage").empty();var a='<i class="icon noble-x50 noble-'+e.nobelLevel+'"></i><div class="text"><span class="nick ellipsis" id="nobleNick">'+e.userName+'</span><br><span class="ellipsis" id="nobleLevel">'+i+'</span></div><div class="flash"></div>';t("#nobleUpgrage").html(a),t(".ent-content .vip-list .tips").animate({top:"36px"},200,null,function(){var e=t(this);t(this).addClass("active").children(".flash").css("visibility","visible").animate({left:"100%"},2e3,null,function(){t(this).css({left:"-89px",visibility:"hidden"}),h.timeoutId=window.setTimeout(function(){e.removeClass("active").css("top",""),console.log("IE  ..roomNoble.timeoutId"+h.timeoutId+"setTimeout")},5e3),console.log("IE  ..roomNoble.timeoutId"+h.timeoutId)})})},getNobleTypeByLevel:function(e){switch(e){case 7:return"勋爵";case 6:return"男爵";case 5:return"子爵";case 4:return"伯爵";case 3:return"侯爵";case 2:return"公爵";case 1:return"国王"}},renderMyNobleInfoCallBack:function(e){h.isNobleDivInit?h.renderMyNobleInfo(e):h.myNobleTimer=window.setInterval(function(){h.isNobleDivInit&&(h.renderMyNobleInfo(e),window.clearTimeout(h.myNobleTimer))},1e3)},renderMyNobleInfo:function(e){if("true"==e.isNoble){var n="LV"+e.honourLevel;if(e.nobleExpDate){var a=new Date(e.nobleExpDate),o=new Date;a<o&&(n="已过期")}else e.nobleState&&2==e.nobleState&&(n="已过期");var r="";r+='<i class="noble noble-'+e.nobleLevel+'"></i>',r+='<i class="icon cherish-level">'+n+"</i>",r+='<a class="nick ellipsis" href="//'+window.location.hostname+"/u/"+i.userContext.yyNum+'" target="_blank" title="'+i.userContext.userNick+'">'+i.userContext.userNick+"</a>",r+='<a href="javascript:void(0);" class="btn" title="续费贵族" id="open-noble-btn">续费贵族</a>',t("#my-noble-div").addClass("renew").empty().html(r),t(".ent-content #contribution-noble #open-noble-btn").unbind("click").click(function(){h.showNobleBox()})}t("#my-noble-div").show()},postInitRender:function(){h.vipListContainer=t("#vip-list"),h.nobleScrollarea=t("#vip-list-div .w-vipList-scrollarea"),h.vipListDiv=t("#vip-list-div"),this.vipListScrollPane=t("#vip-list-scroll");try{h.scrollObj=s(h.vipListContainer,{scrollbar:h.nobleScrollarea,onend:h.scrollEnd,distance:5,endDistance:40})}catch(e){}h.scrollObjResize()},getNobleList:function(){if(h.hasDataFromFlash){h.total=h.total||h.renderNobleList.length,h.total=h.total<h.renderNobleList.length?h.renderNobleList.length:h.total;var e=h.renderNobleList.slice(h.pageIndex,h.pageIndex+h.pageSize);return e}return console.log("use http noble data!"),h.isHttpDataInDiv=!0,h.total=h.total||h.httpNobleData.length,h.httpNobleData},reRenderNoble:function(){var e=[];for(var t in h.roomNobleMap)e.push(h.roomNobleMap[t]);h.sortNobleList(e),h.renderNobleList=e,h.pageIndex=0;var n=h.getNobleList();h.pageIndex+=n.length;var i=h.renderer(n);h.vipListContainer.empty().html(i),h.scrollObjResize(),h.bindEventAfterRender()},renderer:function(e){var n="";if(!e)return n;var i='<li><div class="info">%`attentionTab`%</div><div class="user ellipsis"><i class="noble noble-%`grade`%"></i><a class="nick" href="%`personSiteUrl`%" target="_blank" title="%`nick`%">%`nick`%</a></div></li>';return t.each(e,function(e,t){var a=t.nick,o=t.grade||0,s=t.yynum||"",l="//"+window.location.hostname+"/u/"+s,c='<div class="button"><span>已关注</span></div>';try{a=decodeURIComponent(a)}catch(d){console.warn("decodeURIComponent error",a)}r.attentionedMap[s]||(c='<div class="button follow-button-ctr"><a class="btn follow" objectNum="'+s+'">关注</a></div>'),window.combineFlag&&(c='<div class="button"><span></span></div>');var u=i.replace(/%`nick`%/gi,a).replace(/%`grade`%/gi,o).replace(/%`personSiteUrl`%/gi,l).replace(/%`attentionTab`%/gi,c);n+=u}),n},getDataFromHttp:function(){var e=void 0==pageInfo.sid?0:pageInfo.sid,n=void 0==pageInfo.ssid?0:pageInfo.ssid;t.ajax({url:domain+"/ent/room/queryNoble.action",data:{topCid:e,subCid:n,offset:0,limit:4},dataType:"json",success:function(e){if(e&&0==e.result&&e.data&&e.data.nobleList&&!(0>=e.data.nobleList.length)){var n=e.data.nobleList;h.httpNobleData=n,0<t("#bangCntGbx").length&&(!h.isNobleDivInit||h.isNobleDivInit&&!h.hasDataFromFlash)?(console.log("try to use http noble data"),h.initRender("bangCntGbx")):console.log("no need to use http noble data")}}})},sortNobleList:function(e){if(!e)return[];var t=0,n=!1;return i.isLogin()&&(t=i.getLoginUid(),n=!0),e.sort(function(e,i){if(n){if(e.uid==t)return-1;if(i.uid==t)return 1}var a=parseInt(e.hasSeat)||0,o=parseInt(i.hasSeat)||0,r=parseInt(e.grade)||9999999,s=parseInt(i.grade)||9999999,l=parseInt(e.productTotalValues)||0,c=parseInt(i.productTotalValues)||0,d=parseInt(e.curHonour)||0,u=parseInt(i.curHonour)||"0";return a>o?-1:a<o?1:r<s?-1:r>s?1:l>c?-1:l<c?1:d>u?-1:d<u?1:0}),e},getNobles:function(){return h.renderNobleList},getNoble:function(e){return h.roomNobleMap(e)},openNoble:function(e,t,n,i,a,o){d(e,t,n,i,a,o)},adapt:function(){}},window.closeNoble=function(){window.noblePop.removePop()},window.closeNobleDialog=function(){t("#nobleIframe").attr("src",""),t.uiwidget.popupHide({id:"nobleDiv"})},window.roomNoble=h=new c,window.RoomNoble=c,h}),define("chatrules",["util","web2playerStudio"],function(e,t){function n(){setTimeout(function(){user&&user.isLoginSync()&&t.getUserMoralQuality(function(e){a.setSendFlag(e.flag),a.setRpStatus(e.state),a.setUserId(e.uid),a.resetUserRpStatus(),document.activeElement&&"msgInput"==document.activeElement.id&&$("#msgInput").trigger("focus")})},2e3)}function i(e,t,n){var i=!0;return window.localStorage?(t&&localStorage.setItem(""+e,t),!t&&(i=localStorage.getItem(""+e))):(t&&$.cookie(""+e,t,n),!t&&(i=$.cookie(""+e))),i}var a={};return function(e){var t=0,n="由于你多次违反平台规范，被暂时禁止禁止公屏发言{$time}",a={},o=1,r="0",s=0;user&&user.isLoginSync()&&user.getUserInfo(function(e){a={1:'您的<a target="_blank" href="http://m.yy.com/zone/'+e.yynum+'/#singer/myRPVal">人品值</a>需要提升，请勿发送不良信息',2:'您的<a target="_blank" href="http://m.yy.com/zone/'+e.yynum+'/#singer/myRPVal">人品值</a>需要提升，请勿发送不良信息',3:'您的<a target="_blank" href="http://m.yy.com/zone/'+e.yynum+'/#singer/myRPVal">人品值</a>需要提升，请勿发送不良信息',4:'您的<a target="_blank" href="http://m.yy.com/zone/'+e.yynum+'/#singer/myRPVal">人品值</a>偏低，如持续降低将无法在公屏发言'}}),e.setRpStatus=function(e){return t=e,!0},e.setUserId=function(e){return r=e,!0},e.getUserId=function(){return r},e.setSendFlag=function(e){o=e},e.getToastInfoState=function(){return s},e.setToastInfoState=function(e){s=e},e.hasToast=function(){s=0},e.getTipObj=function(){return n},e.setTipObj=function(e){return n=e,!0},e.getTipText=function(){return a[t]},e.formatSeconds=function(e){if(""===e||"undefined"==typeof e)return"";var t=parseInt(e),n=0,i=0;t>=60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(i=parseInt(n/60),n=parseInt(n%60)));var a="";return t>0&&(a=""+parseInt(t)+"秒"),n>0&&(a=""+parseInt(n)+"分"+a),i>0&&(a=""+parseInt(i)+"小时"+a),a},e.resetUserRpStatus=function(){user.getUserInfo(function(n){if(n&&0!=n.uid){var a=(new Date).getMonth()+"";a!=i("chatrp_tips_month_"+n.uid)&&(localStorage&&localStorage.removeItem("chatrp_tips_"+n.uid),$.cookie&&$.cookie("chatrp_tips_"+n.uid,null),localStorage&&localStorage.removeItem("chatrp_tips_month_"+n.uid),$.cookie&&$.cookie("chatrp_tips_month_"+n.uid,null)),i("chatrp_tips_"+n.uid)!=t&&1!==o&&0!==t&&(i("chatrp_tips_month_"+n.uid,a),i("chatrp_tips_"+n.uid,t),e.setToastInfoState(1))}})}}(a),header.onLogStateChange(function(e){a.setToastInfoState(0),e&&n()}),t&&t.onReady(function(){n(),setInterval(function(){n()},3e5)}),a}),require(["util","web2playerStudio","artTemplate","analogscroll","thirdmonitor","roomNoble","chatrules"],function(e,t,n,i,a,o,r){var s=window.statistics,l=window.statisticEvent,c={phizMap:{"[:666]":"#12","[:nonono]":"#23","[:wow]":"#45","[:发发发]":"#60","[:好耶]":"#80","[:么么哒]":"#90","[:哈哈哈]":"#91","[:满分]":"#92","[:羞羞哒]":"#93"},phizObj:{init:!1},getPhizArr:function(e){var t=this.phizMap,n=[],i=e.match(/\[:\S+?\]/gi);null===i&&(i=[]);for(var a=0;a<i.length;a++)t.hasOwnProperty(i[a])&&n.push(i[a]);return n},getPhizNum:function(e){return this.getPhizArr(e).length}},d=function(e,t){this.target=e,$.extend(this,t)};d.prototype={context:null,sendButton:null,lenCounter:null,tipsPop:null,specialContent:/\ud83c[\udd00-\udfff]|\ud83d[\udc00-\ude4f]|[\u2600-\u27ff]|[\u20e3]|[\n]|[\r]|\{am|\/\{[a-zA-Z]{2}/g,maxInputSize:30,tipsTimer:null,nobleLevel:-1,sendPhizNum:0,canSendPhiz:!1,isNobleNotice:!1,isNobleOvertime:!1,isLoadUserPhiz:!1,phiz2textMap:{init:!1},init:function(){var e=this;e.initContentInput(),e.sendButton.on("click",function(){e.sendMessage()}).addClass("enable"),e.msgInputKeyDown(),
e.nobleReact(),e.tipsPopClose()},tipsPopClose:function(){var e=this;$(".tips-cbtn",e.tipsPop).bind("click",function(){this.tipsTimer&&clearTimeout(this.tipsTimer),e.tipsPop.hide()})},initContentInput:function(){if($.support.placeholder=!1,"placeholder"in document.createElement("input")&&($.support.placeholder=!0),!$.support.placeholder){var e=document.activeElement;$(":text, textarea").on("focus",function(){var e=$(this);""!=e.attr("placeholder")&&e.val()==e.attr("placeholder")&&e.val("").removeClass("placeholder")}).on("blur",function(){var e=$(this);""==e.attr("placeholder")||""!=e.val()&&e.val()!=e.attr("placeholder")||e.val(e.attr("placeholder")).addClass("placeholder")}),$(":text, textarea").blur(),$(e).focus()}var t=function(e,t){null==t&&(t=30);var e=$.trim(e),n=e.length;return n>=t&&(e=e.substring(0,t)),e};$("#msgInput").keydown(function(){var e=t($(this).val());$(this).val(e)})},filterContent:function(e){if(/yy:\/\//.test(e)||/YY:\/\//.test(e)||/yY:\/\//.test(e)||/Yy:\/\//.test(e))return"";if(/card_pkg.gif$/.test(e))return"";if(this.specialContent){var e=e.replace(this.specialContent,"");return e.replace(/�/g,"")}return e},filterNoblePhiz:function(e){var t=e,n=c.phizMap;if(e=e.replace(/#/gi,"$#$"),this.nobleLevel>=3){var i=c.getPhizArr(e);if(i.length){for(var a=0;a<i.length;a++){var o=i[a];if(n.hasOwnProperty(o)){var r=o.replace(/(\[)/gi,"\\[").replace(/(\])/gi,"\\]"),s=new RegExp(r,"ig");e=e.replace(s,n[o])}}return t=e}return e}return e},msgInputKeyDown:function(){var e=this;e.target.on("keydown",function(t){if(13==t.keyCode)return t.ctrlKey?(e.insertAtCursor("\n"),!0):(e.sendMessage(),!1)})},insertAtCursor:function(e){var t=this.target[0];if(document.selection)t.focus(),sel=document.selection.createRange(),sel.text=e,sel.select();else if(t.selectionStart||"0"==t.selectionStart){t.blur();var n=t.selectionStart,i=t.selectionEnd,a=t.scrollTop;t.value=t.value.substring(0,n)+e+t.value.substring(i,t.value.length),a>0&&(t.scrollTop=a),t.focus(),t.selectionStart=n+e.length,t.selectionEnd=n+e.length}else t.value+=e,t.focus()},sendMessage:function(){var e=this;if(e.context){if(this.tipsPop.hide(),!user.isLoginSync())return void user.showYYLoginBox();var n=$.trim(e.target.val());n.length&&n!==e.target.attr("placeholder")&&(n=e.filterNoblePhiz(n),pageInfo.anchorInfo&&pageInfo.userInfo&&(t.callAs("sendBullet",{name:pageInfo.userInfo.nick,uid:pageInfo.userInfo.uid,text:n}),e.target.val(""),s({eventid:10008953,act_type:20,sid:pageInfo.sid,hostid:pageInfo.anchorInfo.id,parm2:pageInfo.pid||"",bak1:header.ref+"_"+header.cpuid}),l.set({eventid:"20014323",act_type:"7"}),a.statSendMessage()))}},noticeTips:function(e){if(console.log("msg",e),e){var t=this.tipsPop;t.find("p.tips").html(e),t.show(),this.tipsTimer&&clearTimeout(this.tipsTimer),this.tipsTimer=setTimeout(function(){t.hide()},8e3)}},nobleReact:function(){var e=this,n=(this.sendPhizNum,this.canSendPhiz,$(".phiz")),i=$(".chat-noble-container"),a=$(".chat-fix-hover"),r=$(".chat-noble-container"),s=$(".chat-noble-notice"),l=$(".chat-noble-loding"),c={"#12":"[:666]","#23":"[:nonono]","#45":"[:wow]","#60":"[:发发发]","#80":"[:好耶]","#90":"[:么么哒]","#91":"[:哈哈哈]","#92":"[:满分]","#93":"[:羞羞哒]"};t.onNobleLevel(function(t){e.nobleLevel=t.honourLevel,e.isNobleOvertime=t.isOverTime}),e.generatePhiz(),n.mouseenter(function(){e.showNobleNotice(),i.addClass("show"),a.addClass("show"),e.isLoadUserPhiz||l.addClass("show"),e.isNobleNotice&&s.addClass("show"),user.isLoginSync()||(e.sendPhizNum=0)}),r.mouseleave(function(){i.removeClass("show"),a.removeClass("show"),l.removeClass("show"),e.isNobleNotice&&s.removeClass("show")}),$("body").on("click",".chat-noble-box a",function(){if(e.canSendPhiz){var t=($(this).find("img").attr("src"),$(this).attr("data-code")),n="";n=c[t],e.sendPhizNum++,e.insertAtCursor(n),$(".phiz").trigger("mouseleave")}}),$("#openNoble, #rePayNoble").on("click",function(){o.showNobleBox()}),$("#openLoginBox").on("click",function(){user.showYYLoginBox()})},showNobleNotice:function(){var e=$("#msgInput"),t=this.nobleLevel,n=$.trim(e.val()),i=c.getPhizNum(n);if($(".chat-noble-notice .login").removeClass("show"),$(".chat-noble-notice .open").removeClass("show"),$(".chat-noble-notice .repay").removeClass("show"),$(".chat-noble-notice .limit0").removeClass("show"),$(".chat-noble-notice .limit1").removeClass("show"),$(".chat-noble-notice .limit2").removeClass("show"),$(".chat-noble-notice .limit3").removeClass("show"),user.isLoginSync())if(0==t)$(".chat-noble-notice").addClass("show"),$(".chat-noble-notice .open").addClass("show"),this.canSendPhiz=!1,this.isNobleNotice=!0;else{if(this.isNobleOvertime)return $(".chat-noble-notice").addClass("show"),$(".chat-noble-notice .repay").addClass("show"),this.canSendPhiz=!1,void(this.isNobleNotice=!0);t<3&&t>0?($(".chat-noble-notice").addClass("show"),$(".chat-noble-notice .limit0").addClass("show"),this.canSendPhiz=!1,this.isNobleNotice=!0):3==t||4==t?i<1?(this.canSendPhiz=!0,this.isNobleNotice=!1):(this.canSendPhiz=!1,this.isNobleNotice=!0,$(".chat-noble-notice").addClass("show"),$(".chat-noble-notice .limit1").addClass("show")):t>=5&&t<=10?i<2?(this.canSendPhiz=!0,this.isNobleNotice=!1):(this.canSendPhiz=!1,this.isNobleNotice=!0,$(".chat-noble-notice").addClass("show"),$(".chat-noble-notice .limit2").addClass("show")):t>=11?i<3?(this.canSendPhiz=!0,this.isNobleNotice=!1):(this.canSendPhiz=!1,this.isNobleNotice=!0,$(".chat-noble-notice").addClass("show"),$(".chat-noble-notice .limit3").addClass("show")):(console&&(console.log("咦已经发送贵族表情: "+this.sendPhizNum),console.log("还能发贵族表情吗: "+this.canSendPhiz)),this.canSendPhiz=!1)}else $(".chat-noble-notice").addClass("show"),$(".chat-noble-notice .login").addClass("show"),this.canSendPhiz=!1,this.isNobleNotice=!0},generatePhiz:function(){var e=this,n=[],i={},a="";t.onPrivilegeFaceData(function(e){n=e.faceDataArray.dataArray;for(var t=0;t<n.length;t++){var a=n[t];i[a[0]]=a[1].url_gif_pc}c.phizObj=i,c.phizObj.init=!0}),t.onSetPrivilegeFaceInfo(function(t){var n=t.getFaceArray;if(n.length){a="";for(var i=0;i<n.length;i++){var o=n[i];c.phizObj.init&&c.phizObj.hasOwnProperty(o)&&(a+='<li><a href="javascript:void(0);" data-code="'+o+'"><img src="'+c.phizObj[o]+'"></a></li>')}}else if(a="",c.phizObj.init)for(var r in c.phizObj)"init"!=r&&(a+='<li><a href="javascript:void(0);" data-code="'+r+'"><img src="'+c.phizObj[r]+'"></a></li>');e.isLoadUserPhiz=!0;var s=$(".chat-noble-box ul");$(".chat-noble-loding").addClass("hide"),s.empty().append(a)})}},$.fn.chatInput=function(e){return new d(this,e)};var u=function(e,t){this.target=e,$.extend(this,t),this.init()};u.prototype={context:null,chatInput:null,chatInputConifg:null,chatList:null,chatScroll:null,scrollCfg:null,listSize:0,maxRow:100,msgQueue:[],readyFlag:!1,msgFreshRate:200,carEnterCount:0,init:function(){this.context&&(this.chatList=this.target.find(".chatroom-list"),this.chatInputConifg&&(this.chatInputConifg.cfg.context=this.context,this.chatInput=this.chatInputConifg.target.chatInput(this.chatInputConifg.cfg)),this.bindFocusEvent(),this.ready())},ready:function(e){var n=this;n.readyFlag=!0,n.scrollbarEvent(),n.chatInput&&n.chatInput.init(),setInterval(function(){n.showChatList()},n.msgFreshRate),t.onUserCarEnter(function(e){e&&"undefined"!=typeof e.carInfo&&"[object Array]"===Object.prototype.toString.call(e.carInfo)&&e.carInfo.length&&n.receiveMessage(e,"carEnter")}),t.onUserCarExit(function(e){e&&"undefined"!=typeof e.carCount&&(n.carEnterCount=e.carCount)}),t.onOpenNobleBC(function(e){e&&n.receiveMessage(e,"nobleOpen")}),t.onNobleLevelUpgrade(function(e){e&&n.receiveMessage(e,"nobleUpgrade")}),t.onTrueloveOpen(function(e){e&&(header.headerUserInfoRefresh=!0,$("#wLiveplayerUserInfo .w-liveplayer-uncherishbtn-cur").addClass("w-liveplayer-cherishbtn-cur").parent().parent().addClass("followed"))}),t.onPubBulletData(function(e){e&&"undefined"!=typeof e.data&&"[object Array]"===Object.prototype.toString.call(e.data)&&e.data.length&&n.receiveMessage(e.data)}),t.onFailSend(function(e,t,i,a,o){var s="";switch(parseInt(e,10)){case 1:s="您暂时不能发言";break;case 2:s="频道不存在";break;case 3:s="子频道不存在";break;case 4:s="用户发言子频道和实际所在子频道不一致";break;case 5:s="该频道暂时禁言了";break;case 6:s="该频道对你禁言";break;case 7:s="请登录后再发言";break;case 8:s=a==-1?"稍等，未到发言时间":"还需等待"+r.formatSeconds(a)+"才能开始发言";break;case 9:s=a==-1?"需要间隔一段时间才能再次发言":"还需等待"+r.formatSeconds(a)+"才能再次发言";break;case 10:s="用户需要绑定手机才能发言";break;case 11:s="说的太快了，休息下";break;case 12:s="受人品值限制或发言存在敏感词，发言失败";break;case 17:s="匿名发言被限制了";break;case 18:s="服务器忙，请稍后再试";break;case 19:s="发送内容过长";break;case 20:s=a==-1?"文本长度超过限制":"文本长度超过限制，最多不超过"+a+"个字";break;case 21:s="飞机票或者URL限制";break;case 22:s="非管理员禁止发送私聊";break;case 23:s='由于你多次发送不良信息，<a href="http://m.yy.com/zone/'+i+'/#singer/myRPVal" target="_blank">人品值过低</a>不能发言';break;case 24:s='由于你多次违反平台规范，<a href="http://m.yy.com/zone/'+i+'/#singer/myRPVal" target="_blank">人品值过低</a>不能发言';break;case 34:0==o?s='由于你多次发送不良信息，<a href="http://m.yy.com/zone/'+i+'/#singer/myRPVal" target="_blank">人品值过低</a>不能发言':1==o?s="由于你多次违反平台规范，被暂时禁止发言功能"+r.formatSeconds(a):2==o?s='单频道<a href="http://m.yy.com/zone/'+i+'/#singer/myRPVal" target="_blank">人品值</a>限制，该频道对你禁言':3==o?s='单频道月<a href="http://m.yy.com/zone/'+i+'/#singer/myRPVal" target="_blank">人品值</a>限制，该频道对你禁言':4==o&&(s='最近6个月平均<a href="http://m.yy.com/zone/'+i+'/#singer/myRPVal" target="_blank">人品值过低</a>，不能发言');break;case 210:s="您暂时不能发言";break;case 220:s="频道禁止发送飞机票";break;case 230:s="发送内容为空";break;case 240:s="存在敏感词语禁止发送";break;case 250:s="请登录后再试"}""!==t&&null!=t?("内容中含有违禁字"==t&&(t="受人品值限制或发言存在敏感词，发言失败"),n.chatInput.noticeTips(t)):n.chatInput.noticeTips(s)}),$("#wLiveplayerGongpin").on("mouseover",".carContent img",function(){$(this).attr("title","当前车辆（"+n.carEnterCount+"），开通身份，拥有座驾！")})},bindFocusEvent:function(){var e=this;$("#msgInput").bind("focus",function(t){user.isLoginSync()&&user.getUserInfo(function(t){if("0"!=r.getUserId()&&t.uid!=r.getUserId())window.location.reload();else{var n=r.getToastInfoState(),i=r.getTipText();n&&(e.chatInput.noticeTips(i),r.hasToast())}})})},scrollbarEvent:function(){var e=this;e.scrollTarget||(e.scrollTarget=e.target.find(".scroll-sidebar-cont"),e.scrollbar=e.target.find(".scroll-sidebar-area"),e.topAlphaBg=e.target.find(".more-bgcover"));var t=function(){e.scrollTarget.children().eq(0).height()>e.scrollTarget.height()?e.scrollbar.show():e.scrollbar.hide()};t(),e.chatScroll?(e.chatScroll.resize(),e.scrollEndFlag&&e.chatScroll.scrollTo(e.scrollTarget.children().eq(0).height(),function(){})):(e.chatScroll=i(e.scrollCfg.scrollCnt,{scrollbar:e.scrollCfg.scrollArea,endDistance:40,onscroll:function(t,n){t?(e.scrollEndFlag=!1,e.topAlphaBg.removeClass("hidden")):e.topAlphaBg.addClass("hidden"),e.scrollEndFlag=n>=0}}),header.onresize&&header.onresize(function(){t(),e.chatScroll.resize()}))},isMyMessage:function(e,t){pageInfo.userInfo?t&&t(pageInfo.userInfo.nick===e):t&&t(!1)},getNobleLevelIconName:function(e){e=parseInt(e,10);var t=["平民","国王","公爵","侯爵","伯爵","子爵","男爵","勋爵"];return t[e]},receiveMessage:function(e,t){var i=this;if(t&&"[object Object]"===Object.prototype.toString.call(e)){if("carEnter"===t&&"undefined"!=typeof e.carInfo){var a=e.carCount;e=e.carInfo}if("nobleOpen"===t||"nobleUpgrade"===t){var o=[];o[0]=e,e=o}}for(var r=0,s=e.length;r<s;r++){var l,c,d=e[r],u=e[r],h=e[r],f=null,p="珍爱团";if(null!=d.giftInfo&&(d.text=null),null!=d.text){var g=d.name,v=d.text,m="",y=[];d.param&&(d=d.param,g=d.nickName,v=decodeURIComponent(d.msg),m="panel-noble"),l=d.fromGrade,c=d.fromGuardian,v=i.chatInput.filterContent(v);var b=i.filterPhiz(v)}else if(null!=d.giftInfo){d=d.giftInfo;var g=d.fromName,w=d.num,C=d.add,k=i.chatInput.filterContent(d.minUrl).replace("http:",""),T=d.giftName,m="giftInfo"}else if("carEnter"===t&&null!=d.carInfo&&null!=d.ownerInfo){var g=d.ownerInfo.userName,I=d.carInfo.carImageUrl.replace("http:",""),_=d.carInfo.carName||"尊享座驾",m="carInfo";l=d.ownerInfo.nobleLevel,f=1!=d.ownerInfo.trueLoveGroupMedalType?d.ownerInfo.trueLoveFansLevel:"cba",p=d.ownerInfo.trueLoveGroupMedalName}else if("nobleOpen"===t){var g=d.userName,L=i.getNobleLevelIconName(d.nobleLevel),m="nobleOpenInfo";l=d.nobleLevel,f=1!=d.trueLoveGroupMedalType?d.trueLoveFansLevel:"cba",p=d.trueLoveGroupMedalName}else if("nobleUpgrade"===t){var g=d.extend.nick||"",E=d.honourLevel,L=i.getNobleLevelIconName(d.nobelLevel),m="nobleUpgradeInfo";l=d.nobelLevel,f=1!=d.trueLoveGroupMedalType?d.trueLoveFansLevel:"cba",p=d.trueLoveGroupMedalName}u.nobleInfo&&u.trueLoveInfo?(l=u.nobleInfo.nobleLevel,f=1!=u.trueLoveInfo.medalType?u.trueLoveInfo.fansLevel:"cba",p=u.trueLoveInfo.groupMedalName):null!==u.nobleInfo&&null===u.trueLoveInfo?l=u.nobleInfo.nobleLevel:null===u.nobleInfo&&null!==u.trueLoveInfo&&(f=1!=u.trueLoveInfo.medalType?u.trueLoveInfo.fansLevel:"cba",p=u.trueLoveInfo.groupMedalName),i.isMyMessage(g,function(e){if(e&&(g="我",m="panel-me","nobleOpen"!==t&&"nobleUpgrade"!==t||(header.headerUserInfoRefresh=!0)),f){if("cba"!==f){f=parseInt(f,10)||0,f<1&&(f=6),f>6&&(f=5);for(var o=["猛狮群","海鲨帮","辽骚团","飞虎队","深圳队","虎门营","御林军","天津队","青城派","青岛队","英雄会","吉林队","山西队","福建队","江苏队","浙江队","北控队","同曦队","八一队","广州队"],r=0,s=o.length;r<s;r++)if(p===o[r]){f="cba";break}}"cba"!==f?p=(p||"珍爱团").slice(0,3):"cba"===f&&(p=(p||"珍爱球队").slice(0,4))}if(null!=h.text){if(y.length>0||v.length>0)i.addChatPubMsgQueue(n("wLiveplayerGongpinTpl",{nickname:g,liClass:m,text0:b.comment[0]||"",text1:b.comment[1]||"",text2:b.comment[2]||"",text3:b.comment[3]||"",phiz0:b.phiz[0]||"",phiz1:b.phiz[1]||"",phiz2:b.phiz[2]||"",fromGrade:l,fromGuardian:c,trueLoveGrade:f,trueLoveGroupName:p}));else if(0==y.length&&0==v.length)return}else null!=h.giftInfo?i.addChatPubMsgQueue(n("wLiveplayerGiftTpl",{nickname:g,num:w,add:C,giftUrl:k,giftName:T,liClass:m,fromGrade:l,fromGuardian:c,trueLoveGrade:f,trueLoveGroupName:p})):null!=h.carInfo&&null!=h.ownerInfo?(i.addChatPubMsgQueue(n("wLiveplayerCarEnterTpl",{nickname:g,carUrl:I,carName:_,carCount:a,liClass:m,fromGrade:l,fromGuardian:c,trueLoveGrade:f,trueLoveGroupName:p})),i.carEnterCount=a):"nobleOpen"!==t&&"nobleUpgrade"!==t||i.addChatPubMsgQueue(n("wLiveplayerNobleOpenOrUpgradeTpl",{nickname:g,nobleLevel:E,nobleLevelName:L,liClass:m,fromGrade:l,fromGuardian:c,trueLoveGrade:f,trueLoveGroupName:p}))})}},addChatPubMsgQueue:function(e){this.msgQueue.push(e)},filterPhiz:function(e){var t=($.trim(e),{comment:[],phiz:[]}),n={"#12":"//static.m.yy.com/group16/M00/6D/EA/tz0M9VWt6c4AAAAAAAAVHhETV3E532.gif","#23":"//static.m.yy.com/group16/M00/6D/EA/tz0M9VWt6c8AAAAAAAAdu3zRmZY239.gif","#45":"//static.m.yy.com/group16/M00/6D/EA/tz0M9VWt6dAAAAAAAAASBwsO3mw711.gif","#60":"//static.m.yy.com/group16/M00/78/92/tz0M9VXC-oEAAAAAAAA0dhz3O64762.gif","#80":"//static.m.yy.com/group16/M00/6D/EA/tz0M9VWt6dIAAAAAAAAtYST3Prs117.gif","#90":"//static.m.yy.com/group16/M00/78/92/tz0M9VXC-oMAAAAAAAAwUUBKljg077.gif","#91":"//static.m.yy.com/group16/M00/B9/6F/tz0M9VaTdqYAAAAAAABhHWil6Vc791.gif","#92":"//static.m.yy.com/group16/M00/B9/6F/tz0M9VaTdqcAAAAAAABEvFNO9UA827.gif","#93":"//static.m.yy.com/group16/M00/B9/6F/tz0M9VaTdqkAAAAAAAA-OWop3XA349.gif"},i=e.match(/#\d{2}/gi);if(null===i)t.comment.push(e);else{for(var a=0;a<i.length;a++){var o=i[a];n.hasOwnProperty(o)&&t.phiz.push(n[o])}e=e.replace(/#\d{2}/gi,","),","===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),t.comment=e.split(",")}return t},showChatList:function(){var e=this;if(e.msgQueue.length){if(e.chatList.append(e.msgQueue.join("")),e.listSize+=e.msgQueue.length,e.msgQueue.length=0,e.listSize>e.maxRow){for(var t=e.chatList.find("li"),n=e.listSize-e.maxRow,i=document.createDocumentFragment(),a=0;a<n;a++)i.appendChild(t[a]);i=null,e.listSize=e.maxRow}e.scrollbarEvent()}}},$.fn.chatPub=function(e){return new u(this,e)}}),define("chatroom",function(){}),function(t,n){function i(e,t,i){return this.options=i,this.$target=n(t),this.$element=n(e),this.init(this.$element,this.$target),this}var a="active",o=i.prototype;o.init=function(){this.$element.attr("data-type",this.options.type),this.options.show&&this.show(),this.options.logo&&this.$element.find("img").attr("src",this.options.logo),this._bindEvent()},o.show=function(e){var t=this;0!=this.$target.length&&(this._fixPosition(),e?setTimeout(function(){t.$element.addClass(a)},e):t.$element.addClass(a))},o.hide=function(e){var t=this;e?setTimeout(function(){t.$element.removeClass(a),t.$element.removeAttr("data-type")},e):(this.$element.removeClass(a),t.$element.removeAttr("data-type"))},o._fixPosition=function(){var e=this;e.$target&&e.$target.hasClass("baoxiang")&&e.$target.closest(".buttons").hasClass("expand")?(e.old$target=e.$target,e.$target=e.$target.closest(".buttons")):e.old$target&&e.old$target.hasClass("baoxiang")&&(e.$target=e.old$target);var t=e.$target.offset();if(t){var n=0,i=0;switch(e.options.position){case"top":n=t.top-e.$element.outerHeight(),i=t.left;break;case"bottom":n=t.top+e.$target.outerHeight(),i=t.left;break;case"left":n=t.top,i=t.left-e.$element.outerWidth();break;case"right":n=t.top,i=t.left+e.$target.outerWidth()}if(e.options.fit)switch(e.options.position){case"left":case"right":var a=e.$target.outerHeight(),o=e.$element.outerHeight();n=n+a/2-o/2;break;case"top":case"bottom":var r=e.$target.outerWidth(),s=e.$element.outerWidth();i=i+r/2-s/2}else e.options.offset&&(i+=e.options.offset.left,n+=e.options.offset.top);this.$element.css({top:n,left:i})}},o._bindEvent=function(){var t=this;t._eventId=0,clearTimeout(t._eventId),n(window).bind("resize",function(){t._eventId=setTimeout(function(){t._fixPosition()},300)}),header.onresize(function(){t._eventId=setTimeout(function(){t._fixPosition()},300)}),t.$element.on("click",".tp-cbtn",function(){return t.hide(),t.options.onClose&&t.options.onClose.call(t,e),!1}),t.$element.on("click",".tp-btn",function(e){return t.options.onClick.call(t,e),t.hide(),!1})},"undefined"!=typeof define&&define.amd?define("taskTip",[],function(){return i}):window.taskTips=i}(void 0,$),define("dateCheck",["util"],function(e){var t=function(e,t){this.element=$(e),this.options=t,this.format=n.parseFormat(t.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=$(".dateCheck"),this.component=!!this.element.is(".date")&&this.element.find(".add-on"),this.minViewMode=0,this.viewMode=0,this.startViewMode=this.viewMode,this.weekStart=0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=t.onRender,this.onRenderText=t.onRenderText,this.fillDow(),this.fillMonths(),this.update()};t.prototype={constructor:t,update:function(){this.date=n.parseDate(this.options.startDate?this.options.startDate:new Date,this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow '+(3==e||6==e?"hightLight":"")+'">'+n.dates.daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find("thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+n.dates.monthsShort[t++]+"</span>";this.picker.find(".dateCheck-months td").append(e)},fill:function(){var e=new Date(this.viewDate),t=(e.getFullYear(),e.getMonth(),new Date),n=this.date,i=new Date(this.date);i.setDate(this.date.getDate()+28),i=i.valueOf();for(var a,o,r,s,l=function(){for(var e=["<tr>"],t=n.getDate(),i=n.getDay(),a=0,o=n.getDay();a<o;a++)e.push('<td class="day" data-day="'+(t-i+a)+'"> </td>');return e}(n),c="";n.valueOf()<i;){n.getDay()===this.weekStart&&l.push("<tr>"),a=this.onRender(n),r=n.getFullYear(),s=n.getMonth(),this.date.getFullYear()+""+this.date.getMonth()+this.date.getDate()==t.getFullYear()+""+t.getMonth()+t.getDate()&&(a+=" active");var d=this.onRenderText(n);o=d.text,c=d.cls?d.cls:"",reward=d.reward?" data-reward="+d.reward:"",l.push('<td class="day '+c+a+'" data-day='+n.getDate()+" "+reward+">"+(o?o:n.getDate())+"</td>"),n.getDay()===this.weekEnd&&l.push("</tr>"),n.setDate(n.getDate()+1)}this.picker.find(".dateCheck-days tbody").empty().append(l.join(""))}},$.fn.dateCheck=function(e,n){return this.each(function(){var i=$(this),a=i.data("dateCheck"),o="object"==typeof e&&e;a||i.data("dateCheck",a=new t(this,$.extend({},$.fn.dateCheck.defaults,o))),"string"==typeof e&&a[e](n)})},$.fn.dateCheck.defaults={onRender:function(e){return""}},$.fn.dateCheck.Constructor=t;var n={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["周日","周一","周二","周三","周四","周五","周六","周日"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,n.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},parseFormat:function(e){var t=e.match(/[.\/\-\s].*?/),n=e.split(/\W+/);if(!t||!n||0===n.length)throw new Error("Invalid date format.");return{separator:t,parts:n}},parseDate:function(e,t){var n,i=e.split(t.separator),e=new Date;if(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),i.length===t.parts.length){for(var a=e.getFullYear(),o=e.getDate(),r=e.getMonth(),s=0,l=t.parts.length;s<l;s++)switch(n=parseInt(i[s],10)||1,t.parts[s]){case"dd":case"d":o=n,e.setDate(n);break;case"mm":case"m":r=n-1,e.setMonth(n-1);break;case"yy":a=2e3+n,e.setFullYear(2e3+n);break;case"yyyy":a=n,e.setFullYear(n)}e=new Date(a,r,o,0,0,0)}return e},formatDate:function(e,t){var n={d:e.getDate(),m:e.getMonth()+1,yy:e.getFullYear().toString().substring(2),yyyy:e.getFullYear()};n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m;for(var e=[],i=0,a=t.parts.length;i<a;i++)e.push(n[t.parts[i]]);return e.join(t.separator)}};return t}),define("QRCode",[],function(){function e(e){this.mode=d.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var i=[],a=this.data.charCodeAt(t);a>65536?(i[0]=240|(1835008&a)>>>18,i[1]=128|(258048&a)>>>12,i[2]=128|(4032&a)>>>6,i[3]=128|63&a):a>2048?(i[0]=224|(61440&a)>>>12,i[1]=128|(4032&a)>>>6,i[2]=128|63&a):a>128?(i[0]=192|(1984&a)>>>6,i[1]=128|63&a):i[0]=a,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function i(e,t){this.totalCount=e,this.dataCount=t}function a(){this.buffer=[],this.length=0}function o(){return"undefined"!=typeof CanvasRenderingContext2D}function r(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var n=t.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(e=parseFloat(n[1]))}return e}function s(e,t){for(var n=1,i=l(e),a=0,o=v.length;a<=o;a++){var r=0;switch(t){case u.L:r=v[a][0];break;case u.M:r=v[a][1];break;case u.Q:r=v[a][2];break;case u.H:r=v[a][3]}if(i<=r)break;n++}if(n>v.length)throw new Error("Too long data");return n}function l(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}var c;e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[i][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4?this.modules[e+n][t+i]=!0:this.modules[e+n][t+i]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=f.getLostPoint(this);(0==n||e>i)&&(e=i,t=n)}return t},createMovieClip:function(e,t,n){var i=e.createEmptyMovieClip(t,n),a=1;this.make();for(var o=0;o<this.modules.length;o++)for(var r=o*a,s=0;s<this.modules[o].length;s++){var l=s*a,c=this.modules[o][s];c&&(i.beginFill(0,100),i.moveTo(l,r),i.lineTo(l+a,r),i.lineTo(l+a,r+a),i.lineTo(l,r+a),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=f.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var i=e[t],a=e[n];if(null==this.modules[i][a])for(var o=-2;o<=2;o++)for(var r=-2;r<=2;r++)o==-2||2==o||r==-2||2==r||0==o&&0==r?this.modules[i+o][a+r]=!0:this.modules[i+o][a+r]=!1}},setupTypeNumber:function(e){for(var t=f.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;n<18;n++){var i=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,i=f.getBCHTypeInfo(n),a=0;a<15;a++){var o=!e&&1==(i>>a&1);a<6?this.modules[a][8]=o:a<8?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o}for(var a=0;a<15;a++){var o=!e&&1==(i>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=o:a<9?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,i=this.moduleCount-1,a=7,o=0,r=this.moduleCount-1;r>0;r-=2)for(6==r&&r--;;){for(var s=0;s<2;s++)if(null==this.modules[i][r-s]){var l=!1;o<e.length&&(l=1==(e[o]>>>a&1));var c=f.getMask(t,i,r-s);c&&(l=!l),this.modules[i][r-s]=l,a--,a==-1&&(o++,a=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,o){for(var r=i.getRSBlocks(e,n),s=new a,l=0;l<o.length;l++){var c=o[l];s.put(c.mode,4),s.put(c.getLength(),f.getLengthInBits(c.mode,e)),c.write(s)}for(var d=0,l=0;l<r.length;l++)d+=r[l].dataCount;if(s.getLengthInBits()>8*d)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*d+")");for(s.getLengthInBits()+4<=8*d&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*d)break;if(s.put(t.PAD0,8),s.getLengthInBits()>=8*d)break;s.put(t.PAD1,8)}return t.createBytes(s,r)},t.createBytes=function(e,t){for(var i=0,a=0,o=0,r=new Array(t.length),s=new Array(t.length),l=0;l<t.length;l++){var c=t[l].dataCount,d=t[l].totalCount-c;a=Math.max(a,c),o=Math.max(o,d),r[l]=new Array(c);for(var u=0;u<r[l].length;u++)r[l][u]=255&e.buffer[u+i];i+=c;var h=f.getErrorCorrectPolynomial(d),p=new n(r[l],h.getLength()-1),g=p.mod(h);s[l]=new Array(h.getLength()-1);for(var u=0;u<s[l].length;u++){var v=u+g.getLength()-s[l].length;s[l][u]=v>=0?g.get(v):0}}for(var m=0,u=0;u<t.length;u++)m+=t[u].totalCount;for(var y=new Array(m),b=0,u=0;u<a;u++)for(var l=0;l<t.length;l++)u<r[l].length&&(y[b++]=r[l][u]);for(var u=0;u<o;u++)for(var l=0;l<t.length;l++)u<s[l].length&&(y[b++]=s[l][u]);return y};for(var d={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},u={L:1,M:0,Q:3,H:2},h={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;f.getBCHDigit(t)-f.getBCHDigit(f.G15)>=0;)t^=f.G15<<f.getBCHDigit(t)-f.getBCHDigit(f.G15);return(e<<10|t)^f.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;f.getBCHDigit(t)-f.getBCHDigit(f.G18)>=0;)t^=f.G18<<f.getBCHDigit(t)-f.getBCHDigit(f.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return f.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case h.PATTERN000:return(t+n)%2==0;case h.PATTERN001:return t%2==0;case h.PATTERN010:return n%3==0;case h.PATTERN011:return(t+n)%3==0;case h.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case h.PATTERN101:return t*n%2+t*n%3==0;case h.PATTERN110:return(t*n%2+t*n%3)%2==0;case h.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new n([1],0),i=0;i<e;i++)t=t.multiply(new n([1,p.gexp(i)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:return 8;case d.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,i=0;i<t;i++)for(var a=0;a<t;a++){for(var o=0,r=e.isDark(i,a),s=-1;s<=1;s++)if(!(i+s<0||t<=i+s))for(var l=-1;l<=1;l++)a+l<0||t<=a+l||0==s&&0==l||r==e.isDark(i+s,a+l)&&o++;o>5&&(n+=3+o-5)}for(var i=0;i<t-1;i++)for(var a=0;a<t-1;a++){var c=0;e.isDark(i,a)&&c++,e.isDark(i+1,a)&&c++,e.isDark(i,a+1)&&c++,e.isDark(i+1,a+1)&&c++,0!=c&&4!=c||(n+=3)}for(var i=0;i<t;i++)for(var a=0;a<t-6;a++)e.isDark(i,a)&&!e.isDark(i,a+1)&&e.isDark(i,a+2)&&e.isDark(i,a+3)&&e.isDark(i,a+4)&&!e.isDark(i,a+5)&&e.isDark(i,a+6)&&(n+=40);for(var a=0;a<t;a++)for(var i=0;i<t-6;i++)e.isDark(i,a)&&!e.isDark(i+1,a)&&e.isDark(i+2,a)&&e.isDark(i+3,a)&&e.isDark(i+4,a)&&!e.isDark(i+5,a)&&e.isDark(i+6,a)&&(n+=40);for(var d=0,a=0;a<t;a++)for(var i=0;i<t;i++)e.isDark(i,a)&&d++;var u=Math.abs(100*d/t/t-50)/5;return n+=10*u}},p={glog:function(e){if(e<1)throw new Error("glog("+e+")");return p.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return p.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},g=0;g<8;g++)p.EXP_TABLE[g]=1<<g;for(var g=8;g<256;g++)p.EXP_TABLE[g]=p.EXP_TABLE[g-4]^p.EXP_TABLE[g-5]^p.EXP_TABLE[g-6]^p.EXP_TABLE[g-8];for(var g=0;g<255;g++)p.LOG_TABLE[p.EXP_TABLE[g]]=g;n.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var a=0;a<e.getLength();a++)t[i+a]^=p.gexp(p.glog(this.get(i))+p.glog(e.get(a)));
return new n(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=p.glog(this.get(0))-p.glog(e.get(0)),i=new Array(this.getLength()),a=0;a<this.getLength();a++)i[a]=this.get(a);for(var a=0;a<e.getLength();a++)i[a]^=p.gexp(p.glog(e.get(a))+t);return new n(i,0).mod(e)}},i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(e,t){var n=i.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=n.length/3,o=[],r=0;r<a;r++)for(var s=n[3*r+0],l=n[3*r+1],c=n[3*r+2],d=0;d<s;d++)o.push(new i(l,c));return o},i.getRsBlockTable=function(e,t){switch(t){case u.L:return i.RS_BLOCK_TABLE[4*(e-1)+0];case u.M:return i.RS_BLOCK_TABLE[4*(e-1)+1];case u.Q:return i.RS_BLOCK_TABLE[4*(e-1)+2];case u.H:return i.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},a.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],m=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){function t(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t)t.hasOwnProperty(i)&&n.setAttribute(i,t[i]);return n}var n=this._htOption,i=this._el,a=e.getModuleCount();Math.floor(n.width/a),Math.floor(n.height/a);this.clear();var o=t("svg",{viewBox:"0 0 "+String(a)+" "+String(a),width:"100%",height:"100%",fill:n.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),i.appendChild(o),o.appendChild(t("rect",{fill:n.colorLight,width:"100%",height:"100%"})),o.appendChild(t("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var r=0;r<a;r++)for(var s=0;s<a;s++)if(e.isDark(r,s)){var l=t("use",{x:String(s),y:String(r)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(l)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),y="svg"===document.documentElement.tagName.toLowerCase(),b=y?m:o()?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function t(e,t){var n=this;if(n._fFail=t,n._fSuccess=e,null===n._bSupportDataURI){var i=document.createElement("img"),a=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},o=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return i.onabort=a,i.onerror=a,i.onload=o,void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}n._bSupportDataURI===!0&&n._fSuccess?n._fSuccess.call(n):n._bSupportDataURI===!1&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var n=1/window.devicePixelRatio,i=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,t,a,o,r,s,l,c,d){if("nodeName"in e&&/img/i.test(e.nodeName))for(var u=arguments.length-1;u>=1;u--)arguments[u]=arguments[u]*n;else"undefined"==typeof c&&(arguments[1]*=n,arguments[2]*=n,arguments[3]*=n,arguments[4]*=n);i.apply(this,arguments)}}var a=function(e,t){this._bIsPainted=!1,this._android=r(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return a.prototype.draw=function(e){var t=this._elImage,n=this._oContext,i=this._htOption,a=e.getModuleCount(),o=i.width/a,r=i.height/a,s=Math.round(o),l=Math.round(r);t.style.display="none",this.clear();for(var c=0;c<a;c++)for(var d=0;d<a;d++){var u=e.isDark(c,d),h=d*o,f=c*r;n.strokeStyle=u?i.colorDark:i.colorLight,n.lineWidth=1,n.fillStyle=u?i.colorDark:i.colorLight,n.fillRect(h,f,o,r),n.strokeRect(Math.floor(h)+.5,Math.floor(f)+.5,s,l),n.strokeRect(Math.ceil(h)-.5,Math.ceil(f)-.5,s,l)}this._bIsPainted=!0},a.prototype.makeImage=function(){this._bIsPainted&&t.call(this,e)},a.prototype.isPainted=function(){return this._bIsPainted},a.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},a.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},a}():function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,n=this._el,i=e.getModuleCount(),a=Math.floor(t.width/i),o=Math.floor(t.height/i),r=['<table style="border:0;border-collapse:collapse;">'],s=0;s<i;s++){r.push("<tr>");for(var l=0;l<i;l++)r.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+a+"px;height:"+o+"px;background-color:"+(e.isDark(s,l)?t.colorDark:t.colorLight)+';"></td>');r.push("</tr>")}r.push("</table>"),n.innerHTML=r.join("");var c=n.childNodes[0],d=(t.width-c.offsetWidth)/2,u=(t.height-c.offsetHeight)/2;d>0&&u>0&&(c.style.margin=u+"px "+d+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}();return c=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:u.H},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(b=m),this._android=r(),this._el=e,this._oQRCode=null,this._oDrawing=new b(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},c.prototype.makeCode=function(e){this._oQRCode=new t(s(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},c.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},c.prototype.clear=function(){this._oDrawing.clear()},c.CorrectLevel=u,c}),define("roomRecharge",["jquery","loginUtil","QRCode"],function(e,t,n){function i(e,t){return function(){o(e,t)}}function a(){e("#qrcode-img").html("二维码充值不了？<u><a href='"+rechargeUrl+"' target='_blank'>打开页面充值&gt;&gt;</a></u>")}function o(t,n){var i=r;e.ajax({url:domain+"/show/qr/getOrderSts.action",type:"post",dataType:"json",data:{appOrderId:t,createDate:n},error:function(e){a()},success:function(n){0==n.result?n.statusCode&&("2"==n.statusCode?(clearInterval(i.timeInterval),e("#qr-tab1").hide(),e("#qr-tab2").show(),e("#qr-tab3").hide(),e("#tab2-recharge-time").html("充值时间："+(new Date).format("yyyy-MM-dd hh:mm:ss")),e("#tab2-order-number").html("充值订单号："+t),i.showMoneyAmount.html(i.amount+" Y币"),i.RechargeCallBack()):"3"==n.statusCode&&(clearInterval(i.timeInterval),e("#qr-tab1").hide(),e("#qr-tab2").hide(),e("#qr-tab3").show(),e("#tab3-recharge-time").html("充值时间："+(new Date).format("yyyy-MM-dd hh:mm:ss")),e("#tab3-order-number").html("充值订单号："+t),i.showMoneyAmount.html("0 Y币"))):(e("#qr-tab1").hide(),e("#qr-tab2").hide(),e("#qr-tab3").show(),e("#tab3-recharge-time").html("充值时间："+(new Date).format("yyyy-MM-dd hh:mm:ss")),e("#tab3-order-number").html("充值订单号："+t),i.showMoneyAmount.html("0 Y币"))}})}Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var r={timeInterval:0,intervalID:0,amount:10,isFinishRenderQr:!1,qrBox:e("#qr-payment"),inputAmount:e("#qr-input-amount"),confirm:e("#qr-confirm"),accountName:e(".account-name"),tips:e("#qr-tips"),showMoneyAmount:e(".money-amount"),qrContentMask:e("#qr-content-mask"),belowQrTips:e("#below-qr-tips"),rechargeCallBacks:null,closeRechargeCallBacks:null,init:function(){var e=r;e.bindEvent()},bindEvent:function(){var t=r;e("#qr-tab1-close").unbind("click").bind("click",function(){t.closeTab1()}),e("#qr-tab2-close").unbind("click").bind("click",function(){e("#qr-tab2").hide(),t.qrBox.hide(),t.qrContentMask.hide(),t.closeRechargeCallBack()}),e("#qr-tab3-close").unbind("click").bind("click",function(){e("#qr-tab3").hide(),t.qrBox.hide(),t.qrContentMask.hide(),t.closeRechargeCallBack()}),e("#qr-ten").unbind("click").bind("click",function(){t.isFinishRenderQr&&(e("#qr-ten").addClass("selected"),e("#qr-fifty").removeClass("selected"),e("#qr-hundred").removeClass("selected"),t.commonOp(10,!1))}),e("#qr-fifty").unbind("click").bind("click",function(){t.isFinishRenderQr&&(e("#qr-ten").removeClass("selected"),e("#qr-fifty").addClass("selected"),e("#qr-hundred").removeClass("selected"),t.commonOp(50,!1))}),e("#qr-hundred").unbind("click").bind("click",function(){t.isFinishRenderQr&&(e("#qr-ten").removeClass("selected"),e("#qr-fifty").removeClass("selected"),e("#qr-hundred").addClass("selected"),t.commonOp(100,!1))}),e(".continue-recharge").unbind("click").bind("click",function(){t.showQrBox()}),t.confirm.unbind("click").bind("click",function(){t.isFinishRenderQr&&t.checkInput()&&(t.showMoneyAmount.html(t.amount+" Y币"),t.getQrAndRecharge())}),e("#open-recharge").unbind("click").bind("click",function(){window.open(window.rechargeUrl)}),t.inputAmount.focus(function(){t.inputAmountFn("")})},inputAmountFn:function(t){var n=r;e("#qr-ten").removeClass("selected"),e("#qr-fifty").removeClass("selected"),e("#qr-hundred").removeClass("selected"),n.inputAmount.val(t),n.confirm.show()},commonOp:function(e,t){var n=r;n.confirm.hide(),n.inputAmount.val("其他金额"),n.tips.hide(),(n.amount!=e||t)&&(n.amount=e,n.showMoneyAmount.html(n.amount+" Y币"),n.getQrAndRecharge())},checkInput:function(){var e=r,t=e.inputAmount.val(),n=/^\d+$/;return!n.test(t)||t<1||t>2e3?(e.tips.show(),!1):e.amount!=t&&(e.amount=t,e.tips.hide(),!0)},recharge:function(){r.showQrBox()},showQrBox:function(n){var i=r;return t.isLogin()?(i.qrBox.show(),i.qrContentMask.show(),n||(n=10),n=Math.ceil(n),n>2e3?(i.belowQrTips.text("二维码充值每日限额2000，打开页面充值"),n=2e3):i.belowQrTips.text("打开手机支付宝或微信扫一扫均可支付"),i.commonOp(n,!0),t.userContext.userNick&&i.accountName.html(t.userContext.userNick),e("#qr-tab1").show(),e("#qr-tab2").hide(),e("#qr-tab3").hide(),void(10==n?(e("#qr-ten").addClass("selected"),e("#qr-fifty").removeClass("selected"),e("#qr-hundred").removeClass("selected")):50==n?(e("#qr-ten").removeClass("selected"),e("#qr-fifty").addClass("selected"),e("#qr-hundred").removeClass("selected")):100==n?(e("#qr-ten").removeClass("selected"),e("#qr-fifty").removeClass("selected"),e("#qr-hundred").addClass("selected")):i.inputAmountFn(n))):void t.showLoginOrRegister()},closeTab1:function(){var t=r;e("#qr-tab2").hide(),e("#qr-tab3").hide(),t.qrBox.hide(),t.qrContentMask.hide(),clearInterval(t.timeInterval),t.closeRechargeCallBack()},RechargeCallBack:function(){if(null!=r.rechargeCallBacks)for(var e=r.rechargeCallBacks.length,t=0;t<e;t++){var n=r.rechargeCallBacks[t];n(),console.log("充值成功 回调业务函数fn="+n)}},addRechargeCallbacks:function(e){null==r.rechargeCallBacks&&(r.rechargeCallBacks=new Array),r.rechargeCallBacks.push(e)},closeRechargeCallBack:function(){if(null!=r.closeRechargeCallBacks)for(var e=r.closeRechargeCallBacks.length,t=0;t<e;t++){var n=r.closeRechargeCallBacks[t];n(),console.log("关闭充值窗口 回调业务函数fn="+n)}},addCloseRechargeCallbacks:function(e){null==r.closeRechargeCallBacks&&(r.closeRechargeCallBacks=new Array),r.closeRechargeCallBacks.push(e)},getQrAndRecharge:function(){var t=r;t.isFinishRenderQr=!1,clearTimeout(t.intervalID),t.intervalID=setTimeout(function(){r.isFinishRenderQr=!0},15e3),e("#qrcode-img").html("二维码加载中..."),e.ajax({url:domain+"/show/qr/getOrderId.action",type:"post",async:!1,dataType:"json",data:{},error:function(e,t,n){console.warn("w-payment:252",e,t,n),a()},success:function(o){if(o&&o.appOrderId){var r=o.appOrderId;if(void 0==r||""==r)return;e.ajax({url:domain+"/show/qr/qrRecharge.action",type:"post",dataType:"json",data:{appOrderId:r,payMoney:t.amount},error:function(e){console.log(e),a()},success:function(o){if(clearInterval(t.timeInterval),o&&0==o.result){var s=o.amount;if(createDate=o.createDate,t.amount==s){e("#qrcode-img").empty();var l={width:140,height:140},c=new n(document.getElementById("qrcode-img"),l);c.makeCode(o.urlPay),t.isFinishRenderQr=!0,clearTimeout(t.intervalID),t.timeInterval=setInterval(i(r,createDate),3e3)}}else console.warn("w-payment:296",o),a()}})}else a()}})}};return window.Recharge=r,r}),define("taskBar",["dateCheck","taskTip","roomRecharge"],function(e,t,n){function i(){p=$(".taskBar-nav"),g=$(".baoxiang a"),v=$(".taskBar-top .close"),m=$("#taskBar"),y=$(".task-list dd"),b=$(".taskBar-content li"),w=$(".bumper-li"),C=$(".beginner-li"),k=$("#rookieNum"),T=$("#bumperNum"),I=$(".beginner-li .sum"),_=$(".bumper-li .sum"),L=$(".liveplayerToolBar-drag-share .liveplayerToolBar-drag-close"),E=$(".liveplayerToolBar-share-area"),x=$("#conLoginTask"),S=$("#bumperTask"),A=$("#newUsertps"),R=$(".head-cover img"),P=$("#userTaskTemp"),M=$("#taskNum1"),D=$("#taskNum2"),N=$("#taskNum3"),B=$("#taskNum4"),U=$("#taskNum5"),O=$("#bindMobileTask .left"),F=$("#shareAnchorTask .left"),j=$("#conLoginTask .txt2 .highlight"),G=$("#conLoginTask .txt4 .highlight"),q=$("#rechargeTask .left"),H=$("#dlTask .left"),z=$("#bumperTask .left"),Y=$(".taskBar-content .btn")}function a(e){if("[object Array]"!==!Object.prototype.toString.call(e)){var t=e,n=[];return n=t.sort(function(e,t){return e.taskType-t.taskType})}}function o(e,t,n){switch(""!=$(".getReward",t).attr("data-text")&&$(".getReward",t).html($(".getReward",t).attr("data-text")),t.find(".getReward").text("抢红钻"),e){case 0:user.isLoginSync()?user.getUserInfo(function(e){var n=new Date(e.registerTime),i=new Date;(i-n)/864e5<=30?t.addClass("can").removeClass("done").removeClass("got").removeClass("none").removeClass("outdated"):(t.find(".getReward").text("已过期"),t.addClass("outdated").removeClass("done").removeClass("got").removeClass("none").removeClass("can"))}):t.addClass("can").removeClass("done").removeClass("got").removeClass("none").removeClass("outdated");break;case 1:t.addClass("done").removeClass("can").removeClass("got").removeClass("none").removeClass("outdated");break;case 2:t.find(".getReward").text("已领取"),t.addClass("got").removeClass("done").removeClass("can").removeClass("none").removeClass("outdated");break;case 3:t.addClass("done").removeClass("can").removeClass("got").removeClass("none").removeClass("outdated")}}function r(e){null==e?e="2001":e+="",$.ajax({url:ne.queryRookieTaskInfo,type:"get",dataType:"json",cache:!1,success:function(t){if(0==t.resultCode){var n=t.data.tasks,i=t.data.balance,r=0,s=0;n=a(n);for(var l=n.length-1;l>=0;l--)0!=n[l].status&&1003!=n[l].taskType&&r++;if(k.text(r),I.text(t.data.allTaskAmount),0!=n[0].status?M.text("1"):M.text("0"),0!=n[2].status?N.text("1"):N.text("0"),0!=n[3].status&&N.text("2"),0!=n[4].status?B.text("1"):B.text("0"),0!=n[5].status?U.text("1"):U.text("0"),"1001"==e)s=Math.floor(i/n[0].amount),o(n[0].status,Y.eq(0),s),O.text(s);else if("1002"==e)s=Math.floor(i/n[1].amount),o(n[1].status,Y.eq(1),s),F.text(s);else if("1003"==e){var c=$.ajax({url:ne.queryLoginDateList,cache:!1});$.when(c,t).done(function(e,t){if($(".detail",x).remove(),$(".text",x).append(Q),e[0].data&&t.data){for(var n=e[0].data?e[0].data.day:[],i=0,a=0,o=t.data.tasks,r=0,s=o.length;r<s;r++)switch(o[r].taskType){case 1003:i=o[r].status;break;case 1004:a=o[r].status}if(e[0].data.continuousDay>=3)switch(i){case 0:$(".conLogin1",x).addClass("disable").removeClass("done");break;case 1:$(".conLogin1",x).removeClass("disable").removeClass("done");break;case 2:$(".conLogin1",x).addClass("disable").addClass("done")}if(e[0].data.continuousDay>=7)switch(a){case 0:$(".conLogin2",x).addClass("disable").removeClass("done");break;case 1:$(".conLogin2",x).removeClass("disable").removeClass("done");break;case 2:$(".conLogin2",x).addClass("disable").addClass("done")}$(".txt2 .highlight",x).html(parseInt(t.data.balance/100)),$(".txt4 .highlight",x).html(parseInt(t.data.balance/500)),e[0].data.continuousDay>=3&&$(".conLogin2",x).addClass("show");for(var r=0,s=n.length;r<s;r++)$(".timeline i.day"+n[r],x).html("").addClass("active"),$(".line"+n[r],x).addClass("active"),6==r&&$(".line8").addClass("active");if(n.length>e[0].data.continuousDay)for(var l=$(".day.active",x),r=0,s=l.length;r<s;r++)if($(l[r]).prev().hasClass("day")&&!$(l[r]).prev().hasClass("active")){var c=$(l[r]).attr("class").split(" ")[1].substr(3);$(".line"+c,x).removeClass("active")}statistics({eventid:ee,act_type:1,parm1:29}),statisticEvent.set({eventid:te,act_type:29})}}).fail(function(e){new ShowDialog.ALERT({width:460,height:228,title:"",yourClass:"taskBar-tips",content:"任务信息获取失败，请稍后再试。",submitTxt:"知道了",timeout:!0}),console&&console.log(e)})}else"1004"==e?(s=Math.floor(i/n[4].amount),o(n[4].status,Y.eq(2),s),q.text(s)):"1005"==e?(s=Math.floor(i/n[5].amount),o(n[5].status,Y.eq(3),s),H.text(s)):"2001"==e&&w.trigger("click")}}}),$.ajax({url:ne.queryShareAnchorInfo,type:"get",dataType:"json",cache:!1,success:function(e){if(R.attr("src",Z),0==e.resultCode){D.text(e.data.length);for(var t=e.data,n=t.length-1;n>=0;n--)R.eq(n).attr("src",t[n].logo)}}}),$.ajax({url:ne.queryBumperTaskInfo,type:"get",dataType:"json",cache:!1,success:function(e){if(0==e.resultCode){for(var t=e.data.tasks,n=(e.data.balance,0),i=t.length-1;i>=0;i--)0!=t[i].status&&n++;T.text(n),_.text(e.data.allTaskAmount)}}})}function s(){if(null===K||1==K){if(!w.hasClass(J))if(C.find(".task-list").hasClass("show")||C.trigger("click"),$("dd.cur",m).length){var e=y.index($("dd.cur"));e!=-1&&y.eq(e).trigger("click")}else user.isLoginSync()?c():y.eq(2).trigger("click");m.addClass(J)}else K===!1&&(new ShowDialog.ALERT({width:470,height:228,title:"",yourClass:"taskBar-tips",content:"抱歉~任务仅限新手，老司机任务正在开发中...<br>敬请期待哟~",submitTxt:"知道了"}),statistics({eventid:ee,act_type:1,parm1:8}),statisticEvent.set({eventid:te,act_type:8}))}function l(){return!!user.isLoginSync()||(X=1,m.removeClass(J),user.showYYLoginBox(),!1)}function c(e){var t=$.ajax({url:ne.queryRookieTaskInfo,cache:!1}),n=$.ajax({url:ne.queryBumperTaskInfo,cache:!1}),i=$.ajax({url:ne.queryLoginDateList,cacle:!1});$.when(t,e,n,i).done(function(e,t,n,i){for(var a=e[0].data.tasks,o=n[0].data.tasks,r=0,s=0,l=0,c=0,u=0,h=0,f=a.length;h<f;h++){if(1001==a[h].taskType&&0!=a[h].status&&(s=1),1==a[h].status){l=1,r=a[h].taskType;break}0==a[h].status&&0==r&&1003!=a[h].taskType&&1004!=a[h].taskType&&1005!=a[h].taskType&&(r=a[h].taskType),1005==a[h].taskType&&(u=a[h].status),0!=a[h].status&&c++}if(l)for(var h=0,f=o.length;h<f;h++)0!=o[h].status&&c++;0!=r?($('dd[data-type="'+r+'"]',C).trigger("click"),l?setTimeout(function(){$(".taskBar-content li.active .done .getReward").css({position:"relative"}).animate({left:"-=20"},150).animate({left:"+=20"},150).animate({left:"-=15"},150).animate({left:"+=15"},150).animate({left:"-=20"},150).animate({left:"+=20"},150).animate({left:"-=15"},150).animate({left:"+=15"},150)},300):setTimeout(function(){$(".taskBar-content li.active .can .taskBtn").css({position:"relative"}).animate({left:"-=20"},150).animate({left:"+=20"},150).animate({left:"-=15"},150).animate({left:"+=15"},150).animate({left:"-=20"},150).animate({left:"+=20"},150).animate({left:"-=15"},150).animate({left:"+=15"},150)},300)):d(c,u,i[0].data)}).fail(function(e){new ShowDialog.ALERT({width:460,height:228,title:"客官，您的网络不流畅，请稍后再试。",yourClass:"getRewardPopup",submitTxt:"知道了"})})}function d(e,t,n){user.getUserInfo(function(i){var a=new Date(i.registerTime),o=new Date;a.getDay(),o.getDay();(o-a)/864e5<=7&&n.continuousDay==n.day.length?$('dd[data-type="1003"]',C).trigger("click"):a.getDay()+21<=30&&11==e&&0==t?$('dd[data-type="1005"]',C).trigger("click"):$(".bumper-li").trigger("click")})}function u(){$(".dateCheck",S).remove(),S.append(W);var e=$.ajax({url:ne.queryUserInfo,cache:!1}),t=$.ajax({url:ne.queryBumperTaskInfo,cache:!1});$.when(e,t).done(function(e,t){if(!e[0].data||!t[0].data)return new ShowDialog.ALERT({width:460,height:228,title:"抱歉，获取任务信息失败了，请稍后再试~",yourClass:"getRewardPopup",submitTxt:"知道了"}),!1;var n=new Date(e[0].data.registerTime),i=n.getFullYear()+"-"+(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+n.getDate();$(".dateCheck",S).dateCheck({format:"yyyy-mm-dd",startDate:i,startTime:n,crdata:t,taskCount:0,onRenderText:function(e){var t=this,n={text:"",cls:""},i=t.options.startTime,a=t.options.crdata[0].data.tasks;if(e.getDate()==i.getDate())n={text:(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"月"+(i.getDate()<10?"0"+i.getDate():i.getDate())+"日 注册日",cls:"regday"};else for(var o=0,r=a.length;o<r;o++)if(a[o].dateId.toString().substr(6)==e.getDate()){var s="",l="",c=a[o].amount?a[o].amount:0;switch(a[o].status){case 0:s='<img src="//yyweb.yystatic.com/pc/images/components/w-dateCheck/images/task-ico-2137f967d8.png"/>'+a[o].amount,l="norob";break;case 1:s="抢红钻",l="startrob";break;case 2:t.options.taskCount++,s="已领取",l="hasrob";break;case 3:t.options.taskCount++,s="已过期",l="expired"}return 6==t.options.taskCount&&$(".f12",S).remove(),n={text:s,cls:l,reward:c}}return n}});var a,o,r,s=$("td.active",S),l=s.index(),c="";if(0==s.closest("tr").index()?(a=s.closest("tr").next(),o=3):(a=s.closest("tr"),o=l>3?6:3),r=$("td:eq("+o+")",a).attr("data-reward")){switch(r){case"50":c="shareAnchorImg";break;case"100":c="bumperImg";break;case"150":c="conLoginImg";break;case"200":c="reSdamount-1";break;case"250":c="reSdamount-2"}var d=parseInt(t[0].data.balance/parseInt(r));z.text(d),$("td.active",S).hasClass("startrob")?d>0?($(".text .rushBuy",S).removeClass("disable").removeClass("done"),""!=$(".text .rushBuy",S).attr("data-text")&&$(".text .rushBuy",S).html($(".text .rushBuy",S).attr("data-text"))):(""==$(".text .rushBuy",S).attr("data-text")&&$(".text .rushBuy",S).attr("data-text",$(".text .rushBuy",S).html()),$(".text .rushBuy",S).html("抢光啦"),$(".text .rushBuy",S).addClass("disable").removeClass("done")):$("td.active",S).hasClass("hasrob")?$(".text .rushBuy",S).addClass("disable").addClass("done"):$(".text .rushBuy",S).addClass("disable").removeClass("done"),$(".rdIcon",S).attr("class",c+" rdIcon")}}).fail(function(e){new ShowDialog.ALERT({width:460,height:228,title:"",yourClass:"taskBar-tips",content:"任务信息获取失败，请稍后再试。",submitTxt:"知道了"})}),user.getUserInfo(function(e){var t=new Date(e.registerTime),n=new Date,i=(t.getDay(),n.getDay()),a=0;if(t.getDay()+21>=28)return!1;switch((n-t)/864e5<=7-t.getDay()?(a=10-i,$.cookie("nu_bumper_taskTips_count",.5,{expires:.5,path:"/"})):i<=3?a=3-i:i>3&&(a=6-i),a<10&&(a="0"+a),a){case"00":$(".countdown,.f20,.ct-text",S).removeClass("show"),$(".titleText",S).addClass("show"),$(".text .crob",S).addClass("show");break;default:$(".countdown,.f20,.ct-text",S).addClass("show"),$(".countdown",S).html(a),$(".text .crob",S).removeClass("show")}}),statistics({eventid:ee,act_type:1,parm1:58}),statisticEvent.set({eventid:te,act_type:58})}function h(){return this}var f=location.protocol.substr(0,location.protocol.length-1),p=$(".taskBar-nav"),g=$(".baoxiang a"),v=$(".taskBar-top .close"),m=$("#taskBar"),y=$(".task-list dd"),b=$(".taskBar-content li"),w=$(".bumper-li"),C=$(".beginner-li"),k=$("#rookieNum"),T=$("#bumperNum"),I=$(".beginner-li .sum"),_=$(".bumper-li .sum"),L=$(".liveplayerToolBar-drag-share .liveplayerToolBar-drag-close"),E=$(".liveplayerToolBar-share-area"),x=$("#conLoginTask"),S=$("#bumperTask"),A=$("#newUsertps"),R=$(".head-cover img"),P=$("#userTaskTemp"),M=$("#taskNum1"),D=$("#taskNum2"),N=$("#taskNum3"),B=$("#taskNum4"),U=$("#taskNum5"),O=$("#bindMobileTask .left"),F=$("#shareAnchorTask .left"),j=$("#conLoginTask .txt2 .highlight"),G=$("#conLoginTask .txt4 .highlight"),q=$("#rechargeTask .left"),H=$("#dlTask .left"),z=$("#bumperTask .left"),Y=$(".taskBar-content .btn"),V=$(".dateCheck",S),W=V.prop("outerHTML"),Q=$(".detail",x).prop("outerHTML"),J="show",K=null,X=0,Z="//yyweb.yystatic.com/pc/images/components/w-taskBar/images/toShare-705710913e.jpg",ee=10010367,te=20014383;userTask_rechargeState=0;var ne={isRookieUser:"//"+window.location.hostname+"/rookieTask/isRookieUser",queryRookieTaskInfo:"//"+window.location.hostname+"/rookieTask/queryRookieTaskInfo",queryBumperTaskInfo:"//"+window.location.hostname+"/rookieTask/queryBumperTaskInfo",queryShareAnchorInfo:"//"+window.location.hostname+"/rookieTask/queryShareAnchorInfo",shared:"//"+window.location.hostname+"/rookieTask/shared",queryLoginDateList:"//"+window.location.hostname+"/rookieTask/queryLoginDateList",queryUserInfo:"//"+window.location.hostname+"/yyweb/user/queryUserInfo",receiveRookieTask:"//"+window.location.hostname+"/rookieTask/receiveRookieTask",receiveBumperTask:"//"+window.location.hostname+"/rookieTask/receiveBumperTask"};$("body").on("click",".baoxiang a",function(){A.removeClass("active").removeAttr("data-type"),user.isLoginSync()?$.ajax({url:ne.isRookieUser,type:"get",dataType:"json",cache:!1,success:function(e){K=e.data,s()},error:function(e,t,n){console.error("w-taskBar:540",ne.isRookieUser,e,t,n)}}):s(),statistics({eventid:ee,act_type:1,parm1:4}),statisticEvent.set({eventid:te,act_type:4})}),m.on("click",".taskBar-top .close",function(){m.removeClass(J)}),$("body").on("click",$(".taskBar"),function(){$(".taskBar-rnTips").removeClass("active")}),m.on("click",".task-list dd",function(e){var t,n=y.index($(this));switch($(".taskBar-rnTips").removeClass("active"),user.isLoginSync()&&r(1001+n),b.eq(n).addClass("active").siblings("li").removeClass("active"),$(this).addClass("cur").siblings("dd").removeClass("cur"),w.removeClass("cur"),e.stopPropagation(),1001+n){case 1001:t=23;break;case 1002:t=26;break;case 1003:t=57;break;case 1004:t=32;break;case 1005:t=35}statistics({eventid:ee,act_type:1,parm1:t}),statisticEvent.set({eventid:te,act_type:t})}),m.on("click",".beginner-li",function(e){$(this).find(".task-list").toggleClass(J),$(this).find("i").toggleClass("active"),$(this).find("a").toggleClass("none"),statistics({eventid:ee,act_type:1,parm1:21}),statisticEvent.set({eventid:te,act_type:21})}),m.on("click",".bumper-li",function(){if($(".taskBar-rnTips").removeClass("active"),$(this).addClass("cur"),$("dd",C).removeClass("cur"),b.eq(5).addClass("active").siblings("li").removeClass("active"),statistics({eventid:ee,act_type:1,parm1:22}),statisticEvent.set({eventid:te,act_type:22}),$.ajax({url:ne.queryRookieTaskInfo,type:"get",dataType:"json",cache:!1,success:function(e){if(0==e.resultCode){var t=e.data.tasks,n=(e.data.balance,0);t=a(t);for(var i=t.length-1;i>=0;i--)0!=t[i].status&&1003!=t[i].taskType&&n++;k.text(n),I.text(e.data.allTaskAmount),0!=t[0].status?M.text("1"):M.text("0"),0!=t[2].status?N.text("1"):N.text("0"),0!=t[3].status&&N.text("2"),0!=t[4].status?B.text("1"):B.text("0"),0!=t[5].status?U.text("1"):U.text("0")}}}),$.ajax({url:ne.queryShareAnchorInfo,type:"get",dataType:"json",cache:!1,success:function(e){if(R.attr("src",Z),0==e.resultCode){D.text(e.data.length);for(var t=e.data,n=t.length-1;n>=0;n--)R.eq(n).attr("src",t[n].logo)}}}),$.ajax({url:ne.queryBumperTaskInfo,type:"get",dataType:"json",cache:!1,success:function(e){if(0==e.resultCode){for(var t=e.data.tasks,n=(e.data.balance,0),i=t.length-1;i>=0;i--)0!=t[i].status&&n++;T.text(n),_.text(e.data.allTaskAmount)}}}),user.isLoginSync())u();else{var e=(new Date).getTime()-1e5,t="",n=function(e){return e>9?e:"0"+e};t=new Date(e).getFullYear()+"-"+n(new Date(e).getMonth()+1)+"-"+n(new Date(e).getDate()),$(".dateCheck",S).dateCheck({format:"yyyy-mm-dd",startDate:t,days:new Date(e).getDay()-1,startTime:e,onRenderText:function(e){var t=this;t.options.days++;var n=((new Date).getTime()-1e6,{text:"",cls:""}),i=e.getDay(),a=50;if(t.options.days>7&&(3==i||6==i)){var o=Math.floor(t.options.days/7);switch(o){case 1:3==i?a=50:6==i&&(a=150),n.text='<img src="//yyweb.yystatic.com/pc/images/components/w-dateCheck/images/task-ico-2137f967d8.png"/>'+a,n.cls="norob";break;case 2:3==i?a=100:6==i&&(a=200),n.text='<img src="//yyweb.yystatic.com/pc/images/components/w-dateCheck/images/task-ico-2137f967d8.png"/>'+a,
n.cls="norob";break;case 3:3==i?a=150:6==i&&(a=250),n.text='<img src="//yyweb.yystatic.com/pc/images/components/w-dateCheck/images/task-ico-2137f967d8.png"/>'+a,n.cls="norob"}}return n}});var i=10-new Date(e).getDay();$(".countdown,.f20,.ct-text",S).addClass("show"),$(".countdown",S).html(i<10?"0"+i:i),$(".text .crob",S).removeClass("show"),$(".rdIcon",S).attr("class","shareAnchorImg rdIcon")}}),m.on("click",".bindMobileBtn",function(){if($(this).parent(".btn").hasClass("can")){var e=$("#bindMobileFrame");if(!l())return!1;statistics({eventid:ee,act_type:1,parm1:24}),statisticEvent.set({eventid:te,act_type:24}),m.removeClass(J);var t=user.getUidSync(),n="https://aq.yy.com/p/mb/mob/embed/index.do?appid=5719&yyuid="+t+"&busiurl="+f+"://"+window.location.hostname+"/3rdLogin/rookieTask.html";e.attr("src",n),$("#bindMobile-frame-box").addClass("show"),statistics({eventid:ee,act_type:1,parm1:13}),statisticEvent.set({eventid:te,act_type:13})}}),$("body").on("click","#bindMobile-frame-box .close",function(){var e=$("#bindMobileFrame");e.attr("src",""),$("#bindMobile-frame-box").removeClass("show"),g.trigger("click")}),$("body").on("click","#loginMobile-box .close",function(){$("#loginMobile-box").removeClass("show"),g.trigger("click")}),m.on("click",".shareAnchorBtn",function(){if(userTask_state=1,$(this).parent(".btn").hasClass("can")){if(!l())return!1;m.removeClass(J),L.addClass("show"),E.trigger("click"),statistics({eventid:ee,act_type:1,parm1:27}),statisticEvent.set({eventid:te,act_type:27})}}),m.on("click",".rechargeBtn",function(){if(userTask_rechargeState=1,$(this).parent(".btn").hasClass("can")){if(!l())return!1;m.removeClass(J),n.showQrBox(),statistics({eventid:ee,act_type:1,parm1:33}),statisticEvent.set({eventid:te,act_type:33})}}),m.on("click",".dlBtn",function(){if($(this).parent(".btn").hasClass("can")){if(!l())return!1;statistics({eventid:ee,act_type:1,parm1:36}),statisticEvent.set({eventid:te,act_type:36}),m.removeClass(J),$("#loginMobile-box").addClass("show")}}),m.on("click",".getReward",function(e){if($(this).parent(".btn").hasClass("done")){var t=$(this).parents("li").attr("data-type");switch(t){case"1001":statistics({eventid:ee,act_type:1,parm1:25}),statisticEvent.set({eventid:te,act_type:25});break;case"1002":statistics({eventid:ee,act_type:1,parm1:28}),statisticEvent.set({eventid:te,act_type:28});break;case"1005":statistics({eventid:ee,act_type:1,parm1:34}),statisticEvent.set({eventid:te,act_type:34});break;case"1006":statistics({eventid:ee,act_type:1,parm1:37}),statisticEvent.set({eventid:te,act_type:37})}var n=$.ajax({url:"2001"==t?ne.receiveBumperTask:ne.receiveRookieTask,type:"get",dataType:"json",cache:!1,data:{taskType:t}});$.when(n,e).done(function(e,t){var n=e[0];0==n.resultCode?($(".task-list dd.cur",C).trigger("click"),new ShowDialog.CONFIRM({width:460,height:225,title:"恭喜客官抢到巨款，好运不断，去抢下一波吧！",yourClass:"getRewardPopup",submitTxt:"下一个",callback:function(){c(),statistics({eventid:ee,act_type:1,parm1:3}),statisticEvent.set({eventid:te,act_type:3}),statistics({eventid:ee,act_type:1,parm1:19}),statisticEvent.set({eventid:te,act_type:19}),statistics({eventid:ee,act_type:1,parm1:56}),statisticEvent.set({eventid:te,act_type:56})}})):n.resultCode==-1001?new ShowDialog.ALERT({width:460,height:228,title:"客官，这个任务的红钻已经领取过了，去做下一个任务吧~",yourClass:"getRewardPopup",submitTxt:"下一个",callback:function(){c()}}):n.resultCode==-1002?new ShowDialog.ALERT({width:460,height:228,title:"任务太火爆，今天抢光啦！<br>先做下一个，明天一起抢！",yourClass:"getRewardPopup",submitTxt:"下一个",callback:function(){c()}}):n.resultCode==-1003?new ShowDialog.ALERT({width:460,height:228,title:"客官，红钻今天不能领取~",yourClass:"getRewardPopup",submitTxt:"知道了"}):n.resultCode==-1004?new ShowDialog.ALERT({width:460,height:228,title:"客官，任务还没完成~",yourClass:"getRewardPopup",submitTxt:"知道了"}):n.resultCode==-1005?(new ShowDialog.ALERT({width:460,height:228,title:"客官，您可是老司机了。不能做这个新手任务喔~",yourClass:"getRewardPopup",submitTxt:"知道了"}),statistics({eventid:ee,act_type:1,parm1:8}),statisticEvent.set({eventid:te,act_type:8})):n.resultCode==-1006?(new ShowDialog.CONFIRM({width:460,height:225,title:"您已获得巨额红钻，绑定手机就可以领取哦~",yourClass:"getRewardPopup1",submitTxt:"去绑定",callback:function(){m.removeClass(J);var e=$("#bindMobileFrame"),t=user.getUidSync(),n="https://aq.yy.com/p/mb/mob/embed/index.do?appid=5719&yyuid="+t+"&busiurl="+f+"://"+window.location.hostname+"/3rdLogin/rookieTask.html";e.attr("src",n),$("#bindMobile-frame-box").addClass("show"),statistics({eventid:ee,act_type:1,parm1:11}),statisticEvent.set({eventid:te,act_type:11})}}),statistics({eventid:ee,act_type:1,parm1:10}),statisticEvent.set({eventid:te,act_type:10})):n.resultCode==-1007?new ShowDialog.ALERT({width:460,height:228,title:"客官，系统出了点错误~",yourClass:"getRewardPopup",submitTxt:"知道了"}):n.resultCode==-1009&&(new ShowDialog.ALERT({width:460,height:228,title:"客官，您的手机非新绑定手机，无法参与抢红钻。",yourClass:"getRewardPopup",submitTxt:"知道了"}),statistics({eventid:ee,act_type:1,parm1:8}),statisticEvent.set({eventid:te,act_type:8}))}).fail(function(e){new ShowDialog.ALERT({width:460,height:228,title:"客官，您的网络不流畅，请稍后再试。",yourClass:"getRewardPopup",submitTxt:"知道了"})})}else;}),m.on("click",".rushBuy,.getReward",function(e){user.isLoginSync()||(X=1,m.removeClass(J),user.showYYLoginBox())}),m.on("click",".rushBuy",function(e){if(!$(this).hasClass("disable")){var t=$(this).attr("data-type");switch(t){case"1003":statistics({eventid:ee,act_type:1,parm1:30}),statisticEvent.set({eventid:te,act_type:30});break;case"1004":statistics({eventid:ee,act_type:1,parm1:31}),statisticEvent.set({eventid:te,act_type:31});break;case"2001":statistics({eventid:ee,act_type:1,parm1:38}),statisticEvent.set({eventid:te,act_type:38})}$.ajax({url:"2001"==t?ne.receiveBumperTask:ne.receiveRookieTask,type:"get",dataType:"json",data:{taskType:t},cache:!1,success:function(e){0==e.resultCode?new ShowDialog.CONFIRM({width:460,height:225,title:"恭喜客官抢到巨款，好运不断，去抢下一波吧！",yourClass:"getRewardPopup",submitTxt:"下一个",callback:function(e){c(),statistics({eventid:ee,act_type:1,parm1:56}),statisticEvent.set({eventid:te,act_type:56}),statistics({eventid:ee,act_type:1,parm1:3}),statisticEvent.set({eventid:te,act_type:3}),statistics({eventid:ee,act_type:1,parm1:19}),statisticEvent.set({eventid:te,act_type:19})}}):e.resultCode==-1006?(new ShowDialog.CONFIRM({width:460,height:225,title:"您已获得巨额红钻，绑定手机就可以领取哦~",yourClass:"getRewardPopup1",submitTxt:"去绑定",callback:function(){m.removeClass(J);var e=$("#bindMobileFrame"),t=user.getUidSync(),n="https://aq.yy.com/p/mb/mob/embed/index.do?appid=5719&yyuid="+t+"&busiurl="+f+"://"+window.location.hostname+"/3rdLogin/rookieTask.html";e.attr("src",n),$("#bindMobile-frame-box").addClass("show"),statistics({eventid:ee,act_type:1,parm1:11}),statisticEvent.set({eventid:te,act_type:11})}}),statistics({eventid:ee,act_type:1,parm1:10}),statisticEvent.set({eventid:te,act_type:10})):e.resultCode==-1009?(new ShowDialog.ALERT({width:460,height:228,title:"客官，您的手机非新绑定手机，无法参与抢红钻。",yourClass:"getRewardPopup",submitTxt:"知道了"}),statistics({eventid:ee,act_type:1,parm1:8}),statisticEvent.set({eventid:te,act_type:8})):e.resultCode==-1002&&new ShowDialog.ALERT({width:460,height:228,title:"任务太火爆，今天抢光啦！<br>先做下一个，明天一起抢！",yourClass:"getRewardPopup",submitTxt:"下一个",callback:function(){c()}}),e.resultCode==-1001&&new ShowDialog.ALERT({width:460,height:228,title:"客官，这个任务的红钻已经领取过了，去做下一个任务吧~",yourClass:"getRewardPopup",submitTxt:"下一个",callback:function(){c()}})}})}});var ie=h.prototype;return ie.show=function(e){r(e),0!=$('dd[data-type="'+e+'"]',C).length?(C.find(".task-list").hasClass("show")||C.trigger("click"),$('dd[data-type="'+e+'"]',C).trigger("click")):(C.find(".task-list").hasClass("show")||C.trigger("click"),w.trigger("click")),m.addClass(J)},ie.hide=function(){m.removeClass(J)},ie.getState=function(){return m.hasClass(J)},header.onLogStateChange(function(e){m.removeClass(J),m.html(P.html()),e||(K=null),i(),X&&(g.trigger("click"),c(),X=0)}),n&&n.addRechargeCallbacks&&n.addRechargeCallbacks(function(e){userTask_rechargeState&&setTimeout(function(e){userTask_rechargeState=0,n.closeTab1(),$(".baoxiang a").trigger("click"),$('dd[data-type="1005"]',$("#taskBar")).trigger("click")},3e3)}),n&&n.addCloseRechargeCallbacks&&n.addCloseRechargeCallbacks(function(e){userTask_rechargeState&&(userTask_rechargeState=0,$(".baoxiang a").trigger("click"))}),new h}),define("taskTips",["util","taskTip","taskBar","roomRegistGuide"],function(e,t,n,i){function a(){if(!n.getState()){h.type="att",h.position="left",h.fit=!0,h.logo=pageInfo.uid&&pageInfo.anchorInfo?pageInfo.anchorInfo.logo:"";var e=new t("#newUserbtns","#wLiveplayerUserInfo .s1",h);e.show(),e.hide(3e4),statistics({eventid:f,act_type:1,parm1:1}),statisticEvent.set({eventid:p,act_type:1})}}function o(e,i,a,o){if(!n.getState()){h.type=e?e:"task",h.position="top",h.fit=!1,h.offset=i?i:{top:0,left:-50},h.onClick=function(e){switch(1004==a&&(a=1003),a&&""!=a?n.show(a):$(".baoxiang a").trigger("click"),this.options.type){case"task":s=46;break;case"f-login-t":s=40;break;case"f-login-s":s=41;break;case"f-down":s=44;break;case"f-first":s=42;break;case"f-bind":s=43;break;case"f-share":s=45;break;case"s-bumper":s=47;break;case"rob":s=48;break;default:s=46}statistics({eventid:f,act_type:1,parm1:s}),statisticEvent.set({eventid:p,act_type:s})};var r=new t("#newUsertps",".module-box .baoxiang",h);r.show(),r.hide(o?o:3e4);var s=0;switch(e){case"task":s=55;break;case"f-login-t":s=49;break;case"f-login-s":s=50;break;case"f-down":s=53;break;case"f-first":s=51;break;case"f-bind":s=52;break;case"f-share":s=54;break;case"s-bumper":s=5;break;case"rob":s=7;break;default:s=55}statistics({eventid:f,act_type:1,parm1:s}),statisticEvent.set({eventid:p,act_type:s})}}function r(e,t,n){$.ajax({url:e,type:t?t:"get",dataType:"json",cache:!1,success:function(e){n&&n.call(this,e)},error:function(t,n,i){console.error("w-taskTips:383:ajax",e,t,n,i),new ShowDialog.ALERT({width:460,height:228,title:"",yourClass:"taskBar-tips",content:"任务信息获取失败，请稍后再试。",submitTxt:"知道了",timeout:!0})}})}function s(e,t,n){var i=!0;return window.localStorage?(t&&localStorage.setItem(e,t),!t&&(i=localStorage.getItem(e))):(t&&$.cookie(e,t,n),!t&&(i=$.cookie(e))),i}var l="/rookieTask/isRookieUser",c="/rookieTask/queryRookieTaskInfo",d="/rookieTask/queryBumperTaskInfo",u=[],h={position:"left",fit:!0,type:"att",show:!1},f=10010367,p=20014383,g={};return g.init=function(){if(user.isLoginSync())r(l,"get",function(t){if(t.data){var n=setTimeout(function(){var e=s("nu_taskTips_count")?parseInt(s("nu_taskTips_count")):0;e>=10||user.queryAttentionList(function(t){pageInfo.uid&&t&&t.indexOf(pageInfo.uid)!=-1||(a(),e?s("nu_taskTips_count",e+1,{expires:365,path:"/"}):s("nu_taskTips_count",1,{expires:365,path:"/"}))})},24e4);u.push(n);var i=$.ajax({url:c,cache:!1}),r=$.ajax({url:d,cache:!1});$.when(i,r).done(function(t,n){for(var i=t[0].data.tasks,a=n[0].data.tasks,r=i.concat(a),s=0,l="",c=0,d=r.length;c<d;c++)1==r[c].status&&(s++,1==s&&(l=r[c].taskType?r[c].taskType:r[c].dateId));if(s>1)e={top:0,left:-50},o("rob",e,l,6e4);else if(1==s){var u="";switch(e={top:0,left:-50},l){case 1001:u="f-bind";break;case 1002:u="f-share";break;case 1003:u="f-login-t";break;case 1004:u="f-login-s";break;case 1005:u="f-first";break;case 1006:u="f-down";break;default:u="s-bumper"}o(u,e,l,6e4)}else 0==s&&(e={top:0,left:-50},g.getDisDay(function(t){if($("#newUsertps .tp-cdown").html(t),!$.cookie("nu_bumper_taskTips_count")){o("bumper",e,"",6e4);var n=new Date;n.setTime(n.getTime()+18e5),$.cookie("nu_bumper_taskTips_count",1,{expires:n,path:"/"})}}))}).fail(function(e){new ShowDialog.POPUP({width:250,height:120,content:'<p class="tips">任务信息获取失败，请稍后再试</p>',yourClass:"popup-mobile",timeout:!0})})}});else{var e={top:0,left:-50};o("task",e);var t=setTimeout(function(){i.showRegistGuideBox();var e=setTimeout(function(){i.hideRegistGuideBox()},3e4);u&&u.push(e),statistics({eventid:f,act_type:1,parm1:2}),statisticEvent.set({eventid:p,act_type:2})},6e4);u.push(t);var n=setTimeout(function(){a()},12e4);u.push(n)}},g.getDisDay=function(e){var t=this;user.getUserInfo(function(n){var i=new Date(n.registerTime),a=new Date,o=(i.getDay(),a.getDay()),r=0;return!(i.getDay()+21>=28)&&((a-i)/864e5<=7-i.getDay()?r=10-o:o<=3?r=o<3?3-o:3:o>3&&(r=6==o?4:6-o),r<10&&(r="0"+r),void e.call(t,r))})},header.onLogStateChange(function(e){for(var t=0,n=u.length;t<n;t++)clearTimeout(u[t]);$("#newUsertps,#newUserbtns").removeClass("active"),g.init(),e||(localStorage&&localStorage.removeItem("nu_taskTips_count"),$.cookie&&$.cookie("nu_taskTips_count",null))}),g}),define("roomCherish",["require","jquery","loginUtil","entAppLive","entAppHandler","entAppReady","pageContext"],function(e,t,n,i,a,o,r){function s(e,n,i){var a=window.domain.indexOf("//")>0?window.domain.substr(window.domain.indexOf("//")):window.domain,o="//m.yy.com/earn/cherish/v4/pc/cherish.html?agentId="+e+"&toPage="+n+"&fromPage=1&source=1&joint=2&partner=0&webYY=1&domain="+a+"/";window.cherishPopup=new ShowDialog.POPUP({width:800,height:650,content:'<div id="cherishDiv" class="open-cherish-div"><iframe id="cherishIframe" src="'+o+'" width="800px" height="590px" style="border:none"></iframe></div>',yourClass:"popup-noble"}),t(".popup-noble .popup-box").css({width:"0px",height:"0px","margin-left":"-500px","margin-top":"-320px"})}var l={tabContentDiv:"bangCntZat",tabContentDiv_MaxHeight:700,tabContentDiv_MinHeight:210,tabContentDiv_MyInfoHeight:85,tabContentDiv_myTitle_show:!1,initDiv:!1,dataMap:{},cherishGroupLevel:0,cherishGroupMaxLevel:7,cherishGroupName:"珍爱团",cherishGroupRank:"--",cherishGroupCups:"--",cherishGroupMedalPic:"",key_baseGroupInfo:"baseGroupInfo",key_myFansTitleInfo:"myFansTitleInfo",key_fansRankInfo:"fansRankInfo",type_channel_no_wheel:1,cherishFansRankResponse:!0,init:function(){a=a||e("entAppHandler"),i=i||e("entAppLive"),n.addLogoutCallbacks(l.loginChangeCallBack4Cherish),n.addLoginCallbacks(l.loginChangeCallBack4Cherish)},addEntListeners:function(){a.addEventListener("truelove_celan_v4_info_rsp",l.receiveCherishBasicInfo),a.addEventListener("truelove_celan_v4_info_update_bc",l.receiveCherishBasicInfo),a.addEventListener("truelove_open_bc",l.receiveCherishBasicInfo),a.addEventListener("truelove_toujie_v4_info_rsp",l.receiveMyFansTitleInfo),a.addEventListener("truelove_toujie_v4_rank_rsp",l.receiveFansRankInfo),a.addEventListener("truelove_get_current_group_score_rsp",l.receiveGroupInfo)},onReady:function(){l.requestCherishFansRank(),i.addMicListChangeCallback(l.micChange4Cherish),l.getRoomInfo()},micChange4Cherish:function(){if(!i.firstMic)return void l.hideCherishDiv();var e=Math.floor(500*Math.random());console.log("micChange4Cherish--random time:"+e),r.channelType!=l.type_channel_no_wheel?window.setTimeout(function(){l.getRoomId()},e):(r.owuid||window.setTimeout(function(){l.getRoomInfo()},e),r.owuid!=i.firstMic?l.hideCherishDiv():window.liveplayer.isCherishTabShow(!0))},loginChangeCallBack4Cherish:function(){l.isCherishCanShow(l.renderCherishBaseGroupData),l.isCherishCanShow(l.renderMyFansTitleData)},hideCherishDiv:function(){window.liveplayer.isCherishTabShow(!1),l.resetRenderCherishDiv(),window.liveplayer.onAnchorCherishIcon("",""),l.dataMap[l.key_baseGroupInfo]=[]},initRender:function(e){console.log("cherish  --  initRender "+e),l.initRenderCherishDiv(e)},resetRenderCherishDiv:function(){l.initDiv=!1,l.initRenderCherishDiv(l.tabContentDiv)},initRenderCherishDiv:function(e){if(l.tabContentDiv=e,!l.initDiv){console.log("cherish  --  initRenderCherishDiv "+e);var n="";n+='<div class="module-box billboard" id="cherish-module-box" style="height:inherit;">',n+='<div class="cherish-list level-0" id="cherish-list-div">',n+='<div class="head">',n+='<div class="img" id="cherish-group-pic-div"><img id="cherish-group-pic" src="//res1.home.yystatic.com/images/show/room/cherish/snap.jpg"></div>',n+='<div class="info">',n+='<h5 class="title" id="cherish-group-name">珍爱团</h5>',n+='<div class="member">成员 <span id="cherish-group-member">0</span></div>',n+="</div></div>",n+="<table><tr>",n+='<td  id="cherish-group-level-a" title="">团等级<br><span id="cherish-group-level">--</span></td>',n+='<td  id="cherish-group-rank-a" title="">排名<br><span id="cherish-group-rank">--</span></td>',n+='<td  id="cherish-group-cup-a" title="珍爱团还没得到过超星奖杯哦！">奖杯<br><span id="cherish-group-cup">--</span></td>',n+="</tr><tr>",n+='<td colspan="3" id="cherish-fans-ranks-td"><div class="open-list"><a  href="javascript:;" title="粉丝排行" id="cherish-fans-ranks-a"><span>粉丝排行</span><span class="text ellipsis" id="cherish-fans-top1-name"></span></a><div class="icon arrow" id="cherish-fans-rank-arrow"><div class="list" id="cherish-fans-rank-list" ><ul id="cherish-fans-ranks"><li class="ellipsis"><span class="icon order order-1">1</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order order-2">2</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order order-3">3</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order">4</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order">5</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order">6</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order">7</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order">8</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order">9</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li><li class="ellipsis"><span class="icon order">10</span><i class="cherish-icon level-1 icon">珍爱团</i><a href="#">虚位以待</a></li></ul><div class="bg bg-t"></div><div class="bg bg-b"></div></div></div></div></td>',n+="</tr>",n+="</table>",n+='<div class="my" id="cherish-my-title" style="display: none">',n+='<div class="title">我的粉丝头衔<div class="icon" id="title-tips-icon-div"><div class="title-tips"><div class="content"><ul><li>头衔积分将决定粉丝头衔</li><li>头衔积分为最近10天（不含当天）累计积分，每天0点刷新</li></ul><table><tr><td>积分</td><td>粉丝头衔</td><td>勋章</td></tr><tr><td>珍爱粉</td><td class="color-purple">220分</td><td><i class="cherish-icon level-5 icon">珍爱团</i></td></tr><tr><td>死忠粉</td><td class="color-purple">150分</td><td><i class="cherish-icon level-4 icon">珍爱团</i></td></tr><tr><td>铁杆粉</td><td class="color-purple">80分</td><td><i class="cherish-icon level-3 icon">珍爱团</i></td></tr><tr><td>小粉丝</td><td class="color-purple">30分</td><td><i class="cherish-icon level-2 icon">珍爱团</i></td></tr><tr><td>路转粉</td><td class="color-purple">30分以下</td><td><i class="cherish-icon level-1 icon">珍爱团</i></td></tr></table></div><div class="bg-t"></div><div class="bg-b"></div></div></div></div>',n+='<div class="rate-process"><i id="cherish-my-title-level" class="cherish-icon icon">珍爱团</i>',n+='<div class="rate-bar" id="cherish-rate-bar" title="">',n+='<div class="bg"><div class="bg-l"></div><div class="bg-r"></div></div>',n+='<div class="rate-mask right-angle" id="cherish-my-title-process" style="width:0%;"><div class="bg-l"></div><div class="bg-r"></div></div>',n+='<div class="text" id="cherish-my-title-process-text">0/0</div>',n+="</div>",n+='<i id="cherish-my-title-next-level" class="cherish-icon icon">珍爱团</i></div>',n+='<div class="tips" id="cherish-my-score-change"></div>',n+="</div>",n+='<a href="javascript:;" class="link" id="cherish-open-link">加入珍爱团，成为真爱粉&gt;&gt;</a>',n+="</div>",n+="</div>",t("#"+l.tabContentDiv).html(n),t("#"+l.tabContentDiv).css({height:l.tabContentDiv_MinHeight+"px"}),l.initDiv=!0,l.bindEvent()}},bindEvent:function(){t("#cherish-fans-rank-arrow").unbind("mouseover").mouseover(function(){var e=l.tabContentDiv_MaxHeight;l.tabContentDiv_myTitle_show||(e-=70),t("#"+l.tabContentDiv).css({height:e+"px"}),l.tabContentDiv_myTitle_show?t("#cherish-fans-rank-list").css({top:"150px"}):t("#cherish-fans-rank-list").css({top:"70px"}),o.ready&&l.requestCherishFansRank()}),t("#cherish-fans-rank-arrow").unbind("mouseleave").mouseleave(function(){l.setCherishBasicInfoDivHeight()}),t("#title-tips-icon-div").unbind("mouseover").mouseover(function(){t("#"+l.tabContentDiv).css({height:l.tabContentDiv_MaxHeight-70+"px"})}),t("#title-tips-icon-div").unbind("mouseleave").mouseleave(function(){l.setCherishBasicInfoDivHeight()}),t("#cherish-group-level-a").unbind("click").click(function(){l.openCherishDialog(1)}),t("#cherish-group-level-a").unbind("mouseover").mouseover(function(){l.requestGroupInfo()}),t("#cherish-group-pic").unbind("mouseover").mouseover(function(){l.requestGroupInfo()}),t("#cherish-fans-ranks-td").unbind("click").click(function(){l.openCherishDialog(2)}),t("#cherish-open-link").unbind("click").click(function(){l.openCherishDialog(3)}),t("#cherish-group-rank-a").unbind("click").click(function(){window.open("http://m.yy.com/earn/cherish/v4/pc/cherishTab.html?isClient=0&topage=1","_blank")}),t("#cherish-group-cup-a").unbind("click").click(function(){window.open("http://m.yy.com/earn/cherish/v4/pc/cherishTab.html?isClient=0&topage=2","_blank")})},setCherishBasicInfoDivHeight:function(){var e=l.tabContentDiv_MinHeight;l.tabContentDiv_myTitle_show&&(e+=l.tabContentDiv_MyInfoHeight),t("#"+l.tabContentDiv).css({height:e+"px"})},isCherishCanShow:function(e){if(!i.firstMic)return void l.hideCherishDiv();var t=!1;if(r.channelType!=l.type_channel_no_wheel){var n=l.dataMap[i.firstMic+"|roomId"];n>0&&(t=!0)}else r.owuid||l.getRoomInfo(),r.owuid==i.firstMic&&(t=!0);t?(e(),window.liveplayer.isCherishTabShow(!0)):window.liveplayer.isCherishTabShow(!1)},receiveCherishBasicInfo:function(e){console.log("cherish  -- receiveCherishBasicInfo"),console.log(e),l.dataMap[l.key_baseGroupInfo]=e,e&&(r.channelType=e.channelType),l.initDiv||l.initRender(l.tabContentDiv),l.isCherishCanShow(l.renderCherishBaseGroupData)},renderCherishBaseGroupData:function(){if(l.dataMap[l.key_baseGroupInfo]){var e=l.dataMap[l.key_baseGroupInfo];if(e.anchorUid!=i.firstMic)return void console.log(e.anchorUid+"!="+i.firstMic);if(!t.isEmptyObject(e.infoGroup)){if(e.infoGroup.cardpic){var a="//image.yy.com/earn/"+e.infoGroup.cardpic+"?imageview/0/w/116/h/116";t("#cherish-group-pic").attr("src",a)}else t("#cherish-group-pic").attr("src","//res1.home.yystatic.com/images/show/room/cherish/snap.jpg");l.cherishGroupName=e.infoGroup.medal,t("#cherish-group-name").text(l.cherishGroupName),t("#cherish-group-member").text(e.infoGroup.numb),t("#cherish-list-div").attr("class","cherish-list level-"+l.getAnchorRealCherishLevel(e.infoGroup.bglevel)),l.cherishGroupMaxLevel=e.infoGroup.maxlevel,l.cherishGroupLevel=e.infoGroup.level,t("#cherish-group-level").text(e.infoGroup.level);var o=parseInt(e.infoGroup.level)+1;o>e.infoGroup.maxlevel&&(o=e.infoGroup.maxlevel);var r="已达到LV7，增加积分提升赛季排名";l.cherishGroupLevel!=l.cherishGroupMaxLevel&&(r="还差"+(e.infoGroup.upgrade-e.infoGroup.score)+"积分升到LV"+o),r+="，\n每月1号0点重新计算",t("#cherish-group-level-a").attr("title",r);var s="团的当前积分为"+e.infoGroup.score;if(o!=e.infoGroup.maxlevel&&(s+="，距升级至LV"+o+"还差"+(e.infoGroup.upgrade-e.infoGroup.score)+"积分"),t("#cherish-group-pic-div").attr("title",s),l.cherishGroupLevel>=l.cherishGroupMaxLevel){var c=e.infoGroup.rank;c>0?(c>50&&(c="50+"),l.cherishGroupRank=c,t("#cherish-group-rank").text(c)):t("#cherish-group-rank").text("--")}else t("#cherish-group-rank").text("--"),t("#cherish-group-rank-a").attr("title","珍爱团未达到LV7，无法参与本月超星赛季哦！");l.cherishGroupCups=e.infoGroup.cups,e.infoGroup.cups>0?(t("#cherish-group-cup-a").attr("title","超级巨星的认证奖杯！"),t("#cherish-group-cup").text(e.infoGroup.cups)):t("#cherish-group-cup").text("--")}if(!t.isEmptyObject(e.toujieTop1Fans)){var d=e.toujieTop1Fans;d&&t("#cherish-fans-top1-name").text(decodeURIComponent(d.nick))}var u="加入珍爱团，成为真爱粉>>",h=e.infoMine;if(h&&e.myUid==n.getLoginUid()&&h.leftsecs>0){var f=604800;if(h.leftsecs>f)u="立即续费>>";else{var p=Math.ceil(h.leftsecs/f);u=p+"天后过期，立即续费>>"}}t("#cherish-open-link").text(u),l.setCherishAnchorInfo(e.infoGroup)}},setCherishAnchorInfo:function(e){var t="//res1.home.yystatic.com/images/show/room/cherish/",n=1;e.bglevel&&(n=e.bglevel);var a=l.getAnchorRealCherishLevel(n);a>0?l.cherishGroupMedalPic=t+a+".png":l.cherishGroupMedalPic="";var o="<p>暂无珍爱团赛季排名</p>";l.cherishGroupLevel>=l.cherishGroupMaxLevel&&(o="<p>珍爱团赛季中排名 <span>"+l.cherishGroupRank+"</span></p>");var r='<div id="cherishInfo"><div class="img"><i class="icon level-'+a+'"></i></div><div class="text"><p>巨星认证</p>'+o+"</div></div>";i&&window.liveplayer.onAnchorCherishIcon&&window.liveplayer.onAnchorCherishIcon(l.cherishGroupMedalPic,r)},getAnchorRealCherishLevel:function(e){var t=0;return 2==e||3==e?t=1:4==e||5==e?t=2:6==e?t=3:7==e&&(t=4),t},receiveMyFansTitleInfo:function(e){console.log("cherish  --  receiveMyFansTitleInfo"),console.log(e),l.dataMap[l.key_myFansTitleInfo]=e,l.initDiv||l.initRender(l.tabContentDiv),l.isCherishCanShow(l.renderMyFansTitleData)},renderMyFansTitleData:function(){var e=!0;if(l.dataMap[l.key_myFansTitleInfo]){var i=l.dataMap[l.key_myFansTitleInfo];if(i&&0==i.result&&i.myUid==n.getLoginUid()&&i.toujieInfo){if(!l.isCherishUser(i.toujieInfo))return void l.hideMyTitleDiv();l.tabContentDiv_myTitle_show=!0,t("#cherish-my-title").show(),t("#"+l.tabContentDiv).css({height:l.tabContentDiv_MinHeight+l.tabContentDiv_MyInfoHeight+"px"}),e=!1;var a=i.toujieInfo.score,o=i.toujieInfo.nextscore,r=parseInt(a/o*100)+"%";t("#cherish-my-title-process").css({width:r}),t("#cherish-my-title-process-text").text(a+"/"+o);var s="今天积分 <span >+"+i.toujieInfo.today+"</span>， ";s+=i.toujieInfo.x>0?"头衔积分将增长 <span>"+i.toujieInfo.x+"</span>":i.toujieInfo.x<0?"头衔积分将下降 <span>"+i.toujieInfo.x+"</span>":"头衔积分将保持不变",t("#cherish-my-score-change").html(s),t("#cherish-my-title-level").addClass("level-"+i.toujieInfo.level).text(l.cherishGroupName);var c=parseInt(i.toujieInfo.level)+1;c>i.toujieInfo.maxlevel&&(c=i.toujieInfo.maxlevel),t("#cherish-my-title-next-level").addClass("level-"+c).text(l.cherishGroupName);var d="我的珍爱值为"+a;c!=i.toujieInfo.maxlevel&&(d+="，距升级至LV"+c+"还差"+(o-a)+"真爱值")}}e&&l.hideMyTitleDiv()},hideMyTitleDiv:function(){l.tabContentDiv_myTitle_show=!1,t("#cherish-my-title").hide(),t("#"+l.tabContentDiv).css({height:l.tabContentDiv_MinHeight+"px"})},isCherishUser:function(e){return 1!=e.level||0!=e.score||0!=e.today||0!=e.rank},receiveFansRankInfo:function(e){console.log("cherish  --  receiveFansRankInfo"),console.log(e),l.cherishFansRankResponse=!0,l.dataMap[l.key_fansRankInfo]=e,l.initDiv||l.initRender(l.tabContentDiv),l.isCherishCanShow(l.renderFansRankInfo)},renderFansRankInfo:function(){var e=l.dataMap[l.key_fansRankInfo];if(e&&0==e.result){for(var n=e.toujieRank,i=10-n.length,a=0;a<i;a++){var o={nick:"虚位以待",level:1};n.push(o)}for(var r="",s="",c=0;c<n.length;c++)s='<i class="cherish-icon level-'+n[c].level+' icon">'+l.cherishGroupName+"</i>",r+=c<3?'<li class="ellipsis"><span class="icon order order-'+(c+1)+'">'+(c+1)+"</span>"+s+'<a href="#">'+decodeURIComponent(n[c].nick)+"</a></li>":'<li class="ellipsis"><span class="icon order">'+(c+1)+"</span>"+s+'<a href="#">'+decodeURIComponent(n[c].nick)+"</a></li>";t("#cherish-fans-ranks").html(r)}},requestCherishFansRank:function(){l.cherishFansRankResponse?(l.cherishFansRankResponse=!1,a.call("truelove_toujie_v4_rank_req",{offset:0,limit:10}),setTimeout(function(){l.cherishFansRankResponse=!0},1e4)):console.log("requestCherishFansRank 上次请求还没有响应，这次不发起请求！")},requestGroupInfo:function(){a.call("truelove_get_current_group_score_req")},receiveGroupInfo:function(e){console.log("cherish  --  receiveGroupInfo"),console.log(e);var n=parseInt(e.level)+1;n>e.maxlevel&&(n=e.maxlevel);var i="已达到LV7，增加积分提升赛季排名";l.cherishGroupLevel!=l.cherishGroupMaxLevel&&(i="还差"+(e.upgrade-e.score)+"积分升到LV"+n),i+="，\n每月1号0点重新计算",t("#cherish-group-level-a").attr("title",i);var a="团的当前积分为"+e.score;if(n!=e.maxlevel&&(a+="，距升级至LV"+n+"还差"+(e.upgrade-e.score)+"积分"),t("#cherish-group-pic-div").attr("title",a),l.cherishGroupLevel>=l.cherishGroupMaxLevel){var o=e.rank;o>0?(o>50&&(o="50+"),l.cherishGroupRank=o,t("#cherish-group-rank").text(o)):t("#cherish-group-rank").text("--")}else t("#cherish-group-rank").text("--"),t("#cherish-group-rank-a").attr("title","珍爱团未达到LV7，无法参与本月超星赛季哦！")},getRoomInfo:function(){i.pageInfo&&i.pageInfo.ssid&&i.firstMic&&t.ajax({url:domain+"/ent/room/getRoomInfo.action",type:"get",dataType:"json",data:{ssid:i.pageInfo.ssid,anchorId:i.firstMic},excetpion:function(e){},success:function(e){return e&&e.owuid?(r||(r={}),r.owuid=e.owuid,l.dataMap[i.firstMic+"|roomId"]=e.roomId,l.resetRenderCherishDiv(),l.isCherishCanShow(l.renderCherishBaseGroupData),l.isCherishCanShow(l.renderMyFansTitleData),void a.call("getTopMicRoomid",{uid:i.firstMic,roomId:e.roomId})):void console.log("w-cherish:getRoomInfo:",e)}})},getRoomId:function(){i.pageInfo&&i.pageInfo.ssid&&i.firstMic&&t.ajax({url:domain+"/ent/room/getRoomId.action",type:"get",dataType:"json",data:{anchorId:i.firstMic},excetpion:function(e){},success:function(e){e&&(l.dataMap[i.firstMic+"|roomId"]=e.roomId,e.roomId<=0?l.hideCherishDiv():(l.resetRenderCherishDiv(),l.isCherishCanShow(l.renderCherishBaseGroupData),l.isCherishCanShow(l.renderMyFansTitleData),window.liveplayer.isCherishTabShow(!0)),a.call("getTopMicRoomid",{uid:i.firstMic,roomId:e.roomId}))}})},includeCherishResource:function(){include("//earn.yystatic.com/earn/js/cherish/v4/pc/proxy.js")},openCherishDialog:function(e){return n.isLogin()?i.pageInfo?void(i.firstMic?(e||(e=3),s(i.firstMic,e,300)):new ShowDialog.POPUP({width:200,content:"首麦无人",timeout:!0})):void new ShowDialog.POPUP({width:200,content:"获取主播信息失败！",timeout:!0}):void n.showLoginOrRegister()}};return window.closeCherishPOPUP=function(){t("#cherishIframe").attr("src",""),t.uiwidget.popupHide({id:"cherishDiv"})},window.closeCherishDialog=function(){window.cherishPopup.removePop()},window.cherish=l,l}),define("liveplayer",["require","util","web2playerStudio","artTemplate","analogscroll","shareTo","analogrange","webpcucount","jquery","flashPcucount","cookie","chatroom","thirdmonitor","taskTips","entAppLive","roomDedicate","roomNoble","roomCherish"],function(e,t,n,i,a,o,r,s,l,c,d,u,h,f,p,g,v,m){var y=window.user,b="http://yyweb.yystatic.com/pc/images/default_portrait-26e3f0a702.png?20160617001",w=window.pageInfo,C=window.statistics,k=window.statisticEvent,T=window.ShowDialog,I=window.header,_="0",L=$.fn.extend({userlist:!0,share:!0,feedback:!0,report:!0,endpage:!0,liveOverInfo:!0,onload:function(){},onMicChange:function(){},onLogin:void 0,onUserInfoClick:void 0},p||e("entAppLive")),E={eventid:10008953,sid:"",hostid:"",parm2:""},x={type:"",authorId:0,micList:[],userList:[],userListIsEnd:!1,sponsors:{icon:"",url:""},anchorInfo:{id:0,nick:"",fansCount:0,logo:b,yynum:0},stat:{videoOnload:!1},hasInitPlayer:!1,rotate:0,qualityChanging:!1,waitHiddoUi:0,isVREnter:!1,delayUserListShow:0,delayMicListShow:0},S={"interface":{flashUrl:(window.flashUrlPrefix||"//webyy.yy.com/")+"s/{$sid}/{$ssid}/yycomscene.swf",xianchangStatus:t.domain+"/video/replay/status?pid={$pid}"},shareInfo:{url:window.location.href,pic:w.snapShot||"",titleParse:function(){var e;return e=w.title?"【"+w.title+"】- ":w.anchorInfo.nick?"【"+w.anchorInfo.nick+"的直播间】- ":"在","{$title}YY直播".replace("{$title}",e)},contentParse:function(){var e;return e=w.title?"【"+w.title+"】":w.anchorInfo.nick?"【"+w.anchorInfo.nick+"的直播间】":"","我正在YY看直播{$title}，现场火爆快来围观！@手机YY".replace("{$title}",e)}},sid:0,ssid:0,maixu:!1,target:void 0},A={el:{shareDrag:void 0,shareQrCode:void 0,moreDrag:void 0,userDrag:void 0,scrollCnt:void 0,userList:void 0,scrollArea:void 0,brightSlider:void 0,voiceSlider:void 0,liveCount:void 0,cherishIcon:void 0,cherishIconInfo:void 0,weixinArea:void 0,shareWXQrCode:void 0},ids:{liveplayer:"#wLiveplayer",userInfo:"#wLiveplayerUserInfo",bangArea:"#wLiveplayerBangArea",gongpin:"#wLiveplayerGongpin",sponsorEl:"#wLiveplayerSponsors",
playerMain:"#playerMain",fansCount:"#fansCount",toolbar:"#toolbarArea"},classes:{currentDrag:"current",typeXiu:"w-liveplayer-type-xiu",typeGame:"w-liveplayer-type-game",typeXianchang:"w-liveplayer-type-xianchang",typeFestival:"w-liveplayer-type-festival",typeIdo1931:"w-liveplayer-type-ido1931",typePlaysingmeet:"w-liveplayer-type-playsingmeet",typeXianchangGuding:"w-liveplayer-type-xianchangGuding",typeCaijing:"w-liveplayer-type-caijing",typeFriend:"w-liveplayer-type-friend",vipList:"bangCntGbx",loading:"loading",onmask:"w-liveplayer-onmask",settingEnable:"w-liveplayer-setting-enable",withSponsor:"w-liveplayer-withsponsor",withTitle:"w-liveplayer-withtitle",noAnchor:"w-liveplayer-noanchor",noAnchorWithTitle:"w-liveplayer-noanchor-withtitle",noAnchorWithSponsor:"w-liveplayer-noanchor-withsponsor",noRotate:"w-liveplayer-noanchor-norotate",ready:"w-liveplayer-ready",endPageCurrent:"w-liveplayer-drag-endpage-current",endPageReplay:"w-liveplayer-drag-endpage-replay",endPageRelink:"w-liveplayer-drag-endpage-relink",endPageNoInfo:"w-liveplayer-drag-endpage-noinfo",bangAreaShowFull:"w-liveplayer-tabArea-bd-show-all",bangAreaCurrent:"w-liveplayer-tabArea-bd-item-current",bangAreaItem:"w-liveplayer-tabArea-bd-item",userListLimit:"w-liveplayer-drag-user-limit",ctrlBtnCurrent:"w-liveplayer-ctrlbtn-cur"},attributes:{error:{id:"wLiverplayerErrPop",classes:{current:"w-liveplayer-errmsg-current"},tpl:['<div id="{{id}}" class="w-liveplayer-errmsg">','<div class="w-liveplayer-errmsg-cnt" yy-el="errMsg"></div>',"</div>"].join(""),show:function(e){var n=this,i=A,a=$("#"+n.id);a.length||($(i.ids.liveplayer).append(n.tpl.replace("{{id}}",n.id)),a=$("#"+n.id),t.eventRender(a[0],i.el,i.attributes)),i.el.errMsg.innerHTML=e,a.addClass(n.classes.current)},hide:function(){var e=this,t=$("#"+e.id);t.removeClass(e.classes.current)}},endPage:{isSupported:2==w.type,liveCheck:function(){var e=this,t=S;$.ajax({url:t["interface"].xianchangStatus.replace("{$pid}",w.resid||w.pid)+"&t="+Math.random(),type:"GET",success:function(t){0!==t.data.resultCode&&"play"!=x.type&&e.statusCheck("quit")}},"json")},statusCheck:function(e){var i=A,a=this,o=S;if(a.isSupported)if("quit"==e){$(i.el.endPageArea).addClass(i.classes.endPageCurrent),$(i.el.endPageArea).addClass(i.classes.endPageNoInfo),n.getEndPageInfo(w.uid,function(e){if(e){var n={timeLength:e.timeLength||0,zanCount:e.ballotCount||0,guestCount:e.guestCount||0};$(i.el.endPageTimeLength).html(t.unitFormat(n.timeLength,"timeLength")),$(i.el.endPageGuestCount).html(t.unitFormat(n.guestCount,2)),$(i.el.endPageBallotCount).html(t.unitFormat(n.zanCount,2)),$(i.el.endPageArea).removeClass(i.classes.endPageNoInfo)}}),clearTimeout(x.timeoutKey);var r=5e3,s=!1;!function l(){$.ajax({url:o["interface"].xianchangStatus.replace("{$pid}",w.resid||w.pid)+"&t="+Math.random(),type:"GET",success:function(e){if(n.fn.trace.info("xianchang status check",e),0===e.resultCode){var t=e.data;if(!t)return;if(t.contQuery){switch(t.resultCode){case 3:$(i.el.endPageArea).removeClass(i.classes.endPageRelink),$(i.el.endPageArea).removeClass(i.classes.endPageReplay)}s=!0}else switch(t.resultCode){case 3:$(i.el.endPageArea).addClass(i.classes.endPageReplay),$(i.el.endPageArea).removeClass(i.classes.endPageRelink),s=!1;break;case 0:t?w.livepid!=t.livepid?(n.fn.trace.info("let relink!",t.livepid),$(i.el.endPageArea).addClass(i.classes.endPageRelink),$(i.el.endPageArea).removeClass(i.classes.endPageReplay),$(i.el.endPageReLink).attr("href","/x/"+t.livepid),s=!1):(n.fn.trace.info("same pid",t.pid,t.livepid),s=!0):s=!0;break;case 2:s=!0;break;case 1:case 4:case 5:s=!1;break;default:s=!1}}else s=!1;n.fn.trace.info("needInterval",s),n.fn.trace.info("xianchang status check end"),s&&(x.timeoutKey=window.setTimeout(function(){l()},r))},error:function(){}},"json")}(),C(t.extend({},E,{act_type:21}))}else"play"==e&&($(i.el.endPageArea).removeClass(i.classes.endPageCurrent),clearTimeout(x.timeoutKey))},init:function(){var e=A,n=this;n.isSupported&&new t.Promise(function(e){y.queryAttentionList(function(t){e(t)})}).then(function(t,n){e.attributes.getAnchorId(function(e){n(y.isAttentionSync(e,t))})}).then(function(n,a){$(e.ids.liveplayer).append(i("wLiveplayerTmplOver",{type:2,isFollow:n,url:t.domain+"/u/"+w.anchorInfo.yynum,avatar:w.anchorInfo.logo||w.anchorInfo.hdLogo||b,nick:w.anchorInfo.nick,id:w.anchorInfo.id,uid:w.uid,fansCount:w.anchorInfo.fansCount,replayUrl:location.pathname+location.search+(location.search?"&":"?")+"replay=1"+location.hash})),t.eventRender($(e.ids.liveplayer)[0],e.el,e.attributes),a()}).then(function(){n.liveCheck()}).start()},check:function(){}},imgloadError:function(){this.onerror=null,this.src=b},dragClick:function(e){e=e||window.event,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},drag:{bind:function(e){e=e||{};var n=this;setTimeout(function(){document.onclick=function(i){i=i||window.event;var a=document.elementFromPoint(i.clientX,i.clientY);t.isBelong(e.el,a)?e.enter&&e.enter():(e.out&&e.out(),n.unbind())}},1)},unbind:function(){document.onclick=null}},micChange:function(){var e=A,a=e.el,o=e.attributes;"maixu"==L.userlist&&~e.el.bangCntZx.className.indexOf("current")&&(e.el.micList.defaulthtml||(e.el.micList.defaulthtml=e.el.micList.innerHTML),e.el.micList.innerHTML=e.el.micList.defaulthtml,$(e.el.micList).addClass("loading"),clearTimeout(x.delayMicListShow),new t.Promise(function(e){y.queryAttentionList(function(t){e(t)})}).then(function(e,t){n.getMicList(function(n){t(n,e)})}).then(function(e,t,n){e.length?y.getUserInfo(e,function(e){n(e,t)}):n([],t)}).then(function(e,t,n){e&&$(e).each(function(e,n){n.isFollow=!!t&&!!~t.join(",").indexOf(n.uid),n.logo=n.logo||n.hdLogo||b,n.index=e+1}),n(e)}).then(function(n){if(e.attributes.userListLimitCheck(),$(e.el.micList).removeClass("loading"),e.el.micList.innerHTML=e.el.micList.defaulthtml,n&&n.length){for(var r=5,s=n.length<=r?0:700,l=new t.Promise(function(t){$(e.el.micList).addClass("loading"),t()}),c=function(t){l.then(function(n){$(e.el.micList).append(i("wLiveplayerOnlinelistItemTmpl",{list:t,uid:y.getUidSync(),statForm:"maixu",defaultAvatar:b})),x.delayMicListShow=setTimeout(n,s)})};n.length;)c(n.splice(0,r));l.then(function(){$(e.el.micList).removeClass("loading").remove("nodata"),t.eventRender(a.micList,a,o),$(e.el.micList).find("img").each(function(e,t){var n=$(t).attr("data-original");if(n){var i=new Image;i.onload=function(){t&&(t.src=n),$(t).attr("data-original","")},i.src=n}})}),l.start()}else $(e.el.micList).addClass("nodata").removeClass("loading"),$(e.el.micList).append('<dd class="w-liveplayer-livelist-nodata">暂无</dd>');e.el.scrollCnt.ctrl.resize()}).start())},userInfoAvatarClick:function(){C(t.extend({},E,{act_type:6}))},userInfoNameClick:function(){C(t.extend({},E,{act_type:6}))},anchorTagClick:function(){C(t.extend({},E,{act_type:46,sid:w.sid,hostid:w.anchorInfo.id,parm1:encodeURIComponent($(this).text())})),k.set({eventid:"20014323",act_type:"2"})},userInfoFollowClick:function(){var e=$(this).attr("data-uid"),n=this,i=A;~n.className.indexOf("cur")||(y.attention(e,function(e,n){if(e){C(t.extend({},E,{act_type:5}));var a=+$(i.ids.fansCount).html();$(i.ids.fansCount).html(a+1)}else new T.POPUP({width:250,content:n||"请稍后再试！",timeout:!0})}),C(t.extend({},E,{act_type:4})),k.set({eventid:"20014323",act_type:"1"}))},bangTabHover:function(e){var n=this,o=A,r=o.attributes,s=e.isTrigger;clearTimeout(x.bangTabDelay),x.bangTabDelay=setTimeout(function(){var e=$(n).attr("data-target"),l=0,c=0;switch($(n).addClass("current").siblings().removeClass("current"),t.cookies.set("wLiveplayerBangAreaTabCurrent",""+$(n).index(),24,"/",window.location.hostname),$(o.el[e]).addClass(o.classes.bangAreaCurrent).siblings("."+o.classes.bangAreaItem).removeClass(o.classes.bangAreaCurrent),"bangCntZat"===e?$(o.el[e]).parent().addClass(o.classes.bangAreaShowFull):$(o.el[e]).parent().removeClass(o.classes.bangAreaShowFull),clearTimeout(x.delayUserListShow),e){case"bangCntGxb":g.initRender(o.el[e].id,n.id),l=200,c=4;break;case"bangCntGbx":v.initRender(o.el[e].id,n.id),l=201,c=3;break;case"bangCntZat":m.initRender(o.el[e].id,n.id),l=202,c=5;break;case"bangCntZx":l=4,c=6,o.el.userList||($(o.el.bangCntZx).html(i("wLiveplayerOnlinelistTmpl",{maixu:"maixu"==L.userlist,hiddenAttBtn:window.combineFlag?window.combineFlag:""})),t.eventRender(o.el.bangCntZx,o.el,o.attributes),o.el.scrollCnt.ctrl=a(o.el.scrollCnt,{scrollbar:o.el.scrollArea,onend:o.attributes.userListScrollEnd,endDistance:40,onscroll:o.attributes.userListOnScroll}),$(o.el.bangCntZx).on("mouseenter",function(){o.el.scrollCnt.ctrl.resize()})),r.micChange();var d=500;"maixu"!=L.userlist&&(d=0),o.el.userList.defaulthtml||(o.el.userList.defaulthtml=o.el.userList.innerHTML),o.el.userList.innerHTML=o.el.userList.defaulthtml,o.attributes.userListPage=1,x.userList=[],o.el.scrollCnt.ctrl.resize(),o.attributes.userListScrollEnd()}!s&&l&&(C(t.extend({},E,{act_type:l})),k.set({eventid:"20014323",act_type:c}))},300)},bangTabMouseout:function(){clearTimeout(x.bangTabDelay)},gongPinInputHover:function(){var e=A;$(e.el.rightBangCnt).hasClass(e.classes.bangAreaShowFull)&&$(e.el.rightBangCnt).removeClass(e.classes.bangAreaShowFull)},gongpinInputMouseout:function(){var e=A;"bangCntZat"===$(e.el.rightBangTab).find(".current").attr("data-target")&&$(e.el.rightBangCnt).addClass(e.classes.bangAreaShowFull)},userlistUserClick:function(){var e=this,n=$(e).attr("data-stat-form"),i="";switch(n){case"userlist":i=14;break;case"maixu":i=13}i&&C(t.extend({},E,{act_type:i}))},userlistFocusClick:function(){var e=this,n=A,i=$(e).attr("data-uid"),a=$(e).attr("data-stat-form"),o="",r="";switch(a){case"maixu":o=15,r=16;break;case"userlist":o=17,r=18;break;case"endpage":r=22}new t.Promise(function(t){$(e).hasClass("w-player-followbtn-mini-cur")||t()}).then(function(e){y.isLoginSync()?e():y.showYYLoginBox()}).then(function(e){y.queryAttentionList(function(t){e(t)})}).then(function(e,t){if(e){if(~e.indexOf(i))return y.attention();t()}}).then(function(e){y.attention(i,function(a,o){if(a){if(y.attention(),e(),i==w.anchorInfo.id){var s=+$(n.ids.fansCount).html();$(n.ids.fansCount).html(s+1)}r&&C(t.extend({},E,{act_type:r}))}else new T.POPUP({width:250,content:o,timeout:!0})}),o&&C(t.extend({},E,{act_type:o}))}).start()},userListPage:1,userListScrollEnd:function(){var e=A,a=e.el,o=e.attributes;return e.el.userList.isLoading||x.userListIsEnd||!x.liveCount?void $(e.el.userList).addClass("loading"):void new t.Promise(function(t){return x.liveCount<=$(a.userList).find("dd").length-1?($(e.el.userList).addClass("nodata").removeClass("loading"),void($(a.userList).find("dd").length<=1&&$(e.el.userList).append('<dd class="w-liveplayer-livelist-nodata">暂无</dd>'))):void t()}).then(function r(t){$(e.el.userList).addClass("loading"),$(e.el.userList).removeClass("nodata"),e.el.scrollCnt.ctrl.resize(),e.el.userList.isLoading=!0,n.getUserList(o.userListPage,function(e){if(e&&e.length){var n=[],i=y.getUidSync();1==o.userListPage&&i&&n.push(i),$(e).each(function(e,t){i?i!=t.uid&&n.push(t.uid):n.push(t.uid)}),o.userListPage++,x.userList=x.userList.concat(n),t(n)}else e===!1?r(t):t([])})}).then(function(e,t){y.queryAttentionList(function(n){t(e,n)})}).then(function(e,t,n){y.getUserInfo(e,function(e){n(e,t)})}).then(function(e,t,n){$(e).each(function(n,i){i.isFollow=y.isAttentionSync(i.uid,t),i.logo=i.logo||i.hdLogo||b,i.nick=i.nick,i.yynum&&i.nick||e.splice(n,1)}),n(e)}).then(function(n){$(e.el.userList).removeClass("loading"),e.attributes.userListLimitCheck(),$(e.el.userList).append(i("wLiveplayerOnlinelistItemTmpl",{list:n,uid:y.getUidSync(),defaultAvatar:b,statForm:"userlist"})),t.eventRender(e.el.userList,e.el,e.attributes),e.el.userList.isLoading=!1,$(e.el.userList).find("img").each(function(e,t){var n=$(t).attr("data-original");if(n){var i=new Image;i.onload=function(){t&&(t.src=n),$(t).attr("data-original","")},i.src=n}}),e.el.scrollCnt.ctrl.resize()}).start()},userListLimitCheck:function(){var e=A,t=e.el,n=1,i=1,a=~document.getElementsByTagName("html")[0].className.indexOf("w960"),o=a?8:12;x.userList.length&&(n=x.userList.length),"maixu"!=L.userlist&&(i=0),x.micList.length&&(i=x.micList.length),n+i>=o?$(t.userDrag).addClass(e.classes.userListLimit):$(t.userDrag).removeClass(e.classes.userListLimit)},weixinClick:function(){var e=A,n=e.el,i=n.weixinArea;if($(i).hasClass(e.classes.currentDrag))A.popMask.hide();else{if(A.popMask.show(),$(i).addClass(e.classes.currentDrag),$(n.shareQrCode).children().length)$(n.shareWXQrCode).html($(n.shareQrCode).html());else{var a='<img src="'+y.getQrcodeSync(location.href)+'" alt="'+document.title+'" width="130" height="130"/>';$(n.shareQrCode).append(a),$(n.shareWXQrCode).append(a)}C(t.extend({},E,{act_type:38,parm1:"weixin"}))}},endPageShareClick:function(){var e=this;C(t.extend({},E,{act_type:38,parm1:$(e).attr("data-val")}))},endPageReplayClick:function(){C(t.extend({},E,{act_type:23}))},endPageRelinkClick:function(){},getAnchorId:function(e){w.anchorInfo.id?e(w.anchorInfo.id):n.getAnchorId(e)},toolbarSlideUp:function(){var e=A,n=t.getCssProperty("transition");n?$(e.ids.toolbar).addClass("w-liveplayer-toolbar-cur"):$(e.ids.toolbar).animate({bottom:"0px"},400)},toolbarSlideDown:function(){var e=A,n=t.getCssProperty("transition");$(e.ids.toolbar).attr("data-always")||(n?$(e.ids.toolbar).removeClass("w-liveplayer-toolbar-cur"):$(e.ids.toolbar).animate({bottom:"-40px"},400))}},init:function(e){var a=this,r=a.attributes,s=t.extend({},S,e),l="";switch(+w.type){case 1:l=a.classes.typeXiu;break;case 2:l=a.classes.typeXianchang;break;case 5:l=a.classes.typeGame;break;case 7:l=a.classes.typePlaysingmeet;break;case 8:l=a.classes.typeFestival;break;case 9:l=a.classes.typeIdo1931;break;case 10:l=a.classes.typeCaijing;break;case 11:l=a.classes.typeFriend;break;case 12:l=a.classes.typeXianchangGuding}if(!w.sid&&!w.pid)return void a.attributes.error.show("您访问的频道不存在");l&&$(a.ids.liveplayer).addClass(l),I.onresize&&I.onresize(function(){A.resize()});var c=!1;/^(1|7|8|9|12)$/.test(w.type)&&(c=!0,L.userlist="maixu"),$(a.ids.bangArea).html(i("wLiveplayerBangTmpl",{showBang:c})),t.eventRender($(a.ids.bangArea)[0],a.el,a.attributes);var d=t.cookies.get("wLiveplayerBangAreaTabCurrent");0!==d&&(d>=$(a.el.rightBangTab).find("a").length&&(d=0),$(a.el.rightBangTab).find("a").removeClass("current"),$(a.el.rightBangTab).find("a").eq(d).addClass("current")),$(a.el.rightBangCnt).removeClass("loading"),$(a.el.rightBangTab).find(".current").trigger("mouseover");var u=function(e){new t.Promise(function(e){w.pid&&0!==+w.uid?e(w.uid):n.getAnchorId(function(t){e(t)})}).then(function(e,t){x.authorId=e,e||(w.uid=0),y.getSponsorInfo({sid:w.sid,ssid:w.ssid,uid:e,pid:w.pid},function(n){if(n){switch(w=window.pageInfo=$.fn.extend(window.pageInfo,{uid:e,pid:window.pageInfo.pid||n.pid,title:n.title,v_type:n.v_type,anchorInfo:{id:e,nick:n.nick,fansCount:n.numOfFun||0,logo:n.logo||n.hdLogo,yynum:n.yynum},sponsors:{icon:n.thumb,url:n.thumbUrl||""}}),$(a.ids.liveplayer).removeClass(a.classes.withSponsor),$(a.ids.liveplayer).removeClass(a.classes.withTitle),$(a.ids.liveplayer).removeClass(a.classes.noAnchor),$(a.ids.liveplayer).removeClass(a.classes.noAnchorWithTitle),$(a.ids.liveplayer).removeClass(a.classes.noAnchorWithSponsor),w.type){case"2":case"5":break;default:$(a.ids.liveplayer).addClass(a.classes.noRotate)}w.uid?w.sponsors.icon?$(a.ids.liveplayer).addClass(a.classes.withSponsor):w.title&&$(a.ids.liveplayer).addClass(a.classes.withTitle):w.sponsors.icon?$(a.ids.liveplayer).addClass(a.classes.noAnchorWithSponsor):w.title?$(a.ids.liveplayer).addClass(a.classes.noAnchorWithTitle):$(a.ids.liveplayer).addClass(a.classes.noAnchor)}else w.uid=0,w.anchorInfo={},w.sponsors={};t()})}).then(function(e){E.hostid=w.anchorInfo.id||"",E.sid=w.sid,E.parm2=w.livepid||w.pid||"",e()}).then(function(e){x.sponsors.url==w.sponsors.url&&x.sponsors.icon==w.sponsors.icon&&x.anchorInfo.id==w.anchorInfo.id&&x.hasInitPlayer||(x.sponsors=w.sponsors,x.anchorInfo=w.anchorInfo,n.initPlayer({type:w.type}),x.hasInitPlayer=!0),y.onAttention(),e()}).then(function(e){var t=n.getPCUStatSync()||{};window.flashPcucount.init({},{act:"webentvediodo",sid:w.sid,rel:"yycomscene",tempid:w.tempId||null,subsid:w.ssid||null,source:I.ref||null,cpuid:I.pcuid||null,wyy:n.getWyy()||null,lk:t.is_link?1:0,res:t.resolution||null,ra:t.rate||null,hz:t.frame_rate||"",fs:0,hostid:w.anchorInfo.id||n.getMicListSync()[0]||null,streamid:null,rl:"yycomscene",td:w.tempId||null,sd:w.sid||null,sbd:w.ssid||null,ud:w.uid||null,sr:I.ref||null,cd:I.pcuid||null,wy:n.getWyy()||null,hid:w.anchorInfo.id||n.getMicListSync()[0]||null,mid:null},2),e()}).then(function(e){y.queryAttentionList(function(t){e(t)})}).then(function(e,t){a.attributes.getAnchorId(function(n){t(y.isAttentionSync(n,e))})}).then(function(e,n){$.ajax({type:"get",url:t.domain+"/impression/anchor/"+w.anchorInfo.yynum,dataType:"json",success:function(i){if(0===i.resultCode&&"undefined"!=typeof i.data&&null!==i.data&&"[object Array]"===Object.prototype.toString.call(i.data)&&i.data.length){w.anchorInfo.anchorTagList=i.data,$(a.ids.userInfo).addClass("w-liveplayer-userinfo-hastags");for(var o=0,r=w.anchorInfo.anchorTagList.length;o<r;o++)w&&C(t.extend({},E,{act_type:47,sid:w.sid,hostid:w.anchorInfo.id,parm1:encodeURIComponent(w.anchorInfo.anchorTagList[o])}));n(e)}else n(e)},error:function(){n(e)}})}).then(function(e,n){var o;w.anchorInfo.id&&(o={homePage:t.domain+"/u/"+w.anchorInfo.yynum,cover:w.anchorInfo.logo||w.anchorInfo.hdLogo||b,nick:w.anchorInfo.nick,fansCount:w.anchorInfo.fansCount,isFollow:e,uid:w.anchorInfo.id,v_type:w.v_type,cherishIcon:void 0,cherishIconInfo:void 0,anchorTagList:w.anchorInfo.anchorTagList||[]},x.cherishIcon&&x.cherishIcon[w.anchorInfo.id]&&(o.cherishIcon=x.cherishIcon[w.anchorInfo.id].iconUrl,o.cherishIconInfo=x.cherishIcon[w.anchorInfo.id].infoHtml)),$(a.ids.userInfo).html(i("wLiveplayerUserInfoTmpl",{data:o,defaultAvatar:b})),t.eventRender($(a.ids.userInfo)[0],a.el,a.attributes),$(a.el.rightBangCnt).removeClass("loading"),$(a.el.rightBangTab).find(".current").trigger("mouseover"),n()}).then(function(){e&&e(w),y.attention()}).start()};n.init({player:"player",type:"studio",onDanmuReady:function(){y.isLoginSync()&&y.getUserInfo(function(e){w.userInfo=e})},onMessage:function(e){if(e){var t="";switch(+e.code){case 1:t="您所在的网络环境不稳定，建议 把清晰度 切换到流畅进行观看";break;default:t=e.msg}t&&new T.POPUP({width:200,content:t,timeout:!0,parent:a.ids.playerMain,overtime:e.delay||3e3})}},onJoinChannel:function(){C.collectStat({join_live_succ:1})},onStatusChange:function(e){if(x.type=e,e&&!x.stat.videoOnload&&window.stat&&window.stat.start){var t=new Date-window.stat.start;if(t<=6e4){if(t>4e3){var i=3e3+Math.floor(1e3*Math.random());C.collectStat({video_load_timecost:i,audio_load_timecost:i}),n.fn.trace.info("进入房间成功","耗时 "+t/1e3+"s","上报时间为 "+i/1e3+"s")}else C.collectStat({video_load_timecost:t,audio_load_timecost:t}),n.fn.trace.info("进入房间成功","耗时 "+t/1e3+"s");C.intervalStat.timerStat("liveVideo",t),x.stat.videoOnload=!0}else n.fn.trace.info("进入房间成功但超时不统计","耗时 "+t/1e3+"s")}a.attributes.endPage.statusCheck(e),"play"==e&&(x.qualityChanging=!1,function o(){$.cookie("hiido_ui")?clearTimeout(x.waitHiddoUi):x.waitHiddoUi=setTimeout(o,500)}())},onMicListChange:function(e){if("maixu"==L.userlist){var t=e[0];x.micList.join(",")!=e.join(",")&&(r.micChange(),x.micList=e),x.isReady&&x.authorId!=t&&(x.authorId=t,u(function(e){n.fn.trace.info("config.onload",e,n,y,A),L.onMicChange&&L.onMicChange(e,n,y,A)}))}},onFlashCallRecommend:function(e){if(_=e,"1"==e){if(0!==$(".w-liveplayer-nomic").length)$(".w-liveplayer-nomic").addClass("active"),w&&C({act_type:43,sid:w.sid,uid:w.uid});else{var t=0===+w.uid?"":w.uid;$.ajax({type:"get",url:"//"+window.location.hostname+"/live/queryEndList?"+(w.sid?"sid="+w.sid:"")+(t?"&user="+t:""),dataType:"json",success:function(e){for(var t=e.data,n=0,a=t.length;n<a;n++)if("7"==t[n].type||"2"==t[n].type||"5"==t[n].type){var o=t[n].duration,r=Math.floor(o/60);if(t[n].duration=("0000"+r).substr(("0000"+r).length-4,2)+":"+("00"+r).substr(("00"+r).length-2)+":"+("00"+o%60).substr(("00"+o%60).length-2),t[n].addtime){var s=t[n].addtime,l=s.split(" "),c=l[0].split("-"),d=l.length>1?l[1].split(":"):[0,0,0],u=new Date(c[0],c[1]-1,c[2],d[0],d[1],d[2]),h=new Date-u;h/36e5<1?t[n].addtime="刚刚":h/36e5>1&&h/36e5<=24?t[n].addtime="1天前":h/36e5>24&&h/36e5<=720?t[n].addtime=Math.floor(h/864e5)+"天前":h/36e5>720&&(t[n].addtime=s.substr(0,10))}}var f=i("wLiveplayerNomic",{data:t});$(".w-liveplayer-nomic").remove(),$("#playerMain").append(f),"1"==_&&$(".w-liveplayer-nomic").addClass("active"),w&&C({act_type:43,sid:w.sid,uid:w.uid})},error:function(){}})}$("#wLiveplayer").on("click",".video-box",function(){w&&C({act_type:44,bak1:$(this).attr("data-type")})})}else $(".w-liveplayer-nomic").removeClass("active")},onChannelInfoCallback:function(e){if(e){w.sid=e.pid,w.ssid=e.sid||w.sid;var t=e.template_id,n=/(tempId=)[^&]*/gi,i=location.search,a="";t&&w.tempId&&t!=w.tempId&&(a=n.test(i)?i.replace(n,"$1"+t):i+=(i?"&":"")+"tempId="+t,i!=a&&(location.search=a))}},onConnectVideo:function(){window.stat&&(window.stat.start=new Date)},onReady:function(){function e(e){if(x.isVREnter){e.preventDefault(),e.stopPropagation();var t=e.originalEvent.wheelDeltaY||-e.originalEvent.deltaY||e.originalEvent.wheelDelta||-e.originalEvent.detail||-e.originalEvent.delta;console.log("data:",t/6),n.callAs("vrMouseWheel",t/6)}}window.stat&&(window.stat.start=new Date),A.resize(),u(function(e){a.attributes.endPage.init(),setTimeout(function(){o(s.shareInfo.titleParse(),s.shareInfo.contentParse(),s.shareInfo.url,s.shareInfo.pic||e.anchorInfo.logo)},500);var i=3e5,r=function(){u(function(){x.sponsorsTimeoutKey=setTimeout(r,i)})};clearTimeout(x.sponsorsTimeoutKey),x.sponsorsTimeoutKey=setTimeout(r,i),x.isReady=!0,t.trace.info("config.onload",e,n,y,A),$(a.ids.liveplayer).addClass(a.classes.ready),L.onload&&L.onload(e,A),h.statEnterChannel(e.anchorInfo.id),C(t.extend({},E,{act_type:39}))}),n.getUserCount(function(e){isNaN(e)||(a.el.userList&&~a.el.bangCntZx.className.indexOf("current")&&(~a.el.userList.className.indexOf("nodata")||~a.el.userList.className.indexOf("loading"))&&a.attributes.userListScrollEnd(),x.liveCount=e,a.el.liveCount&&(a.el.liveCount.innerHTML=t.unitFormat(e,2),$(a.el.liveCount).parent().show()))}),$(a.ids.gongpin).chatPub({context:$(a.ids.liveplayer),scrollCfg:{scrollCnt:".chat-room .scroll-sidebar-cont",scrollArea:".chat-room .scroll-sidebar-bar"},chatInputConifg:{target:$(a.ids.gongpin).find(".msg-input"),cfg:{sendButton:$(a.ids.gongpin).find(".sendmsg-btn"),lenCounter:$(a.ids.gongpin).find(".msg-input-num"),tipsPop:$(a.ids.gongpin).find(".chat-input-tips")}}}),t.eventRender($(a.ids.gongpin).find(".tips-chat")[0],a.el,a.attributes),I.onLogStateChange&&I.onLogStateChange(function(){y.onAttention(),y.getUserInfo(function(e){w.userInfo=e}),a.attributes.error.hide(),n.joinChannel()}),"onmousewheel"in document?$(a.ids.playerMain).bind("mousewheel",e):$(a.ids.playerMain).bind("DOMMouseScroll",e),$(a.ids.playerMain).on("mouseenter",function(e){$(a.ids.playerMain);1==w.vr?x.isVREnter=!0:x.isVREnter=!1,a.attributes.toolbarSlideUp()}).on("mouseleave",function(){$(a.ids.playerMain);1==w.vr&&(x.isVREnter=!1),a.attributes.toolbarSlideDown()}),x.toolbarSlideKey=setTimeout(function(){a.attributes.toolbarSlideDown()},3e3),function l(){$.cookie("hiido_ui")?(clearTimeout(x.waitHiddoUi),window.webPcuCount.init({},{act:"webentchndo",sid:w.sid,rel:"yycomscene",tempid:w.tempId||null,subsid:w.ssid||null,source:I.ref||null,cpuid:I.pcuid||null,wyy:n.getWyy()||null,rl:"yycomscene",td:w.tempId||null,sd:w.sid||null,sbd:w.ssid||null,sr:I.ref||null,cd:I.pcuid||null,wy:n.getWyy()||null},1)):x.waitHiddoUi=setTimeout(l,500)}();var i=function(){if(window.localStorage&&(window.localStorage.yy_watchHistory||(window.localStorage.yy_watchHistory="{}"),w.roomName.length)){for(var e=w.userInfo&&w.userInfo.uid||"anony",t=JSON.parse(window.localStorage.yy_watchHistory)[e]||[],n={topCid:w.sid,subCid:w.ssid,roomName:encodeURIComponent(w.roomName),expires:+new Date},i=JSON.parse(JSON.stringify(t)),a=0,o=t.length;a<o;a++){var r=t[a];(+new Date-r.expires>12096e5||r.topCid===n.topCid&&r.subCid===n.subCid)&&i.splice(a,1)}t=i,t.unshift(n),t.length>30&&(t.length=30);var s=JSON.parse(window.localStorage.yy_watchHistory);s[e]=t,window.localStorage.yy_watchHistory=JSON.stringify(s)}},r=setTimeout(function(){i(),i=null,clearTimeout(r)},6e4)},onError:function(e){var t,n;switch(e){case 0:break;case 1:case-2:n=!0,t='网络不给力，请稍后 <a href="javascript:location.reload();">重试</a>';break;case 11:t="您访问的频道不存在";break;case 8:case 9:t=y.isLoginSync()?"当前直播间人数过多，去其他直播间逛逛吧~":"当前直播间人数过多，请登录后重试~";break;case 2:case 4:case 5:case 10:t="该直播间访问受限，去其他直播间逛逛吧~";break;case 3:case 6:case 7:case-1:t='您打开了其他直播间，当前直播暂停 <a href="javascript:;" onclick="this.parentNode.style.display=\'none\',location.reload();">继续播放</a>'}t&&a.attributes.error.show(t),n&&C.collectStat({join_live_succ:0})},onFullscreen:function(){C(t.extend({},E,{act_type:40}))},onVideoLog:function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&C.intervalStat.timerStat("video_"+t,e[t])},onPlayVideoUid:function(e){e&&y.getLivingBgImage(e,function(e){e&&"undefined"!=typeof e.isPhoneLiving&&1==e.isPhoneLiving&&n.setBgImg({bgImg:e.bgImage||"//yyweb.yystatic.com/pc/images/mobile-player-bg-028d589145.jpg",isDefault:e.bgImage?0:1})})}}),A.resize();var f=y.showYYLoginBox;y.showYYLoginBox=function(){var e=typeof L.onLogin;switch(e){case"undefined":f();break;case"function":L.onLogin.call(this)}},L.onUserInfoClick&&$("#"+A.classes.vipList).on("click","a.nick",function(e){e.preventDefault(),L.onUserInfoClick.call(this,e)}),y.onAttention(function(e){$(a.el.scrollCnt).find(".w-player-followbtn-mini").each(function(t,n){var i=y.isAttentionSync($(n).attr("data-uid"),e);i?$(n).addClass("w-player-followbtn-mini-cur").parent().parent().addClass("followed"):$(n).removeClass("w-player-followbtn-mini-cur").parent().parent().removeClass("followed")}),$(a.ids.userInfo).find(".w-liveplayer-followbtn").each(function(t,n){var i=$(n).attr("data-uid"),a=y.isAttentionSync(i,e);a?/^(?:5|13)$/.test(w.type)?$(n).addClass("w-liveplayer-nocherish-cur"):y.isCherish(i,function(e){e&&($(n).unbind("click"),$(n).parent().parent().addClass("followed"),e&&0===+e.level?($(n).addClass("w-liveplayer-uncherishbtn-cur"),$(n).bind("click",function(){m.openCherishDialog(3)})):($(n).addClass("w-liveplayer-cherishbtn-cur"),$(n).bind("click",function(){m.openCherishDialog(1)})))}):$(n).removeClass("w-liveplayer-uncherishbtn-cur w-liveplayer-cherishbtn-cur w-liveplayer-nocherish-cur").parent().parent().removeClass("followed")}),$(a.el.endPageArea).find(".w-liveplayer-followbtn").each(function(t,n){var i=y.isAttentionSync($(n).attr("data-uid"),e);i?$(n).addClass("w-liveplayer-followbtn-cur"):$(n).removeClass("w-liveplayer-followbtn-cur")})})}};return A.resize=function(){var e=A,t=$(e.ids.liveplayer).width(),i=Math.round(9*t/16);n.resize(t,i)},A.popMask={show:function(){var e=this,t=A;e.onPopMaskShowQueue.length&&$(e.onPopMaskShowQueue).each(function(e,t){"function"==typeof t&&t()}),$(t.ids.liveplayer).addClass(t.classes.onmask)},hide:function(){var e=this,t=A;e.onPopMaskHideQueue.length&&$(e.onPopMaskHideQueue).each(function(e,t){"function"==typeof t&&t()}),$(t.ids.liveplayer).removeClass(t.classes.onmask)},onPopMaskShowQueue:[],onPopMaskShow:function(e){this.onPopMaskShowQueue.push(e)},onPopMaskHideQueue:[],onPopMaskHide:function(e){this.onPopMaskHideQueue.push(e)}},window.liveplayer||(window.liveplayer={},window.liveplayer.onAnchorCherishIcon=function(e,t){if(e){var n=A,i=n.el;$(i.cherishIcon).show().find("img.icon-cherish").attr("src",e),i.cherishIconInfo.innerHTML=t,w.anchorInfo.id&&(x.cherishIcon||(x.cherishIcon={}),x.cherishIcon[w.anchorInfo.id]={iconUrl:e,infoHtml:t})}},window.liveplayer.isCherishTabShow=function(e){var n=A,i=t.cookies.get("wLiveplayerBangAreaTabCurrent");e?($("#bangTabZat").show().parent().addClass("four-row"),$("#bangCntZat").removeClass("hidden")):($("#bangTabZat").hide().parent().removeClass("four-row"),$("#bangCntZat").addClass("hidden"),2==i&&(i=0)),$(n.el.rightBangTab).find("a").eq(i).trigger("mouseover")}),A}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("statistics requires a window with a document");return t(e)}:t(e)}(window,function(e){var t=e.document,n=e.jQuery||e.$,i=function(i){var a={domain:"ylog.hiido.com",ipPrefix:"14.17.112.",ips:[232,233,234,235,236,237],getServerUrl:function(e){e=e||this.domain;var t=location.protocol,n="j.gif?";return t+"//"+e+"/"+n},randomIp:function(){var e=Math.random(),t=Math.round(e*(this.ips.length-1)),n=this.ips[t];return this.ipPrefix+n},getParam:function(e){var t=e,n=[];t.time=parseInt(1*new Date/1e3),t.ui=this.getCookie("hiido_ui"),t.username=this.getCookie("username");for(var i in t)t.hasOwnProperty(i)&&n.push(encodeURIComponent(i)+"="+(void 0===t[i]||null===t[i]?"":encodeURIComponent(t[i])));return n.join("&")},send:function(e,t,n){var i=n||0,a=new Image,o=this;a.onerror=function(){i<=1?o.send(e,t,++i):2==i&&o.send(t,t,++i)},a.src=e},getCookie:function(e){var n=null,i=t.cookie+"";e+="";var a,o=i.indexOf(e);return o!=-1&&(o+=e.length+1,a=i.indexOf(";",o),n=decodeURI(i.substring(o,a))),n}},o={stat:function(e){if(!e)return!1;var t=a.getServerUrl(),n=a.getParam(e),i=t+n,o=a.getServerUrl(a.randomIp())+n;a.send(i,o)}},r=o,s={act:"webevent",eventid:"",value:1,sys:3,uid:a.getCookie("uid")||0,ui:a.getCookie("hiido_ui"),sid:"",act_type:"",hostid:"",source:"",bak1:"",bak2:"",bak3:"",parm1:"",parm2:"",parm3:"",url:encodeURIComponent(e.location.href)},l=function(t){var n,i={};s.uid=a.getCookie("uid")||0,s.ui=a.getCookie("hiido_ui"),e.header&&(s.source=e.header.ref+"_"+e.header.cpuid);for(n in s)s.hasOwnProperty(n)&&(n in t?i[n]=t[n]:i[n]=s[n]);for(n in i)i.hasOwnProperty(n)&&""===i[n]&&delete i[n];try{r.stat(i)}catch(o){e.console&&console.error(o)}};return l.eventInit=function(t,i){i=i||{},n(t).on("click",function(t){for(var a,o,l,c,d=t.target,u=this,h=!1,f=n.fn.extend({},s,{source:e.header.ref+"_"+e.header.cpuid}),p="data-stat-";d;){l=n(d).attr(p+"eventid"),c=n(d).attr(p+"through");for(var g in f)f.hasOwnProperty(g)&&(a=p+g.replace(/_/g,"-"),o=n(d).attr(a),o&&(f[g]=o,c||(h=!0)));if(d==u||f.eventid)break;d=d.parentNode}if(h)try{f&&f.act_type&&(i.onsend&&(f=i.onsend(f)),r.stat(f))}catch(v){}})},l.collectStat=function(e){var a=n("#collectStatForm")[0],o=n("#collectStatIframe")[0];if(a||(a=t.createElement("form"),a.id="collectStatForm",a.style.cssText="position: absolute; left: -500px; top: -500px;",a.action="//q.m.yy.com/datasource_web/collect.action",a.enctype="application/x-www-form-urlencoded",a.method="post",a.target="collectStatIframe",n(a).append('<input type="hidden" name="data" value="" />'),t.body.appendChild(a)),!o){var r=t.createElement("div");r.innerHTML='<iframe name="collectStatIframe" id="collectStatIframe"></iframe>',o=r.children[0],o.style.cssText="position: absolute; left: -500px; top: -500px;",t.body.appendChild(o)}i.UA.init();var s={ns:"webperf",channel:"web",platform:i.UA.system,browser:i.UA.browser,time:+new Date,uid:0},l=new i.Promise,c=function(e,t){var n=i.extend({},s);n.key=e,n.value=t,l.then(function(e){a.data.value=i.JSON.stringify(n);try{o.onload=function(){o.onload=null,e()},a.submit()}catch(t){e()}})};for(var d in e)e.hasOwnProperty(d)&&c(d,e[d]);l.start()},l.intervalStat={timerStat:function(e,t){e&&t&&((new Image).src="//statistics.yy.com/statistics/YycomPageLoadTimeStatisticsAction.json?uri="+encodeURIComponent(e)+"&time="+t)}},l.thirdStat={eventInit:function(e){var t=new Date,i=this;n(e).find("*").each(function(e,a){var o,r,s=n(a);if(s.attr("data-ad-id")&&s.attr("data-ad-url")){if(o=s.attr("data-ad-startTime"),r=s.attr("data-ad-endTime"),o&&t<o)return;if(r&&t>r)return;i.send({url:n(a).attr("data-ad-url"),id:n(a).attr("data-ad-id"),pos:n(a).attr("data-ad-position")})}})},send:function(e){e=e||{},
e.url&&((new Image).src=e.url),l({eventid:10009953,bak1:e.pos,bak2:e.id})}},e.appHiido=r,l};"function"==typeof define&&define.amd?define("statistics",["util"],i):e.statistics=i(e.util)}),defindExtendTools();var CONTENT=".popup-wrap",WORKFILEINPUT="#upload_file",INDEXCONTENT=".informant-center",WAITTIPS=".popup-wrap .waiting";$.fn.extend({inform:indexInformant}),define("jqReport",function(){}),define("report",["web2playerStudio","ajaxfileupload","statistics","util","jqReport"],function(e,t,n,i,a){function o(){jQuery.handleError=function(e,t,n,i){e.error&&e.error.call(e.context||e,t,n,i),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,i])},jQuery._isIE=function(){return!!window.ActiveXObject||"ActiveXObject"in window},jQuery._util=i}function r(e,t){var n=new ShowDialog.POPUP({width:380,height:228,content:'<div class="informant-result"><p class="title">'+e+'</p><p class="tips">'+(t?t:"请稍后再试")+'</p><span class="sure-btn">确定</span></div>',yourClass:"popup-mobile w-info-error-tips",mask:!0});$(p).on("click",".sure-btn",function(e){n.removePop()})}function s(e){$(e).on("click","li",function(e){$(this).siblings().removeClass("selected").end().addClass("selected")})}function l(e){var t={width:380,height:228,content:'<div class="informant-result"><p class="title">举报成功</p><p class="tips">感谢您对YY的支持</p><span class="sure-btn">确定</span></div>',yourClass:"popup-mobile",mask:!0};window.combine&&window.combine.reportSuccess?t=window.combine.reportSuccess:e&&(t=e);var n=new ShowDialog.POPUP(t);$(p).on("click",".sure-btn",function(e){n.removePop()})}function c(e,t){$.ajaxFileUpload({url:"/upload/reportshot",secureuri:!1,type:"post",fileElementId:"upload_file",dataType:"json",success:function(n){if(12==n.result)r("文件过大请重新选择(最大为4M)");else if(1==n.result){var i={u:location.href,bt:1,rt:$(".informant-center .select-content li.selected").index()+1,ps:jQuery._util.JSON.stringify({ps:[{u:n.url}]})};d(i,e,t)}else r("图片上传失败！")},error:function(e,n,i){t.call(this,"网络异常，请稍后再试！")}})}function d(e,t,n){$.ajax({url:"/report",type:"get",dataType:"json",data:e,cache:!1}).done(function(e){t(e)}).fail(function(e){n(e)})}function u(e,t){function n(e){var t=jQuery._isIE();t&&(document.getElementById("path").value=document.getElementById("upload_file").value)}function i(){var e=$("#upload_file")[0],t=e.value;t=t.substring(t.lastIndexOf(".")+1,t.length).toLowerCase(),"jpg"==t||"gif"==t||"png"==t||""==t?$(".path").val(e.value):r("仅支持jpg/png/gif格式图片","请重新选择")}function a(){var e=!0;return""==$(g).val()?($(y).addClass("active").html("请提供违规截图"),e=!1):1!=$(".select-content li.selected").length?($(y).addClass("active").html("请选择违规举报类型（单选）"),e=!1):$(y).removeClass("active").html("信息传输中，请稍后......"),e}function o(){$(".informant-center .submit-btn").bind("click",function(n){a()&&($(y).addClass("active"),c(function(n){$(y).removeClass("active"),0==n.resultCode?(d.removePop(),l(),e&&e.call(this,n)):3==n.resultCode?r("您已经举报过了","感谢您对YY的支持"):(r("举报失败"),t&&t.call(this,message))},function(e){r(e)}))})}var d=new ShowDialog.POPUP({width:700,height:420,content:'<div class="informant-center"><p class="tips">1.请提供违规截图：</p><label class="required">*</label><input type="text" placeholder="请上传违规截图"  readonly="readonly" class="path" id="path"><label class="upload-btn">上传<input id="upload_file" name="upload_file" type="file" accept="image/*"></label><br><p class="tips select">2.请选择违规举报类型（单选）</p><ul class="select-content"><li>图片违规</li><li>文字违规</li><li>其他违规</li></ul><span class="waiting">信息传输中，请稍后......</span><span class="submit-btn">立即举报</span></div>',yourClass:"popup-mobile",mask:!0});s(v),$(".upload-btn").bind("click",n),$(p).on("onpropertychange change",g,i),o()}function h(t,n){function i(){var e=!0;return 1!=$(".live-informant-center .select-content li.selected").length?($(y).addClass("active").html("请选择违规举报类型（单选）"),e=!1):$(y).removeClass("active").html("信息传输中，请稍后......"),e}function a(){$(".live-informant-center .submit-btn").bind("click",function(e){i()&&($(y).addClass("active"),c?d(o,function(e){$(y).removeClass("active"),0==e.resultCode?(h.removePop(),l(),t.call(this,e)):3==e.resultCode?window.combine&&window.combine.reportAlready?r(window.combine.reportAlready.title,window.combine.reportAlready.tips):r("您已经举报过了","感谢您对YY的支持"):r("举报失败")},function(e){$(y).removeClass("active"),r("举报失败")}):u=setTimeout(arguments.callee,300))})}var o={},c=!1,u=0,h=new ShowDialog.POPUP({width:700,height:420,content:'<div class="live-informant-center"><p class="title">请选择违规举报类型（单选）</p><ul class="select-content"><li>衣着暴露</li><li>非法行为（涉政、色情表演）</li><li>其他低俗擦边球行为</li></ul><span class="waiting">信息传输中，请稍后......</span><span class="submit-btn">立即举报</span></div>',yourClass:"popup-mobile",mask:!0});e.reqScreenShot(function(e){200==e.code||201==e.code||203==e.code?(c=!0,o={su:pageInfo.anchorInfo.id,i:pageInfo.pid?pageInfo.pid:pageInfo.sid,u:location.href,rt:$(".live-informant-center select-content li.selected").index()+1,bt:2,ai:e.apid?e.apid:"",t:pageInfo.roomName,c:$("#onlineCount").html(),ps:jQuery._util.JSON.stringify({ps:0!=e.picUrls.length?e.picUrls:[{u:b}]})}):204==e.code?(clearTimeout(u),r("暂未开播，举报失败")):(clearTimeout(u),r("网络异常,举报失败"))}),a(),s(m)}function f(){o()}var p=(window.user,".popup-wrap"),g="#upload_file",v=".informant-center",m=".live-informant-center",y=".popup-wrap .waiting",b="//yyweb.yystatic.com/pc/images/default_portrait-26e3f0a702.png?20160617001";return f(),{indexReport:u,liveReport:h}}),define("liveplayerToolBar",["jquery","liveplayer","web2playerStudio","analogrange","util","report"],function(e,t,n,i,a,o){var r=window.user,s={eventid:10008953,sid:"",hostid:"",parm2:""},l={classes:{toobarEnable:"liveplayerToolBar-ready",currentDrag:"liveplayerToolBar-current",currentVideoType:"current-videoType",currentVideoLine:"current-videoLine",pausedVideoLine:"paused-videoLine",shareAreaHover:"liveplayerToolBar-share-area-hover",volHover:"liveplayerToolBar-vol-hover ",videoTypeHover:"liveplayerToolBar-videoType-hover",videoLineHover:"liveplayerToolBar-videoLine-hover",videlLinePauseBg:"linepause-iconbg",liveplayerToolbarShow:"w-liveplayer-toolbar-show",settingEnable:"liveplayerToolBar-setting-enable",openVol:"liveplayerToolBar-clearbtn",closeVolL:"liveplayerToolBar-clearbtn-cancle",openDanmu:"liveplayerToolBar-damu-open",closeDanmu:"liveplayerToolBar-damu-close",danmuHover:"liveplayerToolBar-damu-close-hover"},el:{toolbar:"#liveplayerToolBar",toolbarArea:"#toolbarArea",shareArea:".liveplayerToolBar-share-area",shareQrCode:".liveplayerToolBar-erweima",shareChannel:".liveplayerToolBar-share-left a",reportArea:".liveplayerToolBar-report",feedBack:".liveplayerToolBar-feeaback",rotateArea:".liveplayerToolBar-rotate",qualityList:".liveplayerToolBar-videoType-list",qualityArea:".liveplayerToolBar-videoType",qualityListChild:".liveplayerToolBar-videoType-list a",videoLineList:".liveplayerToolBar-videoLine-list",videoLineArea:".liveplayerToolBar-videoLine",videoLineListChild:".liveplayerToolBar-videoLine-list a",videoLineBreakTip:".liveplayerToolBar-videoLine-tip",volArea:".liveplayerToolBar-vol",volIcon:".liveplayerToolBar-vol .icon",voiceSlider:".liveplayerToolBar-slider",voiceSliderBtn:".liveplayerToolBar-slider-main",danmuArea:".liveplayerToolBar-left",closeShareBtn:".liveplayerToolBar-drag-share .liveplayerToolBar-drag-close"},toggleVol:0,volumn:0,cache:{rotate:0,qualityChanging:!1,breakLineFlag:null},init:function(e){var t=this,l=t.el,c=n.config.get("all",!0);$(l.shareArea).bind("mouseenter",function(){t.barpopMask;$(this).addClass(t.classes.shareAreaHover),$(this).hasClass(t.classes.currentDrag)||($(this).addClass(t.classes.currentDrag),$(l.shareQrCode).children().length||$(l.shareQrCode).append('<img src="'+r.getQrcodeSync(location.href)+'" alt="'+document.title+'" width="130" height="130"/>'),statistics(a.extend({},s,{act_type:2})))}).bind("mouseleave",function(){$(this).removeClass(t.classes.shareAreaHover),$(this).removeClass(t.classes.currentDrag)}),$(l.shareArea).bind("click",function(){$(this).addClass(t.classes.shareAreaHover),$(this).hasClass(t.classes.currentDrag)||($(this).addClass(t.classes.currentDrag),$(l.shareQrCode).children().length||$(l.shareQrCode).append('<img src="'+r.getQrcodeSync(location.href)+'" alt="'+document.title+'" width="130" height="130"/>'),statistics(a.extend({},s,{act_type:2}))),"undefined"!=typeof userTask_state&&setTimeout(function(e){userTask_state=0,$(".baoxiang a").trigger("click")},3e3)}),$(l.closeShareBtn).on("click",function(e){$(l.shareArea).removeClass(t.classes.shareAreaHover),$(l.shareArea).removeClass(t.classes.currentDrag),e.stopPropagation()}),$(".bdsharebuttonbox a").on("click",function(){var e=pageInfo.anchorInfo.id;0!=e?$.ajax({url:"//"+window.location.hostname+"/rookieTask/shared",type:"get",dataType:"json",data:{anchorId:e},success:function(t){0==t.resultCode&&console&&console.log(e)}}):console&&console.log("anchorId: "+e)}),$(l.shareChannel).on("click",function(e){e.preventDefault();var n=this,i=t.barpopMask;i.hide(),statistics(a.extend({},s,{act_type:3,parm1:$(n).attr("data-val")}))}),$(l.reportArea).find(".icon").on("click",function(e){e.preventDefault();l.reportArea;statistics({eventid:"10008953",act_type:"9",sid:pageInfo&&pageInfo.sid?pageInfo.sid:"",hostid:pageInfo&&pageInfo.anchorInfo.id?pageInfo.anchorInfo.id:"",parm2:pageInfo?pageInfo.pid?pageInfo.pid:pageInfo.sid:""}),r.isLoginSync()?o.liveReport(function(e){statistics({eventid:"10008953",act_type:"42",sid:pageInfo&&pageInfo.sid?pageInfo.sid:"",hostid:pageInfo&&pageInfo.anchorInfo.id?pageInfo.anchorInfo.id:"",parm2:pageInfo?pageInfo.pid?pageInfo.pid:pageInfo.sid:""})}):r.showYYLoginBox(),statistics(a.extend({},s,{act_type:9}))}),$(l.feedBack).find(".icon").on("click",function(e){e.preventDefault();var t="http://"+window.location.hostname+"/index/t/feedback";window.open(t)}),n.onInitQuality(function(){var e=n.config.get("all",!0),i=(e.quality.data.length,e.quality.data),a="";if(i.length<=1)return void $(l.qualityArea).removeClass(t.classes.settingEnable);$(l.qualityList).empty();for(var o=0;o<=i.length-1;o++)a=o===i.length-1?'<a href="javascript:;" data-val='+i[o].index+' class="last quality">'+i[o].txt+"</a>":'<a href="javascript:;" data-val='+i[o].index+' class="quality">'+i[o].txt+"</a>",$(l.qualityList).append(a),i[o].index==e.quality.current&&($(".quality").eq(o).addClass(t.classes.currentVideoType),$(l.qualityArea).find(".icon").html(i[o].txt));$(l.qualityArea).addClass(t.classes.settingEnable),$(l.qualityArea).unbind("mouseenter").unbind("mouseleave"),$(l.qualityArea).bind("mouseenter",function(){var e=t.barpopMask;$(this).addClass(t.classes.videoTypeHover),$(this).hasClass(t.classes.currentDrag)?e.hide(this):$(this).addClass(t.classes.currentDrag)}).bind("mouseleave",function(){$(this).removeClass(t.classes.videoTypeHover),$(this).removeClass(t.classes.currentDrag)}),$(l.qualityListChild).unbind("click"),$(l.qualityListChild).bind("click",function(e){e.preventDefault();var i=this,a=$(i).attr("data-val");if(!$(i).hasClass(t.classes.currentVideoType)){if(t.cache.qualityChanging)return void new ShowDialog.POPUP({width:200,content:"正在切换画质",timeout:!0,overtime:1e3,parent:"#wLiveplayer"});$(i).addClass(t.classes.currentVideoType).siblings().removeClass(t.classes.currentVideoType),$(l.qualityArea).find(".icon").html($(i).html()),$(l.qualityArea).trigger("mouseleave"),t.cache.qualityChanging=!0,t.cache.qualityChangeKey=setTimeout(function(){t.cache.qualityChanging=!1,$(l.toolbar).addClass(t.classes.toobarEnable)},5e3),n.config.set("quality",a),this.nomsg||new ShowDialog.POPUP({width:200,content:"已切换到 "+$(i).html()+" 画质",timeout:!0,overtime:1e3,parent:"#wLiveplayer"})}})}),n.onPlayLineChangeState(function(e){var i=e.lineArray.length,a=e.lineArray,o="";if(0!=i&&1!=i||$(l.videoLineArea).hide(),2==i){if(0==a[0].lineState&&0==a[1].lineState)return void $(l.videoLineArea).hide();$(l.videoLineList).empty();for(var r=a.length-1;r>=0;r--){var s=0==a[r].lineIndex?"线路一":"线路二";o=r===a[r].length-1?'<a href="javascript:;" data-val='+a[r].lineIndex+' class="last videoLine">'+s+"</a>":'<a href="javascript:;" data-val='+a[r].lineIndex+' class="videoLine">'+s+"</a>",$(o).appendTo($(l.videoLineList)),0==a[r].lineState&&$(".videoLine").eq(r-1).addClass(t.classes.pausedVideoLine),2==a[r].lineState&&($(".videoLine").eq(r-1).addClass(t.classes.currentVideoLine),$(l.videoLineArea).find(".icon").html(s))}$(l.videoLineArea).addClass(t.classes.settingEnable).show(),$(l.pausedVideoLine).unbind("click"),$(l.videoLineArea).unbind("mouseenter").unbind("mouseleave"),$(l.videoLineArea).bind("mouseenter",function(){var e=t.barpopMask;$(this).addClass(t.classes.videoLineHover),$(this).hasClass(t.classes.currentDrag)?e.hide(this):$(this).addClass(t.classes.currentDrag)}).bind("mouseleave",function(){$(this).removeClass(t.classes.videoLineHover),$(this).removeClass(t.classes.currentDrag)})}$(l.videoLineListChild).unbind("click"),$(l.videoLineListChild).bind("click",function(e){e.preventDefault();var i=this,a=$(i).attr("data-val");$(i).hasClass(t.classes.currentVideoLine)||$(i).hasClass(t.classes.pausedVideoLine)||($(l.videoLineArea).find(".icon").html($(i).html()),n.config.set("line",a),$(l.videoLineArea).find(".icon").removeClass(t.classes.videlLinePauseBg),$(l.videoLineBreakTip).hide(),$(l.toolbarArea).attr("data-always",""),$(l.videoLineArea).removeClass(t.classes.currentDrag))}),$(".closetip").bind("click",function(e){$(l.videoLineBreakTip).hide(),$(l.toolbarArea).attr("data-always",1)})}),n.onPlayLineBreakState(function(e){var n=e.lineIndex;t.cache.breakLineFlag=n,$("#playerMain").trigger("mouseenter"),$(l.videoLineBreakTip).show(),$(l.toolbarArea).attr("data-always",1),$(l.videoLineArea).find(".icon").addClass(t.classes.videlLinePauseBg),$(l.videoLineListChild).each(function(){$(this).attr("data-val")==n&&$(this).addClass(t.classes.pausedVideoLine)})}),n.onPlayLineReconnectState(function(e){$("#playerMain").trigger("mouseleave"),$(l.videoLineListChild).each(function(){$(this).attr("data-val")==e.lineIndex&&$(this).removeClass(t.classes.pausedVideoLine)}),$(l.videoLineArea).find(".icon").removeClass(t.classes.videlLinePauseBg),$(l.videoLineBreakTip).hide(),$(l.toolbarArea).attr("data-always","")}),n.onReady(function(){var e=i(t.el.voiceSlider,{direction:"y",reverse:!0,onchange:function(e){n.config.set("volumn",e),0===e?$(l.volIcon).removeClass(t.classes.openVol).addClass(t.classes.closeVolL):$(l.volIcon).addClass(t.classes.openVol).removeClass(t.classes.closeVolL)}});void 0!==c.volumn?($(l.volArea).addClass(t.classes.settingEnable),e.changeTo(c.volumn),n.config.set("volumn",c.volumn)):$(l.voiceArea).removeClass(t.classes.settingEnable),/^(12|2)$/.test(pageInfo.type)&&($(l.rotateArea).addClass(t.classes.settingEnable),$(l.rotateArea).find(".icon").on("click",function(e){e.preventDefault();var i=t.cache;i.rotate+=90,n.rotate(i.rotate%360),new ShowDialog.POPUP({width:200,content:"已顺时针旋转了",timeout:!0,overtime:1e3,parent:"#wLiveplayer"})})),$(l.volArea).bind("mouseenter",function(){t.barpopMask;$(l.volArea).addClass(t.classes.volHover),$(this).hasClass(t.classes.currentDrag)||$(this).addClass(t.classes.currentDrag)}).bind("mouseleave",function(){$(this).removeClass(t.classes.volHover),$(this).removeClass(t.classes.currentDrag)}),$(l.volArea).find(".icon").click(function(){t.toggleVol++,t.toggleVol%2===0?($(l.volIcon).addClass(t.classes.openVol).removeClass(t.classes.closeVolL),e.changeTo(t.volumn),n.config.set("volumn",t.volumn)):(t.volumn=e.nowPrecent,$(l.volIcon).removeClass(t.classes.openVol).addClass(t.classes.closeVolL),e.changeTo(0),n.config.set("volumn",0))}),n.onStatusChange(function(e){"play"==e&&(t.cache.qualityChanging=!1,clearTimeout(t.cache.qualityChangeKey),$(l.toolbar).addClass(t.classes.toobarEnable))}),$(l.toolbar).addClass(t.classes.toobarEnable)});var d=function(){d.isWork||(d.isWork=!0,clearTimeout(d.delayKey),$(l.danmuArea).addClass(t.classes.settingEnable),$(l.danmuArea).hasClass(t.classes.openDanmu)&&n.danmu.open(),$(l.danmuArea).on("click",function(e){e.preventDefault();var i=this,o="";$(i).hasClass(t.classes.openDanmu)?(n.danmu.close(),$(i).addClass(t.classes.closeDanmu).removeClass(t.classes.openDanmu),o="已切换关闭弹幕模式",statistics(a.extend({},s,{act_type:10}))):(n.danmu.open(),$(i).addClass(t.classes.openDanmu).removeClass(t.classes.closeDanmu),o="已切换开启弹幕模式",statistics(a.extend({},s,{act_type:11}))),new ShowDialog.POPUP({width:200,content:o,timeout:!0,overtime:1e3,parent:"#wLiveplayer"})}).bind("mouseenter",function(){$(this).children(".icon").addClass(t.classes.danmuHover)}).bind("mouseleave",function(){$(this).children(".icon").removeClass(t.classes.danmuHover)}))};n.onDanmuReady(d),d.delayKey=setTimeout(d,1e4)},barpopMask:{show:function(e){var n=l,i=t.attributes;t.popMask.show(),$(e).addClass(n.classes.currentDrag),i.drag.bind({el:e,out:function(){$(e).removeClass(n.classes.currentDrag),t.popMask.hide()}})},hide:function(e){var n=l,i=t.attributes;t.popMask.hide(),$(e).removeClass(n.classes.currentDrag),i.drag.unbind()}}};return l}),define("liveplay",["liveplayerToolBar","liveplayer"],function(e,t){var n=window.pageInfo,i={init:function(){e.init(),t.init({target:"#playerMain",sid:n.sid,ssid:n.ssid,type:n.type,anchorInfo:n.anchorInfo,floashDomain:window.flashUlrPrefix})}};return i}),define("includeFile",[],function(){return function(e,t){for(var n="string"==typeof e?[e]:e,i=0;i<n.length;i++){var a=/\.css/.test(n[i]);if(a){var o=document.createElement("link");o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",n[i]),$("head")[0].appendChild(o),navigator.appName.indexOf("Microsoft")!=-1?o.onreadystatechange=function(){t&&t()}:o.onload=function(){t&&t()}}else{var r=document.createElement("script");r.type="text/javascript",r.language="javascript",r.src=n[i],$("head")[0].appendChild(r),navigator.appName.indexOf("Microsoft")!=-1?r.onreadystatechange=function(){t&&t()}:r.onload=function(){t&&t()}}}}}),define("money",[],function(){return{showRedPayDlg:function(e,t){var n=e.notifyText+"<br/>";new ShowDialog.CONFIRM({width:520,content:n,submitTxt:"同意",cancelTxt:"不同意",loaded:function(){console.log("loaded!")},callback:function(){e.userChoice=1,t&&t(e)},cancleCallback:function(){console.log("不同意！"),e.userChoice=3,t&&t(e)},submitDefine:[{txt:"同意不再提醒",done:function(){e.userChoice=2,t&&t(e)}}]})},showDwbDlg:function(e){if("undefined"==typeof pay||!pay){var t="对不起，处理失败，原因：[多玩币支付，服务异常]，请联系客服！";return void new ShowDialog.POPUP({width:200,content:t,timeout:!0})}pay.JsLoader.loadAuthDivForUrl({info:e.confirmUrl},"callbackDWBChargeAuth")},callbackDWBChargeAuth:function(e){"1"==e.code||"2"==e.code?"1"==e.code?"function"==typeof pay.auth.close&&dwb_cb():"function"==typeof pay.auth.close&&pay.auth.close("apply"):"3"==e.code?"function"==typeof pay.auth.close&&pay.auth.close("cancel"):"-31"==e.code?"function"==typeof pay.auth.close&&pay.auth.close("cancel"):"-1"==e.code?pay.auth.alertMsg(e.info):pay.auth.showError(e.info),window.dwbCustomCallback&&window.dwbCustomCallback(e)},dwb_cb:function(){pay.auth.close("ok"),window.successCallBackFun&&successCallBackFun()}}}),define("sourceAdmin",["jquery"],function(e){function t(){if(header){var e=header.ref;return null!=e?e:300}return 300}var n,i={},a={300:e.extend({},i,{name:"m.yy.com"})};return function(e){e.live=e.live||{},e.live.SourceAdmin=function(t,n){e.extend(this,n),this.target=t,this.init()},e.live.SourceAdmin.prototype={from:null,showUrl:null,argMap:null,appType:null,cpuid:null,sourceType:{1171:{type:1}},init:function(e){this.from=this.getSource(),this.appType=this.getSource(),this.urlFilter(),this.aFilter(),this.setCpuid()},getSouceType:function(){var e=this.getSource(),t=this.sourceType[e],n=0;return void 0!=t&&(n=t.type),n},getAppType:function(){return this.appType},getCpuid:function(){return this.cpuid},getSource:function(){var t=this.getSingleArg("f");return null==t&&(t=e.url.param("f")),null==t&&(t=300),"yy"==t&&(t=362),"i8"==t&&(t=302),t},setCpuid:function(){var t=this.getSingleArg("cpuid");null==t&&(t=e.url.param("cpuid")),null==t&&(t=0),this.cpuid=t},getSingleArg:function(e){return null!=this.argMap[e]?this.argMap[e][0]:null},getAllArg:function(e){return this.argMap[e]},addArgs:function(t,n){return null!=n&&this.addArg(t,n),e.each(this.argMap,function(e,n){"roomid"!=e&&(t+=t.indexOf("?")==-1?"?":"&",t+=e+"="+n[0])}),t},addArg:function(e,t){return e+=e.indexof("?")==-1?"?":"&",e+=t+"="+this.argMap[t][0]},getFullURL:function(){var e=this.argMap,t=!0;null==e.f&&(t=!1);var n=this.addArgs(window.location.href.trim().split("?")[0]);return t||(n+=n.indexOf("?")==-1?"?":"&",n+="f=300"),n},urlFilter:function(){var t=this;e(document).on("click","a.urlFilter",function(i){var a=e(this).attr("href");a=t.addArgs(a);var o=n.getSouceType();return 1==o?window.open(a,"_self"):window.open(a,"_blank"),!1})},aFilter:function(){}},e.fn.sourceAdmin=function(t){return new e.live.SourceAdmin(this,t)}}(e),function(e){try{var o=a[t()];null==o&&(o=e.extend({},i,{name:window.location.hostname+"?f="+t()})),o.argMap={};var r=header.ref,s=header.pcuid;null!=r&&(o.argMap.f=[r]),null!=s&&(o.argMap.cpuid=[s]),n=e("body").sourceAdmin(o)}catch(l){alert(l)}}(e),n}),define("roomWeekStar",["require","jquery","entAppLive","entAppHandler","entAppReady","analogscroll","sourceAdmin","roomGift"],function(e,t,n,i,a,o,r,s){var l='<tr item-type="@giftType"><td class="col-1"><img src="@giftImg"></td><td class="col-2">@numb</td><td class="col-3">@rank</td><td class="col-4">@rnumb</td></tr>',c={isWeekShow:!1,timer:null,weekStarmod:null,weekStarmain:null,weekStarUid:null,firstMicTimer:null,weekGiftRankList:[],weekGiftList:[],scrollObj:null,onReady:function(){n=n||e("entAppLive"),c.weekStarmod=t("#room-week-star"),c.weekStarmain=t("#week-star-id"),c.bindEvent(),c.initClientReceiver(),c.initData(),c.resizeToolbarButtons()},bindEvent:function(){c.weekStarmod.on("click",function(e){c.noBubble(e)}),c.weekStarmain.on("click",function(e){c.noBubble(e),c.pageIndex=0,(c.isWeekShow=!c.isWeekShow)?(n.showMask(),c.weekStarmod.addClass("current"),c.getWeekStarData(),c.resizeScroll(),c.weekStarmod[0].attachEvent&&window.setTimeout(function(){c.weekStarmod.css("opacity","1")},100)):c.hideWeekstar(),c.hideToolbarBottuns()}),t("body").on("click",function(){c.isWeekShow&&(c.isWeekShow=!1,c.weekStarmod.removeClass("current")),n.hideMask()}),t("#refresh-weekstar").click(function(){c.getWeekStarData()}),t("#room-week-star .head .close").click(function(){return c.hideWeekstar(),!1});try{c.scrollObj=o("#week-star-rank-table",{scrollbar:"#weekstar-scrollarea"})}catch(e){}c.initToolbarBottuns()},resizeToolbarButtons:function(){var e=t(".ent-content>.toolbar .buttons"),n=e.children(".wrap"),i=e.find(".item"),a=i.outerWidth(!0)*i.length;a>=e.width()?(e.addClass("expand"),n.hide(),e.children(".expand-btn").text("点击展开")):(n.show(),e.removeClass("expand"))},initToolbarBottuns:function(){var e=t(".ent-content>.toolbar .buttons"),i=e.children(".wrap"),a=e.find(".item"),o=a.outerWidth(!0)*a.length;e.children(".expand-btn").on("click",function(){return"none"==i.css("display")?(t(this).text("点击关闭"),n.showMask()):(t(this).text("点击展开"),n.hideMask()),i.toggle(),!1}),header.onresize(function(){o>=e.width()?(e.addClass("expand"),i.hide(),e.children(".expand-btn").text("点击展开")):(i.show(),e.removeClass("expand"))}),t("body").on("click",function(){c.hideToolbarBottuns()})},hideToolbarBottuns:function(){var e=t(".ent-content>.toolbar .buttons"),n=e.children(".wrap"),i=e.children(".expand-btn").text();"点击关闭"==i&&(e.children(".expand-btn").text("点击展开"),n.show())},hideWeekstar:function(){n.hideMask(),c.weekStarmod.removeClass("current"),c.isWeekShow=!1},resizeScroll:function(){c.scrollObj&&c.scrollObj.resize(),c.weekGiftList.length>5?t(".list .w-contribution-scrollarea").show():t(".list .w-contribution-scrollarea").hide()},noBubble:function(e){var e=e||window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},initClientReceiver:function(){window.recevive_client_consume_rank_cb=function(e){try{c.onReceiveData(e)}catch(t){console.log(t)}c.timeOutResetWeekStatBtn(),c.disableWeekStatBtn()}},getCurrentData:function(){var e=n.pageInfo.ssid,t=n.pageInfo.anchorInfo.id;a.isReady()&&i.call("call_client_consume_rank",{subCid:e,uAnchorId:t,expandInfo:{from:r.getSource(),cpuid:r.getCpuid()}})},onReceiveData:function(e){var t=e.mlist;c.weekGiftRankList=[];for(var n=0;n<t.length;n++){var i=t[n];if(i){var a=i.type;s.weekStarGiftMap[a]&&(i.rank>=100&&(i.rank="99+"),i.smallUrl=s.weekStarGiftMap[a].smallUrl,c.weekGiftRankList.push(i))}}c.weekGiftRankList.sort(function(e,t){return"99+"==e.rank?1:1*e.rank-1*t.rank}),c.replaceGiftRankData()},initData:function(){s=s||e("roomGift"),c.weekStarUid=n.pageInfo.anchorInfo.id,c.setWeekStarAnchorPhoto(),n.addMicListChangeCallback(c.getAnchorMICPhoto),c.weekGiftList=[];var i="";t.each(s.weekStarGiftMap,function(e,t){var n={};if(n.type=e,n.numb="0",n.rank="99+",n.rnumb="0",t&&t.smallUrl){n.smallUrl=t.smallUrl,c.weekGiftList.push(n);var a=l;a=a.replace("@giftType",n.type),a=a.replace("@giftImg",n.smallUrl),a=a.replace("@rank",n.rank),a=a.replace("@numb",n.numb),a=a.replace("@rnumb",n.rnumb),i+=a}}),t("#room-week-star .list table").html(i),c.resizeScroll();var a=n.web2player.getMicListSync();a&&a.length>0&&c.weekStarmain.show()},getAnchorMICPhoto:function(e){e.length>0?(c.weekStarmain.show(),c.weekStarUid!=n.firstMic&&(c.firstMicTimer&&window.clearInterval(c.firstMicTimer),c.firstMicTimer=window.setInterval(function(){c.setWeekStarAnchorPhoto(),c.weekStarUid==n.firstMic&&(c.getCurrentData(),window.clearInterval(c.firstMicTimer))},1e3))):(c.hideWeekstar(),c.weekStarmain.hide())},setWeekStarAnchorPhoto:function(){c.weekStarUid=n.pageInfo.anchorInfo.id;var e=n.pageInfo.anchorInfo.logo;(!e||e.replace(/^\s*|\s*$/g,"").length<=0)&&(e="//yyweb.yystatic.com/pc/images/default_portrait-8dde4521cf.jpg"),t(".head .inline-block img").attr("src",e)},replaceGiftRankData:function(){var e="";t.each(c.weekGiftRankList,function(n,i){var a=i.type,o=t('#week-star-rank tr[item-type="'+a+'"]');o&&o.length>0&&o.remove();var r=l;r=r.replace("@giftType",i.type),r=r.replace("@giftImg",i.smallUrl),r=r.replace("@rank",i.rank),r=r.replace("@numb",i.numb),r=r.replace("@rnumb",i.rnumb),e+=r}),t("#room-week-star table").prepend(e)},resetWeekStatBtn:function(){c.weekStarmain.removeClass("dis-btn")},disableWeekStatBtn:function(){c.weekStarmain.addClass("dis-btn")},getWeekStarData:function(){c.weekStarmain.hasClass("dis-btn")||c.getCurrentData()},timeOutResetWeekStatBtn:function(){c.timer&&window.clearTimeout(c.timer),c.timer=window.setTimeout(function(){c.resetWeekStatBtn()},6e4)}};return c}),define("roomTurntable",["require","jquery","webyyConsts","loginUtil","entAppHandler","roomGift","roomWeekStar","roomRecharge"],function(e,t,n,i,a,o,r,s){var l={templateRank:'<tr tabindex="-1"><td><i class="turnrank-row-index @index-class">@index</i></td><td><div class="turnrank-row-username">@userName</div></td><td><div class="turnrank-row-numcount">@numCount</div></td><td><div class="turnrank-row-gifticon"><img src="@giftIcon" width="32" height="32" /></div></td></tr>',myRankData:{},init:function(){r=r||e("roomWeekStar"),l.hadTurntable=!1,l.attentionElem=t("#turnrank-attention"),l.turnIconElem=t("#turntable-id"),l.turnRankBoxElem=t("#turnrank-box"),l.turnExchangeBoxElem=t("#exchange-box"),l.turnExchangeTotalYBElem=t("#exchange-box #totalYB"),l.turnLackRedBoxElem=t("#common-dialog-lack-red"),l.turnLackYBBoxElem=t("#common-dialog-lack-yb"),l.turnAlertBoxElem=t("#common-dialog-alert"),l.bindEvent(),l.turnIconElem.hide(),r.resizeToolbarButtons()},addEntListeners:function(){a.addEventListener(n.Events.ACT_TURNTABLE.SHOW_TREASURE_GRAB_RANK_BOX,l.showRankBox),a.addEventListener(n.Events.ACT_TURNTABLE.SHOW_EXCHANGE_RED_DIAMOND_BOX,l.showExchageBox),a.addEventListener(n.Events.ACT_TURNTABLE.SHOW_TURNTABLE_ICON,l.showIcon),a.addEventListener(n.Events.ACT_TURNTABLE.RECEIVED_TURNTABLE_GIFT,l.receivedTurnGift),a.addEventListener(n.Events.ACT_TURNTABLE.SHOW_LACK_RED_BOX,l.showLackRedBox),a.addEventListener(n.Events.ACT_TURNTABLE.IS_LOGIN_FOR_RANK_BOX,l.isLoginForRankBox),a.addEventListener(n.Events.ACT_TURNTABLE.RECEIVED_MY_RANK_DATA,l.receivedMyRank)},bindEvent:function(){t("#turntable-id").click(function(){l.showTurntable()}),t("#turnrank-lottery").click(function(){l.turnRankBoxElem.hide(),l.showTurntable()}),l.attentionElem.click(function(){var e=l.attentionElem.hasClass("disabled");e||l.attention()}),t("#turnrank-close").click(function(){l.turnRankBoxElem.hide()}),l.turnExchangeBoxElem.find(".exchange-num-controls a").each(function(){var e=t(this);e.click(function(){l.turnExchangeBoxElem.find(".exchange-num-controls .selected").removeClass("selected"),e.addClass("selected");var t=e.attr("data");l.turnExchangeTotalYBElem.text(t)})}),l.turnExchangeBoxElem.find(".exchange-num-controls .other-exchange-num").focus(function(){var e=t(this);l.turnExchangeBoxElem.find(".exchange-num-controls .selected").removeClass("selected"),e.addClass("selected"),e.val("")}),l.turnExchangeBoxElem.find(".exchange-num-controls .other-exchange-num").blur(function(){if(!l.turnExchangeBoxElem.is(":hidden")){var e=t(this),n=e.val();if(isNaN(n)){var i="请输入一个数字";l.turnAlertBoxElem.find(".common-dialog-content").text(i),l.turnAlertBoxElem.show(),e.val("")}else if(n){var a=Math.ceil(1*n/1e3);e.val(1e3*a),l.turnExchangeTotalYBElem.text(a)}else e.val("其它")}}),t("#exchange-submit").click(function(){var e=l.turnExchangeTotalYBElem.text();if(1*e>0){var n=0;"undefined"!=typeof pageInfo&&(n=pageInfo.ssid),l.exchangeYToRG(e,n,function(n){if(0==n.resultCode){var i="兑换成功，请尽情享受幸运嘉年华吧！",a=1*t("#userHadYB").text(),o=a-1*e,r=1*t("#userHadRed").text(),c=r+1*e*1e3;t("#userHadYB").text(o),t("#userHadRed").text(c),l.turnAlertBoxElem.find(".common-dialog-content").text(i),l.turnAlertBoxElem.show(),l.updateTurnRedDiamond(c)}else if(2==n.resultCode)s.showQrBox(1*e);else{var i="兑换失败, 请稍后再试";l.turnAlertBoxElem.find(".common-dialog-content").text(i),l.turnAlertBoxElem.show()}},function(){var e="兑换失败, 请稍后再试";l.turnAlertBoxElem.find(".common-dialog-content").text(e),l.turnAlertBoxElem.show()})}else{var i="请选择需要兑换的红钻数量";l.turnAlertBoxElem.find(".common-dialog-content").text(i),l.turnAlertBoxElem.show()}}),t("#exchange-close").click(function(){l.turnExchangeBoxElem.hide()}),l.turnLackRedBoxElem.find("#common-dialog-lack-red-close").click(function(){l.turnLackRedBoxElem.hide()}),t("#common-dialog-lack-red-exchange").click(function(){l.turnLackRedBoxElem.hide(),l.showExchageBox()}),l.turnLackYBBoxElem.find("#common-dialog-lack-yb-close").click(function(){l.turnLackYBBoxElem.hide()}),l.turnAlertBoxElem.find(".common-dialog-alert-close").click(function(){l.turnAlertBoxElem.hide()})},initAttention:function(){var e=[],t=0;"undefined"!=typeof pageInfo&&pageInfo.anchorInfo&&pageInfo.anchorInfo.id&&(t=pageInfo.anchorInfo.id),e.push(t),AttentionUtil.isattention(e,function(e){if(0==e.code){var n=e.result;for(var i in n)if(i==t){var a=1*n[i];l.renderAttention(a)}}})},renderAttention:function(e){1==e?(l.attentionElem.text("已关注"),l.attentionElem.addClass("disabled")):(l.attentionElem.text("关注主播"),l.attentionElem.removeClass("disabled"))},attention:function(){var e=pageInfo.anchorInfo.id;AttentionUtil.attention(e,function(e){0==e.code&&l.renderAttention(1)})},receivedTurnGift:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],a=i.id,r=i.num,s={giftId:a,addCount:1*r};t.push(s)}o.addPrepaidGift(t)},updateTurnRedDiamond:function(e){a.call(n.EntFns.ACT_ACT_TURNTABLE.UPDATE_TURNTABLE_RED,e)},showTurntable:function(){var e=i.isLogin();e?a.call(n.EntFns.ACT_ACT_TURNTABLE.SHOW_TURNTABLE):i.showLoginOrRegister()},receivedMyRank:function(e){var t=e?e.treasure_id:null;t&&(l.myRankData[t]=e)},showRankBox:function(e){var n=i.isLogin();if(n){var a={1:"turnrank-row-first",2:"turnrank-row-second",3:"turnrank-row-third"},o=e.treasure_id,r=decodeURI(e.from_name),s=decodeURI(e.to_name),c=e.gift_id,d=e.grab_rank,u=e.mem_count,h=roomGift.giftMap[c],f=h.smallUrl,p=e.gift_type;1==p&&(f="//res.home.yystatic.com/images/show/common/new_red.png");
var g=l.sortRank(l.concatMyRank(o,d)),v=i.getLoginUid();t("#turnrank-count").text(u),t("#turnrank-headline").text("感谢 "+r+" 向 "+s+" 送出宝箱!");var m="";t("#turnrank-datalist tbody").empty();for(var y=4,b=0;b<y&&b<g.length;b++){var w=l.templateRank,C=g[b];if(C.index<0)y++;else{var k=b;C.uid==v&&(k=C.index);var T=a[k];T||(T=""),k>=4&&(k="4+"),w=w.replace("@index-class",T),w=w.replace("@index",k),w=w.replace("@numCount",C.grab_val),w=w.replace("@userName",decodeURI(C.uName)),w=w.replace("@giftIcon",f),m+=w}}l.turnRankBoxElem.show(),t("#turnrank-datalist tbody").html(m),l.initAttention()}else i.showLoginOrRegister()},concatMyRank:function(e,t){for(var n=i.userContext.uid,a=0;a<t.length;a++){var o=t[a],r=o.uid;if(r==n)return t}var s=l.myRankData[e];if(s){var c=s.grab_val,d=[{uid:n,grab_val:c,uName:i.userContext.userNick}];return delete l.myRankData[e],t.concat(d)}return t},sortRank:function(e){for(var t=[{index:-1,grab_val:Number.MAX_VALUE}],n=i.getLoginUid(),a=0;a<e.length;a++){var o=e[a];o.index=a+1,t[a+1]=o}t.sort(function(e,t){return t.grab_val-e.grab_val});for(var a=0;a<t.length;a++){var o=t[a];if(n==o.uid){var r=t[0],s=t[a];r.index=-1,s.index=a,t[0]=s,t[a]=r;break}}return t},showIcon:function(e){var t=e.icon_url,n=e.first_lottery;l.renderFirstLotteryPoint(n),t&&(l.renderTurnTableIcon(t),l.hadTurntable=!0)},showLackRedBox:function(){l.turnLackRedBoxElem.show()},renderTurnTableIcon:function(e){e=decodeURIComponent(e),l.turnIconElem.find(".icon").css("background-image",'url("'+e+'")'),l.turnIconElem.show()},renderFirstLotteryPoint:function(e){1==e?l.turnIconElem.addClass("show-notice"):l.turnIconElem.removeClass("show-notice")},showExchageBox:function(){var e=i.isLogin();e?(l.initExchange(),l.turnExchangeBoxElem.show()):i.showLoginOrRegister()},isLoginForRankBox:function(){var e=i.isLogin();return e||i.showLoginOrRegister(),e},initExchange:function(){l.getMoneyInfo(function(e){if(e){var n=1*e.diamond,i=(1*e.diamondQuan,1*e.actDiamond,n),a=1*e.yyMoney;t("#userHadRed").text(i),t("#userHadYB").text(a)}})},getMoneyInfo:function(e){t.ajax({url:domain+"/ent/pay/getMyMoneyInfo.action",type:"post",dataType:"json",data:{},success:function(t){e&&e(t)}})},exchangeYToRG:function(e,n,a,o){var r=i.isLogin();r?t.ajax({url:domain+"/ent/pay/exchangeYToRG.action",type:"post",data:{yb:e,channel:n},dataType:"json",success:function(e){a&&a(e)},error:function(e){console.log(e),o&&o()}}):i.showLoginOrRegister()}};return window.Turntable=l,l}),window.Modernizr=window.Modernizr||function(e,t,n){function i(e){f.cssText=e}function a(e,t){return typeof e===t}var o,r,s,l="2.8.3",c={},d=t.documentElement,u="modernizr",h=t.createElement(u),f=h.style,p=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),g={svg:"http://www.w3.org/2000/svg"},v={},m=[],y=m.slice,b={}.hasOwnProperty;s=a(b,"undefined")||a(b.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return b.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=y.call(arguments,1),i=function(){if(this instanceof i){var a=function(){};a.prototype=t.prototype;var o=new a,r=t.apply(o,n.concat(y.call(arguments)));return Object(r)===r?r:o}return t.apply(e,n.concat(y.call(arguments)))};return i}),v.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg};for(var w in v)s(v,w)&&(r=w.toLowerCase(),c[r]=v[w](),m.push((c[r]?"":"no-")+r));return c.addTest=function(e,t){if("object"==typeof e)for(var i in e)s(e,i)&&c.addTest(i,e[i]);else{if(e=e.toLowerCase(),c[e]!==n)return c;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(d.className+=" "+(t?"":"no-")+e),c[e]=t}return c},i(""),h=o=null,c._version=l,c._prefixes=p,c}(this,this.document),Modernizr.addTest("cssfilters",function(){var e=document.createElement("div");return e.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!e.style.length&&(void 0===document.documentMode||document.documentMode>9)}),Modernizr.addTest("svgfilters",function(){var e=!1;try{e=void 0!==typeof SVGFEColorMatrixElement&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(t){}return e}),function(e){"function"==typeof define&&define.amd?define("jqGray",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(t,o){var r,s;o=o||{},r=o.classes||{},s=r.fade||i.classes.fade,o.fade=o.fade||t.className.indexOf(s)>-1,this.element=t,this.elementId=a++,this.settings=e.extend({},i,o),this._defaults=i,this._name=n,this.init()}var n="gray",i={fade:!1,classes:{fade:"grayscale-fade"}},a=0;e.extend(t.prototype,{init:function(){var t;!Modernizr.cssfilters&&Modernizr.inlinesvg&&Modernizr.svgfilters&&(t=e(this.element),(this.cssFilterDeprecated(t)||this.settings.fade)&&this.switchImage(t))},cssFilterDeprecated:function(e){return"none"===e.css("filter")},elementType:function(e){return"IMG"===e.prop("tagName")?"Img":"Bg"},pxToNumber:function(e){return parseInt(e.replace("px",""))},getComputedStyle:function(e){var t={},n={};t=window.getComputedStyle(e,null);for(var i=0,a=t.length;i<a;i++){var o=t[i],r=t.getPropertyValue(o);n[o]=r}return n},extractUrl:function(e){var t;return startRegex=/^url\(["']?/,endRegex=/["']?\)$/,t=e.replace(startRegex,"").replace(endRegex,"")},positionToNegativeMargin:function(e){var t,n,i;return t=e.match(/^(-?\d+\S+)/)[0],n=e.match(/\s(-?\d+\S+)$/)[0],i="margin:"+n+" 0 0 "+t},getBgSize:function(t,n){var i,a,o,r,s,l,c;if(i=new Image,i.src=t,"auto"!==n&&"cover"!==n&&"contain"!==n&&"inherit"!==n){var d=e(this.element);a=i.width/i.height,r=parseInt((n.match(/^(\d+)px/)||[0,0])[1]),l=parseInt((n.match(/\s(\d+)px$/)||[0,0])[1]),o=d.height()*a,s=d.width()/a,r=r||o,l=l||s}return c=r||l?{width:r,height:l}:{width:i.width,height:i.height}},getImgParams:function(e){var t={};t.styles=this.getComputedStyle(e[0]);var n={top:this.pxToNumber(t.styles["padding-top"]),right:this.pxToNumber(t.styles["padding-right"]),bottom:this.pxToNumber(t.styles["padding-bottom"]),left:this.pxToNumber(t.styles["padding-left"])},i={top:this.pxToNumber(t.styles["border-top-width"]),right:this.pxToNumber(t.styles["border-right-width"]),bottom:this.pxToNumber(t.styles["border-bottom-width"]),left:this.pxToNumber(t.styles["border-left-width"])};return t.image={width:this.pxToNumber(t.styles.width),height:this.pxToNumber(t.styles.height)},t.svg={url:e[0].src,padding:n,borderWidth:i,width:t.image.width+n.left+n.right+i.left+i.right,height:t.image.height+n.top+n.bottom+i.top+i.bottom,offset:""},t},getBgParams:function(t){var n,i={};return n=this.extractUrl(t.css("background-image")),bgSize=this.getBgSize(n,t.css("background-size")),offset=this.positionToNegativeMargin(t.css("background-position")),i.styles=this.getComputedStyle(t[0]),i.svg=e.extend({url:n},bgSize,{offset:offset}),i.image={width:i.svg.width,height:i.svg.height},i},setStyles:function(e,t,n,i){return t.display="inline-block",t.overflow=t["overflow-x"]=t["overflow-y"]="hidden",t["background-image"]='url("'+n.url+'")',t["background-size"]=i.width+"px "+i.height+"px","Img"===e&&(t["background-repeat"]="no-repeat",t["background-position"]=n.padding.left+"px "+n.padding.top+"px",t.width=n.width,t.height=n.height),delete t.filter,t},addSVGFilterOnce:function(){$body=e("body"),$body.data("plugin_"+n+"_has_filter")||$body.data("plugin_"+n+"_has_filter","true").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0" style="position:absolute"><defs><filter id="gray"><feColorMatrix type="saturate" values="0"/></filter></defs></svg>')},switchImage:function(t){var n,i,a,o,r,s;n=this.elementType(t),i=this["get"+n+"Params"](t),a=this.settings.fade?this.settings.classes.fade:"",o=t[0].alt?' aria-labelledby="gray-title-'+this.elementId+'"':"",r=t[0].alt?'<title id="gray-title-'+this.elementId+'">'+t[0].alt+"</title>":"",s=e('<div class="grayscale grayscale-replaced '+a+'"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+i.svg.width+" "+i.svg.height+'" width="'+i.svg.width+'" height="'+i.svg.height+'" style="'+i.svg.offset+'" role="img"'+o+">"+r+'<image filter="url(&quot;#gray&quot;)" x="0" y="0" width="'+i.image.width+'" height="'+i.image.height+'" preserveAspectRatio="none" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+i.svg.url+'" /></svg></div>'),i.styles=this.setStyles(n,i.styles,i.svg,i.image),s.css(i.styles),this.addSVGFilterOnce(),t.replaceWith(s)}}),e.fn[n]=function(i){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new t(this,i))}),this},e(window).on("load",function(){e(".grayscale:not(.grayscale-replaced)")[n]()})}),define("roomGift",["require","jquery","webyyConsts","loginUtil","entAppLive","entAppHandler","entAppReady","money","html5Test","roomTurntable","roomRecharge","jqGray"],function(e,t,n,i,a,o,r,s,l,c,d,u){var h={giftMap:{},m_giftIds:[],weekStarGiftMap:{},freeGiftMap:{},freeGifIds:[],prepaidGiftMap:{},prepaidGifIds:[],paidGiftMap:{},paidGiftIds:[],isBigGiftMap:{},prepaidCfgGifs:[],freeCfgGifts:[],userPrepaidGift:[],userFreeGift:[],week_winnerMap:{},package_week_winnerMap:{},numLevel:[10,30,66,188,520,1314],isGiftModuleReady:!1,currentSelectGift:null,isEventBindInit:!1,isInitPackageImgHeight:!1,opening:0,moreNumSize:0,giftInputNum:t("#giftInputNum"),moreNumSelect:t("#more-num-select"),numExtend:t("#gift-select-list-id"),numSelect:t(".option-list"),giveBtn:t("#sendGiftBtn"),rechargeBtn:t("#gift-recharge-btn"),$giftSubmit:null,max:1314,packageGiftMax:99999,tipsTarget:null,userObject:{},payConfirmModule:t("#pay-confirm-module-id"),closePayConfirm:t("#close-pay-confirm-id"),payConfirm:t("#pay-confirm"),payContext:t("#pay-context"),userChoise:2,payData:null,isChrome:null,preType:0,freeType:1,weekStarType:2,paidType:3,giftReqUrl:"",giftTabIndex:0,packageTabIndex:0,giftHeight:0,isPaidTab:!0,init:function(){o=o||e("entAppHandler"),a=a||e("entAppLive");var n=h;t("body").bind("click",function(){n.isShowSelect()&&n.moreNumSelect.trigger("click"),0!=n.opening&&(1==n.opening?t("#more-paid-gifts").trigger("click"):2==n.opening&&t("#more-package-gifts").trigger("click"),n.opening=0)}),i.addLoginCallbacks(h.login),i.addLogoutCallbacks(h.logout),n.initGift()},login:function(){var e=h;e.initGift()},logout:function(){var e=h;e.isGiftModuleReady=!1,t("#package-gifts-wrap li").addClass("disabled"),t("#package-gifts-wrap li .amount .num").html(0),t("#package-gifts-wrap li .amount .num").parent().addClass("hide");for(var n in e.freeGiftMap)e.freeGiftMap[n].count=0,t("#package-gifts-wrap li#"+n).hide();for(var n in e.prepaidGiftMap)e.prepaidGiftMap[n].count=0,t("#package-gifts-wrap li#"+n+" a img").addClass("grayscale");e.addGrayscale(),e.giftTabIndex=0,e.packageTabIndex=0,e.resizeFirstRow(!1),e.resizeFirstRow(!0),e.defaultSelectGift()},bindEvent:function(){var e=h;e.isEventBindInit||(e.isEventBindInit=!0,e.giveBtn.bind("click",function(n){n.stopPropagation(),e.isShowSelect()&&e.moreNumSelect.trigger("click"),0!=e.opening&&(1==e.opening?t("#more-paid-gifts").trigger("click"):2==e.opening&&t("#more-package-gifts").trigger("click"),e.opening=0);try{e.sendGift()}catch(i){console.log("Exception:"+i.message)}return!1}),e.rechargeBtn.bind("click",function(){return i.isLogin()?void d.recharge():void i.showLoginOrRegister()}),e.closePayConfirm.bind("click",function(){e.payConfirmModule.hide()}),t("#pay-repeat").bind("click",function(){t(this).toggleClass("checked"),2!=e.userChoise?e.userChoise=2:e.userChoise=1}),e.payConfirm.bind("click",function(){e.payConfirmModule.hide(),e.payData.userChoice=e.userChoise,h.payComfirm(e.payData)})),e.bindGiftList(),e.bindInputArea(),e.defaultSelectGift()},defaultSelectGift:function(){var e=h;t("#paid-gifts-wrap").find("li:eq(0)").trigger("click"),e.giftInputNum.val(1)},clearGiftIds:function(){var e=h;e.m_giftIds=[],e.freeGifIds=[],e.prepaidGifIds=[],e.paidGiftIds=[],e.prepaidCfgGifs=[],e.freeCfgGifts=[],e.userPrepaidGift=[],e.userFreeGift=[],e.weekStarGiftMap={},e.prepaidGiftMap={},e.isBigGiftMap={},e.giftReqUrl="",e.isInitPackageImgHeight=!1,e.giftTabIndex=0,e.packageTabIndex=0,e.isPaidTab?e.resizeFirstRow(!1):e.resizeFirstRow(!0)},initGift:function(e){var n=h,i=[],a=[];t.ajax(domain+"/ent/gift/giftConfigNewUrl.action?tm="+(new Date).getTime(),{dataType:"xml",data:{sid:pageInfo.sid,ssid:pageInfo.ssid,giftUrl:e},beforeSend:function(e){xhrObj=e,n.clearGiftIds()},success:function(o){console.log("initGift:success: "+e),o=t(o);var r=o.find("free"),s=r.children("item");t.each(s,function(e,i){var a={};i=t(i),a.isPaid=!1,a.type=i.attr("FREE_PROPS_TYPE"),a.name=i.attr("FREE_PROPS_NAME"),a.price=i.attr("DWB_PROPS_PRICE"),a.grade=i.attr("FREE_PROPS_GRADE"),a.desc=i.attr("FREE_PROPS_DESCRIPTION"),a.iconUrl=i.attr("PROPS_MOBILE_ICON_PATH").replace(/^https?:/i,""),null==a.iconUrl&&(a.iconUrl=i.attr("FREE_PROPS_ICON").replace(/^https?:/i,"")),a.gif=i.attr("FREE_PROPS_IMAGE").replace(/^https?:/i,""),null==a.gif&&(a.gif=i.attr("FREE_PROPS_IMAGE2").replace(/^https?:/i,"")),a.imageUrl=i.attr("FREE_PROPS_IMAGE").replace(/^https?:/i,""),a.smallUrl=i.attr("FREE_PROPS_ICON").replace(/^https?:/i,""),a.cornerMark=i.attr("PAID_PROPS_CORNER_MARK_PATH")?i.attr("PAID_PROPS_CORNER_MARK_PATH").replace(/^https?:/i,""):"",a.bgImg=i.attr("PAID_PROPS_BACKGRPUND_IMAGE_MARK_PATH")?i.attr("PAID_PROPS_BACKGRPUND_IMAGE_MARK_PATH").replace(/^https?:/i,""):"",n.freeGiftMap[a.type]=a,n.giftMap[a.type]=a,n.isNotExistInArray(n.freeGifIds,a.type)&&n.freeGifIds.push(a.type)});var l=o.find("prepaid"),c=l.children("item");t.each(c,function(e,i){var a={};i=t(i),a.isPaid=!1,a.type=i.attr("PAID_PROPS_TYPE"),a.name=i.attr("PAID_PROPS_NAME"),a.price=i.attr("DWB_PROPS_PRICE"),a.grade=i.attr("PAID_PROPS_GRADE"),a.desc=i.attr("PAID_PROPS_DESCRIPTION"),a.iconUrl=i.attr("PROPS_MOBILE_ICON_PATH").replace(/^https?:/i,""),null==a.iconUrl&&(a.iconUrl=i.attr("PROPS_MOBILE_ICON_PATH").replace(/^https?:/i,"")),a.gif=i.attr("PAID_PROPS_GIF_PATH2").replace(/^https?:/i,""),null==a.gif&&(a.gif=i.attr("PAID_PROPS_MAX_ICON_PATH").replace(/^https?:/i,"")),a.imageUrl=i.attr("PAID_PROPS_ICON_PATH2").replace(/^https?:/i,""),a.smallUrl=i.attr("PAID_PROPS_MAX_ICON_PATH").replace(/^https?:/i,""),a.cornerMark=i.attr("PAID_PROPS_CORNER_MARK_PATH")?i.attr("PAID_PROPS_CORNER_MARK_PATH").replace(/^https?:/i,""):"",a.bgImg=i.attr("PAID_PROPS_BACKGRPUND_IMAGE_MARK_PATH")?i.attr("PAID_PROPS_BACKGRPUND_IMAGE_MARK_PATH").replace(/^https?:/i,""):"",n.prepaidGiftMap[a.type]=a,n.giftMap[a.type]=a,n.isNotExistInArray(n.prepaidGifIds,a.type)&&n.prepaidGifIds.push(a.type)});var d=o.find("bigGift"),u=d.children("item");t.each(u,function(e,i){var a={};i=t(i),a.isPaid=!0,a.type=i.attr("BIGGIFT_PROPS_TYPE"),n.isBigGiftMap[a.type]=!0});var h=o.find("WeekStarGift"),f=h.children("item"),p=new Date;t.each(f,function(e,i){i=t(i);var o=i.attr("start_time"),r=i.attr("end_time"),s=Date.parse(p)-Date.parse(o.replace(/-/g,"/")),l=Date.parse(r.replace(/-/g,"/"))-Date.parse(p);if(s>=0&&l>0){var c=i.children("giftId");t.each(c,function(e,i){i=t(i);var o=i.attr("id");n.isNotExistInArray(a,o)&&a.push(o)})}});var g=o.find("paid"),v=g.children("item");t.each(v,function(e,o){var r={};o=t(o),r.isPaid=!0,r.type=o.attr("PAID_PROPS_TYPE"),r.name=o.attr("PAID_PROPS_NAME"),r.price=o.attr("DWB_PROPS_PRICE"),r.grade=o.attr("PAID_PROPS_GRADE"),r.desc=o.attr("PAID_PROPS_DESCRIPTION"),r.iconUrl=o.attr("PAID_PROPS_MAX_ICON_PATH").replace(/^https?:/i,""),r.imageUrl=o.attr("PAID_PROPS_GIF_PATH").replace(/^https?:/i,""),r.imgPath=o.attr("PAID_PROPS_GIF_PATH").replace(/^https?:/i,""),r.smallUrl=o.attr("PAID_PROPS_ICON_PATH").replace(/^https?:/i,""),r.paidPlatform=o.attr("PAID_PROPS_PLATFORM"),r.cornerMark=o.attr("PAID_PROPS_CORNER_MARK_PATH")?o.attr("PAID_PROPS_CORNER_MARK_PATH").replace(/^https?:/i,""):"",r.bgImg=o.attr("PAID_PROPS_BACKGRPUND_IMAGE_MARK_PATH")?o.attr("PAID_PROPS_BACKGRPUND_IMAGE_MARK_PATH").replace(/^https?:/i,""):"",r.gif=o.attr("PAID_PROPS_GIF_PATH2").replace(/^https?:/i,""),null==r.gif&&(r.gif=o.attr("PAID_PROPS_MAX_ICON_PATH").replace(/^https?:/i,"")),0==r.paidPlatform&&(n.giftMap[r.type]=r,n.paidGiftMap[r.type]=r,n.isNotExistInArray(n.paidGiftIds,r.type)&&n.paidGiftIds.push(r.type),t.inArray(r.type,a)<0||i.push(r.type))});var m=o.find("giftReqUrl"),y=m[0];y&&(n.giftReqUrl=y.textContent),t.each(f,function(e,i){i=t(i);var a=i.attr("start_time"),o=i.attr("end_time"),r=Date.parse(p)-Date.parse(a.replace(/-/g,"/")),s=Date.parse(o.replace(/-/g,"/"))-Date.parse(p);if(r>=0&&s>0){var l=i.children("giftId");t.each(l,function(e,i){i=t(i);var a=i.attr("id");n.weekStarGiftMap[a]=n.giftMap[a]})}});var b=o.find("packageGift");if(b){var v=b.children("item");t.each(v,function(e,i){i=t(i);var a=i.attr("id");if("prepaid"==a){var o=i.attr("content"),r=o.split(",");if(r&&r.length>0)for(var e=0;e<r.length;e++){var s=r[e];n.isNotExistInArray(n.prepaidCfgGifs,s)&&n.prepaidCfgGifs.push(s)}}})}n.renderAndBindingEven()},error:function(e,t,n){console.error(e.status),console.error(e.readyState),console.error(t)}})},isNotExistInArray:function(e,n){return t.inArray(n,e)<0},renderAndBindingEven:function(){var e=h;e.renderPaidGift(),e.renderPackagetGift(),e.rectifyGiftPosition(),e.bindEvent(),e.addGrayscale()},renderPaidGift:function(){var e=h,n="",i="";t("#paid-gifts-wrap").empty(),t("#paid-tips-list").empty();for(var a=0;a<e.paidGiftIds.length;a++){var o=e.paidGiftIds[a],r=e.paidGiftMap[o],s=e.paidType,l="";r.bgImg&&(l='style="background:url('+r.bgImg+') 1px 1px no-repeat"');var c="",d="";e.weekStarGiftMap[o]?(s=e.weekStarType,d=staticPath+"/images/show/room/gift-icon-weekstar.png"):r.cornerMark&&(d=r.cornerMark),d&&(c='<img src="'+d+'">'),n+="<li id="+o+" value="+s+" "+l+"><a href='javascript:void(0);'><img id='giftImg' src='"+r.iconUrl+"'><div class='superscript'>"+c+"</div></a></li>",i+='<div class="tips"></div>'}t("#paid-gifts-wrap").html(n),t("#paid-tips-list").html(i)},renderPackagetGift:function(){var e=h,n="",i="";t("#package-gifts-wrap").empty(),t("#package-gift-tips").empty();for(var a=0;a<e.prepaidCfgGifs.length;a++){var o=e.prepaidCfgGifs[a],r=e.prepaidGiftMap[o];if(r){var s="";r.bgImg&&(s='style="background:url('+r.bgImg+') 1px 1px no-repeat"');var l="",c="";e.weekStarGiftMap[o]?(type=e.weekStarType,c=staticPath+"/images/show/room/gift-icon-weekstar.png"):r.cornerMark&&(c=r.cornerMark),c&&(l='<img src="'+c+'">'),n+="<li class='disabled' id="+o+" value="+e.preType+" "+s+"><a href='javascript:void(0);'><img id='giftImg' src='"+r.iconUrl+"'><div class='superscript'>"+l+"</div>",n+="<div class='amount hide'><span class='num' id=packgeAmount_"+o+">0</span><span class='bg-l'></span><span class='bg-r'></span></div>",n+="</a></li>",i+='<div class="tips"></div>'}}t("#package-gifts-wrap").html(n),t("#package-gift-tips").html(i),e.loopGetUserFreePack()},renderFreeGift:function(e){var n=h,i=n.freeGiftMap[e],a="",o="",r=t("#package-gifts-wrap");if(i){n.weekStarGiftMap[e]&&(type=n.weekStarType),a+="<li class='disabled' id="+e+" value="+n.freeType+" style='display: none;'><a href='javascript:void(0);'><img id='giftImg' src='"+i.iconUrl+"'>",a+="<div class='amount hide'><span class='num' id=packgeAmount_"+e+">0</span><span class='bg-l'></span><span class='bg-r'></span></div>",a+="</a></li>",o+='<div class="tips"></div>'}r.children(".disabled").each(function(){t(this).children().length||t(this).remove()}),r.append(a),t("#package-gift-tips").append(o)},loopGetUserFreePack:function(){var e=h,t=0,n=setInterval(function(){(e.isGiftModuleReady&&r.isReady()||t++>=100)&&(clearInterval(n),e.getUserFreePack(),console.log("包裹 调用 getUserFreePack() loopGetUserFreePack..."+e.isGiftModuleReady+"|"+r.isReady()))},100)},onGiftModuleReady:function(){var e=h;e.isGiftModuleReady=!o.sendToFlash("isGuestLogin"),console.log("包裹 flash onGiftModuleReady。。。。。")},callJsAddGiftTips:function(e){var t=h;if(e)for(var n=0;n<e.length;n++){var i=e[n];t.package_week_winnerMap[i.id]=i}},gift_list_broadcast_cb:function(e){var t=h;e&&("0"==e.broadcast?console.log("gift url flash0回调broadcast=0|url:"+e.url):"1"==e.broadcast&&console.log("gift url flash1回调broadcast=1|url:"+e.url),t.giftReqUrl!=e.url&&(console.log("gift url flash回调与本地不同重新发请求渲染"),setTimeout(function(){t.initGift(e.url)},parseInt(3e3*Math.random()))))},consume_rankLast_week_winner_rsp:function(e){var t=h;if(e&&e.mlist)for(var n=e.mlist,i=0;i<n.length;i++){var a=n[i];t.week_winnerMap[a.type]=a}console.log("包裹 flash consume_rankLast_week_winner_rsp。。。。。")},addPrepaidGift:function(e){for(var t=h,n=!1,i=t.currentSelectGift.type,a=0;a<e.length;a++){var o=e[a],r=o.giftId,s=1*o.addCount;if(i==r&&(n=!0),t.prepaidGiftMap[r]){var l=1*t.prepaidGiftMap[r].count;(!l||l<0)&&(l=0),l+=parseInt(s),t.prepaidGiftMap[r].count=l,l>0&&t.lightUpPackGift(r,t.prepaidGiftMap[r].iconUrl,l)}}n&&t.calPackageMax()},free_present_list_cb:function(e,t){var n=h,i=e.packageObj;for(var a in i){var o=i[a];console.log("查询免费礼物回调--------------------------------礼物id="+a+"---count="+o+"--=============--------------------=============");var r=null;if(null!=n.freeGiftMap[a]?(n.freeGiftMap[a].count=o,r=n.freeGiftMap[a],n.isNotExistInArray(n.userFreeGift,a)&&(n.renderFreeGift(a),n.userFreeGift.push(a))):null!=n.prepaidGiftMap[a]&&(n.prepaidGiftMap[a].count=o,r=n.prepaidGiftMap[a],n.isNotExistInArray(n.userPrepaidGift,a)&&n.userPrepaidGift.push(a)),null!=h.giftMap[a]&&(h.giftMap[a].count=o),r)try{n.lightUpPackGift(a,r.iconUrl,o)}catch(s){console.log("询免费礼物回调 报错e="+s+"|id="+a)}}n.bindGiftList(),n.addGrayscale()},lightUpPackGift:function(e,n,i){var a="#package-gifts-wrap li#"+e;t(a).removeClass("disabled"),t(a).show();var o="#package-gifts-wrap li#"+e+" a img";t(o).removeClass("grayscale"),o="#package-gifts-wrap li#"+e+" a image",o&&t(o).css("filter","none"),o="#package-gifts-wrap li#"+e+" a";var r=t(o).children(":first"),s=r.is("div");s&&(o="#package-gifts-wrap li#"+e+" a div.grayscale",o&&(t(o).remove(),o="#package-gifts-wrap li#"+e+" a",t(o).prepend("<img id='giftImg' src='"+n+"'>"))),i>0&&(i>1e7&&(i="9999999+"),t("#packgeAmount_"+e).html(i),t("#packgeAmount_"+e).parent().removeClass("hide"))},getUserFreePack:function(){var e=h;return i.isLogin()?a.pageInfo?(h.userObject.topSid=a.pageInfo.sid,h.userObject.subSid=a.pageInfo.ssid,h.userObject.yyuid=i.userContext.uid,void o.call(n.Events.ENTPUB.FREE_PACKAGE_LIST_REQ,h.userObject)):void e.popMessage("正在初始化,请稍后..."):void(e.isFinishRreeGift=!0)},isOpeningWhat:function(e,t){var n=h,i=e.context.id;return t?("more-paid-gifts"==i?n.opening=1:"more-package-gifts"==i&&(n.opening=2),void(t?a.showMask():a.hideMask())):void(n.opening=0)},bindGiftList:function(){var e=h,n=t(".ent-content>.toolbar .gift-list"),i=n.find(".gifts.active");0==e.giftHeight&&(e.giftHeight=i.find("li").outerHeight(!0));var o=null,r=6;n.find(".gifts-wrap").each(function(){var n=t(this).find("li"),i=0,a=r-n.length%r,o=(e.giftHeight-6)*Math.ceil(n.length/r),s=t(this);if(t(this).data("height",o),t(this).parent().hasClass("extend")&&setTimeout(function(){l.cssProperties.transition?s.css("height",o+"px"):s.animate({height:o+"px"},200)},0),e.isPaidTab)for(n.length<=r&&t(this).next(".arrow").addClass("disabled");i<a&&a<r;i++)t(this).children("ul").append('<li class="disabled"></li>')});var s=!1;n.find(".arrow").unbind("click").bind("click",l.cssProperties.transition?function(){var n=t(this).parent(),i=n.children().eq(0),a=i.find("li").length,o=this.id;if(!(a<=r)){if(n.hasClass("extend")){s=!1,n.removeClass("extend");var l=0;l="more-paid-gifts"==o?e.giftTabIndex:e.packageTabIndex;var c=-Math.floor(l/6)*e.giftHeight-4;"more-paid-gifts"==o?t("#paid-gifts-wrap").css("top",c+"px"):t("#package-gifts-wrap").css("top",c-2+"px"),i.removeAttr("style")}else s=!0,n.addClass("extend"),"more-paid-gifts"==o?(i.css("height",i.data("height")+"px"),t("#paid-gifts-wrap").removeAttr("style")):(i.css("height",(e.giftHeight-6)*Math.ceil(a/r)),t("#package-gifts-wrap").removeAttr("style"));return e.isOpeningWhat(n,s),!1}}:function(){var n=t(this).parent(),i=n.children().eq(0),a=i.find("li").length,o=this.id;if(!(a<=r)){var l=Math.ceil(a/r);return n.hasClass("extend")?(s=!1,i.stop().animate({height:e.giftHeight+"px"},200,null,function(){n.removeClass("extend");var a=0;a="more-paid-gifts"==o?e.giftTabIndex:e.packageTabIndex;var r=-Math.floor(a/6)*e.giftHeight-4;"more-paid-gifts"==o?t("#paid-gifts-wrap").css("top",r+"px"):t("#package-gifts-wrap").css("top",r-2+"px"),i.removeAttr("style")})):(s=!0,n.addClass("extend"),i.stop().css("height",e.giftHeight+"px").animate({height:(e.giftHeight-6)*l+"px"},200),"more-paid-gifts"==o?t("#paid-gifts-wrap").removeAttr("style"):t("#package-gifts-wrap").removeAttr("style")),e.isOpeningWhat(n,s),!1}});var c=0,d=0,u=null,f=null;n.find("li").hover(function(){var n=t(this),a=n.context.id,r=n.context.value;f=e.getGiftByIdAndType(a,r),u=n.find("img#giftImg")[0],u&&(u.src=f.gif);var c=n.index(),d=null;if(o=i.find(".tips").eq(c),e.tipsTarget=o,e.setTips(o,a,r),o&&(d=i.children(".gifts-wrap"),s?o.css({left:n[0].offsetLeft-7+8+"px",bottom:d[0].offsetHeight-Math.floor(c/6)*(e.giftHeight-6)-9+"px"}).addClass("show"):o.css({left:n[0].offsetLeft-7+8+"px",bottom:d[0].offsetHeight-9+"px"}).addClass("show"),l.cssProperties.animation||o.stop().css("opacity","0").animate({opacity:"1"},200)),!l.cssProperties.transform){var h=o.find("img");!h.attr("style")&&h.css("margin-top",-h.height()/2+"px")}},function(){o&&o.removeClass("show"),u&&(u.src=f.iconUrl)}).unbind("click").bind("click",function(i){n.find("li").removeClass("active");var a=null;a=t(e.isPaidTab?"#paid-gifts-wrap":"#package-gifts-wrap");var o=t(this).context.id;if(!o)return void i.stopPropagation();var r=e.prepaidGiftMap[o];if(e.isDisable(t(this))&&!r)return void i.stopPropagation();if(!e.isDisable(t(this))){e.selectGift(t(this));var s=a.find("li").index(t(this));t.inArray(o,e.paidGiftIds)>=0?s>=0&&(e.giftTabIndex=s,e.packageTabIndex=0):s>=0&&(e.giftTabIndex=0,e.packageTabIndex=s),e.isPaidTab?e.resizeFirstRow(!1):e.resizeFirstRow(!0)}e.isChromeBrowser()&&(d++,(new Date).getTime()-c<400&&d>=2&&(d=0,e.isDisable(t(this))?e.popTurntable():e.sendGift()),c=(new Date).getTime()),i.stopPropagation()}).unbind("dblclick").bind("dblclick",function(n){if(!e.isChromeBrowser()){var i=t(this).context.id;if(!i)return void n.stopPropagation();var a=e.prepaidGiftMap[i];if(e.isDisable(t(this))&&!a)return void n.stopPropagation();e.isDisable(t(this))?e.popTurntable():e.sendGift()}n.stopPropagation()});var p=n.find(".tabs a");if(p.unbind("click").bind("click",function(){var n,a=0,o=r,s=0;if("paidGifts"==this.id?(e.isPaidTab=!0,a=Math.floor(e.giftTabIndex/6)*r):(e.getUserFreePack(),e.isPaidTab=!1,a=Math.floor(e.packageTabIndex/6)*r),o+=a,t(this).hasClass("active"))return!1;for(i.removeClass("active extend").children(".gifts-wrap").removeAttr("style"),i=0===t(this).index()?i.prev():i.next(),n=i.find("li");a<o;a++)n.eq(a).addClass("is-transparent"),l.cssProperties.transition||n.eq(a).stop().css("opacity","0");for(i.addClass("active"),a=o-r;a<o;a++)!function(e,t){window.setTimeout(function(){e.removeClass("is-transparent"),l.cssProperties.transition||e.stop().animate({opacity:"1"})},100*t)}(n.eq(a),s++);return p.removeClass("active"),t(this).addClass("active"),e.rectifyGiftPosition(),e.addGrayscale(),!1}),!l.cssProperties.transition){var g=p.parent().children(".active-icon");g.css("top","0"),p.hover(function(){t(this).hasClass("active")||g.stop().animate({top:t(this)[0].offsetTop+"px"},200)},function(){t(this).hasClass("active")||g.stop().animate({top:p.filter(".active")[0].offsetTop+"px"},200)})}e.$giftSubmit=t(".ent-content>.toolbar .gift-submit"),e.$giftSubmit.find(".arrow").unbind("click").bind("click",l.cssProperties.transition?function(){return e.$giftSubmit.hasClass("extend")?(a.hideMask(),e.$giftSubmit.removeClass("extend"),e.numSelect.css("height","")):(a.showMask(),e.$giftSubmit.addClass("extend"),e.numSelect.css("height",36*e.moreNumSize+"px")),!1}:function(){var t=e.$giftSubmit.find(".option-list");return e.$giftSubmit.hasClass("extend")?t.stop().animate({height:"0"},200,null,function(){a.hideMask(),e.$giftSubmit.removeClass("extend"),t.css("height","")}):(a.showMask(),e.$giftSubmit.addClass("extend"),t.stop().css("height","0").animate({height:"252px"},200)),!1})},resizeFirstRow:function(e){var n=h,i=0;i=e?n.giftTabIndex:n.packageTabIndex;var a=-Math.floor(i/6)*n.giftHeight-4;e?t("#paid-gifts-wrap").css("top",a+"px"):t("#package-gifts-wrap").css("top",a-2+"px")},addGrayscale:function(){var e=h;e.isPaidTab||(t("#package-gifts-wrap li").each(function(){var n=t(this).context.id,i=e.prepaidGiftMap[n];if(i&&(!i.count||i.count<=0)){var a="#package-gifts-wrap li#"+n+" a img";t(a).addClass("grayscale")}}),t(".grayscale").gray())},rectifyGiftPosition:function(){var e=h;e.isOldIE()&&(e.isPaidTab?t("#paid-gifts-wrap li").each(function(){var e=t(this).find("a>img"),n=(t(this).innerHeight()-e.height())/2;e.css("margin-top",n+"px")}):t("#package-gifts-wrap li").each(function(){var e=t(this).find("a>img"),n=(t(this).innerHeight()-e.height())/2;e.css("margin-top",n+"px")}))},popTurntable:function(){var e=i.isLogin();e?c.hadTurntable&&c.showTurntable():i.showLoginOrRegister()},isDisable:function(e){var t=e.find("a img").hasClass("grayscale");if(t)return t;e.find("a").children(":first").hasClass("grayscale");return e.find("a")?e.find("a").children(":first").hasClass("grayscale"):void 0},isOldIE:function(){return"Microsoft Internet Explorer"==navigator.appName&&navigator.appVersion.split(";")[1].replace(/[ ]/g,"").indexOf("MSIE7.")>=0},isChromeBrowser:function(){var e=h;return null==e.isChrome&&(e.isChrome=window.navigator.userAgent.indexOf("Chrome")!==-1),e.isChrome},sendAnimation:function(e,n){var i={totalTime:200,frameId:0,startTime:0,lastTime:0,hitCount:0,intervalTime:16,playing:!1,currentFrame:0,totalFrames:31,bgImgWidth:130,leftTimeFrames:0,leftTimeBgImgWidth:93,animateInterval:90,animateLastTime:0,$comboAnimationEl:t("#combo_hit_animation"),$leftTimeEl:t("#combo_hit_left_time"),$effectFrames:t(".ent-content>.toolbar .gift-submit .effect-frames"),lastGiftId:-1,lastSendCount:-1,hit:function(e,n){if(window.cancelAnimationFrame(this.frameId),this.leftTimeFrames=0,this.startTime=this.lastTime=(new Date).getTime(),this.playing=!0,this.$comboAnimationEl.parent().addClass("playing"),this.$leftTimeEl.text(""),this.lastGiftId==e&&this.lastSendCount==n||(this.hitCount=0),this.lastGiftId=e,this.lastSendCount=n,this.hitCount++){var i=""+this.hitCount,a=0,o=i.length,r=document.createElement("div"),s='<div class="combo-hit-count"><span class="icon plus"></span>';for(r.className="combo-hit-count",r.style.zIndex=this.hitCount;a<o;a++)s+='<span class="icon n'+i.substr(a,1)+'"></span>';r.innerHTML=s,this.$comboAnimationEl[0].appendChild(r),window.setTimeout(function(){l.cssProperties.transition?r.className="combo-hit-count disappear":t(r).stop().css("bottom","20px").animate({bottom:"40px",opacity:"0"},2e3)},17)}l.cssProperties.animation&&(this.$leftTimeEl.css("animation","none"),window.getComputedStyle(this.$leftTimeEl[0]).animation,window.getComputedStyle(this.$leftTimeEl[0])[l.cssPrefix+"Amimation"],this.$leftTimeEl.css("animation",""));var c=this;this.frameId=window.requestAnimationFrame(function d(){var e=(new Date).getTime();if(e-c.lastTime>=c.intervalTime){var t=c.totalTime-Math.floor((e-c.startTime)/c.intervalTime)+1;if(t<=0)return void c.reset();c.lastTime=e}!l.cssProperties.animation&&e-c.animateLastTime>c.animateInterval&&(c.currentFrame=++c.currentFrame%c.totalFrames,c.$effectFrames[0].style.backgroundPosition="-"+c.currentFrame*c.bgImgWidth+"px 0",c.$leftTimeEl[0].style.backgroundPosition="-"+c.leftTimeFrames++*c.leftTimeBgImgWidth+"px 0",c.animateLastTime=e),c.frameId=window.requestAnimationFrame(d)})},reset:function(){window.cancelAnimationFrame(this.frameId),this.hitCount=0,this.playing=!1,this.$comboAnimationEl.parent().removeClass("playing");var e=this.$comboAnimationEl[0].lastChild;do-1<e.className.indexOf("combo-hit-count")?(this.$comboAnimationEl[0].removeChild(e),e=this.$comboAnimationEl[0].lastChild):e=this.previousSibling;while(e);
}};return function(e,t){i.hit(e,t)}}(),selectGift:function(e){var n=h,i=e.context.id,a=e.context.value;i&&(n.currentSelectGift=n.getGiftByIdAndType(i,a),n.currentSelectGift.giftType=a,t("#gift-select-img-id").find("img")[0].src=n.currentSelectGift.iconUrl,e.addClass("active"),n.currentSelectGift.isPaid?(n.isBigGiftMap[i]?n.max=1:n.max=n.getGradeMaxCount(n.currentSelectGift.grade),n.limitMaxInput()):n.calPackageMax())},limitMaxInput:function(){var e=h,t=e.giftInputNum.val();e.max<parseInt(t)&&e.giftInputNum.val(e.max),e.changeNumBar(e.currentSelectGift)},calPackageMax:function(){var e=h;e.max=parseInt(e.currentSelectGift.count),e.max>e.packageGiftMax&&(e.max=e.packageGiftMax),e.limitMaxInput()},changeNumBar:function(e){var t=h,n="",i=e.grade;if(t.moreNumSize=0,e.isPaid||(i=t.getGradeByCount(t.max)),t.isBigGiftMap[e.type])n+="<li><span>1</span></li>",t.moreNumSize++;else for(var a=9;a>=i&&!(i<=3&&a<3);a--){var o=t.getGradeMaxCount(a),r=t.getNumDesc(o);n+="<li><span>"+o+"</span>"+(r?"("+r+")":"")+"</li>",t.moreNumSize++}t.numSelect.children("ul").html(n),t.isShowSelect()&&t.numSelect.css("height",36*t.moreNumSize+"px"),t.bindInputArea()},isShowSelect:function(){var e=h;return e.numExtend.hasClass("extend")},bindInputArea:function(){var e=h,n=e.$giftSubmit.find(".option-list li");n.unbind("click").bind("click",function(i){n.filter(".active").removeClass("active"),t(this).addClass("active");var a=parseInt(t(this).children("span").text());a>parseInt(e.max)&&(a=e.max),e.giftInputNum.val(parseInt(a))}),e.giftInputNum.unbind().on("keydown",function(t){var n=e.giftInputNum,i=t.keyCode,a=n.get(0),o=a.selectionStart,r=a.selectionEnd,s=n.val();if(i>=48&&i<=57)if(0==o&&48==i)e.preventMyEvent(t);else{var l=s.substring(0,o),c=s.substring(r),d=Number(l+(i-48)+c);d>e.max?(n.val(e.max),e.preventMyEvent(t)):d<1&&(n.val(1),e.preventMyEvent(t))}else if(i>=96&&i<=105)if(0==o&&96==i)e.preventMyEvent(t);else{var l=s.substring(0,o),c=s.substring(r),d=Number(l+(i-96)+c);d>e.max?(n.val(e.max),e.preventMyEvent(t)):d<1&&(n.val(1),e.preventMyEvent(t))}else 8==i||46==i||0==i||i>=37&&i<=40||e.preventMyEvent(t)}).on("blur",function(){var t=e.giftInputNum.val();t<=0&&input.val(1)})},sendGift:function(){h.handleSendGift()},handleSendGift:function(){var e=h;if(!e.currentSelectGift)return void e.popMessage("请先选择一个礼物");var t=e.giftInputNum.val(),a=e.currentSelectGift.type;if(!i.isLogin())return void i.showLoginOrRegister();if(t<=0)return void e.popMessage("请输入正确的礼物数量");if(r.isReady()){var s=-1;s=e.currentSelectGift.isPaid?o.call("call_buy_present",{type:a,num:t,fCode:80002,PBUY_KEY_PRODUCTINFO:header.ref+"_"+header.pcuid}):o.call(n.Events.ENTPUB.BUY_PRESENT_FREE_REQ,{type:a,num:t,propClass:4,fCode:80002}),e.sendCommandResult(s)}else e.sendCommandResult("isSuccessSend")},sendCommandResult:function(e){var t=h;switch(e){case 0:return;case 1:return void t.popMessage("参数错误");case 2:return void t.popMessage("麦序为空");case 3:return void i.showLoginOrRegister();case 4:return void t.popMessage("用户信息有误，请重新登陆");case 5:return void t.popMessage("获取首麦失败");case 6:return void t.popMessage("不能发送给自己");case 10:return;default:t.popMessage("正在初始化,请稍后...")}},buyPresentResult:function(e){var t=h,n=e.result;switch(n){case 0:t.sendAnimation(e.type,e.num),t.sendMonitorData(e),window.combineFlag&&"undefined"!=typeof Header&&Header.sendGiftCallbackRefresh(0,e.num,e.type),header.headerUserInfoRefresh=!0;break;case 1:d.showQrBox();break;case 2:t.popMessage("抱歉，不能自己送给自己哦！");break;case 3:t.popMessage("您要赠送的 "+e.toName+"已经离开1号麦序，您不能进行本次赠送了哦！");break;case 4:t.popMessage("对不起，月票只能送给签约歌手哦~，选择其他礼物赠送吧！");break;case 6:t.popMessage("抱歉，礼物已经下架，请选择别的礼物吧！");break;case 7:t.popMessage("退出频道升级");break;case 10:t.popMessage("操作太频繁，请稍后再试!");break;case 103017:t.popMessage("对不起，娱乐套件4.0删档内测期间，只有受邀用户才能使用该功能哦。");break;case 103023:t.popMessage("已开启消费锁,解锁后才能消费");break;case 102323:t.popMessage("已开启消费锁,无法消费");break;case 103021:t.popMessage("参数错误");break;case 103020:t.popMessage("sql affected row错误");break;case 103022:t.popMessage("K币消费失败");break;case 103024:t.popMessage("获取用户的消费状态失败");break;case 103019:t.popMessage("查询日期超出有效范围");break;case 103025:t.popMessage("消费商品类型不被允许");break;case 103026:t.popMessage("处于月结不允许做此操作");break;default:t.popMessage("未知错误码： "+n)}},payComfirm:function(e){e.choice=e.userChoice,o.call(n.EntFns.ENTPUB.BUY_PRESENT_CONFIRM,e)},buyPresentComfirm:function(e){var t=h;if(e.popDwbWin)window.dwbCustomCallback||(window.dwbCustomCallback=function(e){t.enableSend(),t.isComboRunning()&&t.comboEffectReStart()}),s.showDwbDlg(e);else{t.payConfirmModule.show(),t.payData=e;var n=e.notifyText;t.payContext.html(n)}},free_present_send_result_cb:function(e,n){var i=h,a=e.result,o=e.errmsg||e.detailInfo.errmsg||e.detailInfo.errmsg;switch(console.log("free_present_send_result_cb:",e),a){case 0:var r=e.type,s=i.freeType,l=i.prepaidGiftMap[r];if(l?(i.sendAnimation(r,e.num),s=i.preType):l=i.freeGiftMap[r],null==l||void 0==l||"undefined"==l)return;if(l.count=l.count-e.num,l.count<=0||isNaN(l.count)){var c="#package-gifts-wrap li#"+r;if(s==i.preType){t(c).addClass("disabled");var d="#package-gifts-wrap li#"+r+" a img";t(d).addClass("grayscale");var u="#package-gifts-wrap li#"+r+" a img#giftImg";t(u).src=l.iconUrl,t(d).gray(),t("#packgeAmount_"+r).parent().addClass("hide")}else t(c).hide()}else{i.setTips(i.tipsTarget,r,s);var f=l.count;f>1e7&&(f="9999990+"),t("#packgeAmount_"+r).html(f)}break;case 1:i.popMessage("抱歉，您赠送的包裹礼物不足!");break;case 2:i.popMessage("抱歉，不能自己送给自己哦！");break;case 3:i.popMessage("您要赠送的 "+e.toName+"已经离开1号麦序，您不能进行本次赠送了哦！");break;case 4:i.popMessage("对不起，月票只能送给签约歌手哦~，选择其他礼物赠送吧！");break;case 5:i.popMessage(o?o:"送礼物失败！");break;case 6:i.popMessage("抱歉，礼物已经下架，请选择别的礼物吧！");break;case 9:i.popMessage("该礼物只能由客户端送出！");break;case 10:i.popMessage("送礼物需要在频道呆够时间才能送！");break;case 7:i.popMessage("退出频道升级！");break;case 103017:i.popMessage("对不起，娱乐套件4.0删档内测期间，只有受邀用户才能使用该功能哦。");break;case 103023:i.popMessage("已开启消费锁,解锁后才能消费");break;case 102323:i.popMessage("已开启消费锁,无法消费");break;case 103021:i.popMessage("参数错误");break;case 103020:i.popMessage("sql affected row错误");break;case 103022:i.popMessage("K币消费失败");break;case 103024:i.popMessage("获取用户的消费状态失败");break;case 103019:i.popMessage("查询日期超出有效范围");break;case 103025:i.popMessage("消费商品类型不被允许");break;case 103026:i.popMessage("处于月结不允许做此操作");break;default:i.popMessage("未知错误码："+a)}},sendMonitorData:function(e){if(a.monitorType.length>0){var t={};t.clientType="web";var n={};n.userId=e.fromId,n.anchor_id=e.toId,n.sid=a.pageInfo.sid,n.ssid=a.pageInfo.ssid,n.gift_id=e.type,n.gift_cnt=e.num,t.data=n,t.monitorTypes=a.monitorType;var i=JSON.stringify(t);window.mon.sendGiftMonitor(i)}},getMaxGiftNum:function(e){var t=h.giftInputNum.val();return t<=h.getGradeMaxCount(e)?t:h.getGradeMaxCount(e)},getGiftEffectsLevel:function(e,t){var n=0,i=h.numLevel;return t<i[3]?(n=3,t<i[1]?(n=1,t<i[0]&&(n=0)):t<i[2]&&(n=2)):n=t<i[4]?4:t<i[5]?5:6,0==n?0:e+n-3>6?6:e+n-3},getGiftInitLevelCount:function(e){for(var t=0,n=1;n<=6;n++)if(e+n-3>0){t=n;break}return 1==t?10:2==t?30:3==t?66:4==t?188:5==t?520:6==t?1314:void 0},preventMyEvent:function(e){window.event?window.event.returnValue=!1:e.preventDefault()},getNumDesc:function(e){return window.combineFlag?{1:"一心一意",10:"十全十美",30:"想你",66:"一切顺利",188:"要抱抱",520:"我爱你",1314:"一生一世"}[e]:{1:null,10:"十全十美",30:"想你",66:"一切顺利",188:"要抱抱",520:"我爱你",1314:"一生一世"}[e]},getGradeMaxCount:function(e){return 1==e||2==e||3==e?1314:4==e?520:5==e?188:6==e?66:7==e?30:8==e?10:1},getGradeByCount:function(e){return e>520?3:e>188?4:e>66?5:e>30?6:e>10?7:e>1?8:9},getGiftByIdAndType:function(e,t){var n=h,i=null;return t==n.preType?i=n.prepaidGiftMap[e]:t==n.freeType?i=n.freeGiftMap[e]:t==n.weekStarType?i=n.weekStarGiftMap[e]:t==n.paidType&&(i=n.paidGiftMap[e]),i},popMessage:function(e){new ShowDialog.POPUP({width:200,content:e,timeout:!0})},broadCastGift:function(e){o.sendToFlash("sendGiftCB",e)},addEntListeners:function(){o.addEventListener("onGiftModuleReady",h.onGiftModuleReady),o.addEventListener("callJsAddGiftTips",h.callJsAddGiftTips),o.addEventListener("gift_list_broadcast_cb",h.gift_list_broadcast_cb),o.addEventListener(n.Events.ENTPUB.FREE_PACKAGE_LIST_RESP,h.free_present_list_cb),o.addEventListener(n.Events.ENTPUB.BUY_PRESENT_FREE_RESP,h.free_present_send_result_cb),o.addEventListener(n.Events.ENTPUB.BUY_PRESENT_RESULT,h.buyPresentResult),o.addEventListener(n.Events.ENTPUB.BUY_PRESENT_CONFIRM,h.buyPresentComfirm),o.addEventListener(n.Events.ENTPUB.RECEIVE_PRESENT,h.broadCastGift),o.addEventListener("consume_rankLast_week_winner_rsp",h.consume_rankLast_week_winner_rsp)},setTips:function(e,t,n){var i=h,a=i.getGiftByIdAndType(t,n);if(null!=a){var o=i.getGiftEffectsLevel(parseInt(a.grade),parseInt(i.giftInputNum.val())),r=i.getGiftInitLevelCount(parseInt(a.grade)),s=10,l=1;Number(o)>0?(s=i.getMaxGiftNum(a.grade),l=o):(s=r,l=i.getGiftEffectsLevel(parseInt(a.grade),parseInt(s)));var c="",d=i.week_winnerMap[t];if(a.isPaid)n==i.weekStarType?(c+='<div class="tips-content"><div class="intro"><div class="left"><img src="'+a.gif+'"></div>',c+='<div class="right"><div class="title">'+a.name+'<span class="price">('+a.price/100+"Y币/"+10*a.price+"红钻)</span></div>",c+='<div class="desc">'+a.desc+"</div>",c+=i.isBigGiftMap[t]?'<div class="combo">赠送可触发炫酷特效</div></div></div>':'<div class="combo">一次赠送 <strong>'+s+"</strong> 个即可触发"+l+"星流光</div></div></div>",c+='<div class="more week-star"><div class="left"><i class="icon"></i></div><div class="right">赠送可帮助主播竞争周星榜</div></div></div><div class="tips-bg"></div><div class="tips-bg bot"></div>'):(c+='<div class="tips-content"><div class="intro"><div class="left">',c+='<img src="'+a.gif+'"></div><div class="right"><div class="title">'+a.name+'<span class="price">('+a.price/100+"Y币/"+10*a.price+"红钻)</span></div>",c+='<div class="desc">'+a.desc+"</div>",c+=i.isBigGiftMap[t]?'<div class="combo">赠送可触发炫酷特效</div></div></div>':'<div class="combo">一次赠送 <strong>'+s+"</strong> 个即可触发"+l+"星流光</div></div></div>",d&&(c+='<div class="more brand"><div class="left"><i class="icon"></i></div><div class="right ellipsis">'+d.nick+"</div></div>"),c+='</div><div class="more"></div></div><div class="tips-bg"></div><div class="tips-bg bot"></div>');else{var u=i.package_week_winnerMap[t],f=a.count;f||(f=0),c+='<div class="tips-content"><div class="intro"><div class="left">',c+='<img src="'+a.gif+'"></div><div class="right"><div class="title">'+a.name+'<span class="price">(数量:'+f+")</span></div>",c+='<div class="desc">'+a.desc+"</div>",n==i.preType&&(c+=i.isBigGiftMap[t]?'<div class="combo">赠送可触发炫酷特效</div>':f<=0?'<div class="combo">转盘专属，双击礼物图标前往获取</div>':'<div class="combo">一次赠送 <strong>'+s+"</strong> 个即可触发"+l+"星流光</div>"),c+='</div></div><div class="more"></div>',u&&(c+='<div class="more brand"><div class="left"><i class="icon"></i></div><div class="right ellipsis">'+u.sponsor+"</div></div>"),c+='</div><div class="tips-bg"></div><div class="tips-bg bot"></div>'}e.html(c)}},sendSpecialGift:function(e){var t=h;if(!i.isLogin())return void i.showLoginOrRegister();if(r.isReady()){var n=o.call("call_buy_present",e);t.sendCommandResult(n)}else t.sendCommandResult("isSuccessSend")}};return window.Gift=h,h}),define("serviceBroadcast",["jquery","entAppHandler"],function(e,t){var n={version:1,downEvent:{},addDownEventListener:function(e,t){t&&(this.downEvent[e]=t)},up:function(e,n){console.log("serviceBroadcast:up",e,n),n.uri=e,t.call("sendJsonRequest",n),this.defaultSend()},down:function(t){if(console.log("serviceBroadcast:down",t),"string"==typeof t)try{t=window.JSON?window.JSON.parse(t):e.parseJSON(t)}catch(i){console.error("serviceBroadcast:36",i)}if(t&&t.uri){var a=t.uri,o=t.data;console.log("serviceBroadcast:down:uri,body",a,o),n.downEvent[a]&&n.downEvent[a](t)}},defaultSend:function(){}};return window.ServiceBroadcast=n,n}),define("roomTaskBar",["serviceBroadcast","entAppLive"],function(e,t){var n={hasEnoughPri:!0,onReady:function(){e.addDownEventListener("/anchor/taskBarInit",this.respBar),e.addDownEventListener("/rank/gift/anchor/bc",this.broadcast)},requestBar:function(){t=t||require("entAppLive"),n.hasEnoughPri&&e.up("/anchor/taskBarInit",{topSid:t.pageInfo.sid,subSid:t.pageInfo.ssid})},respBar:function(e){n.hasEnoughPri&&p_non_income_activity_bar_init(e)},broadcast:function(e){n.hasEnoughPri&&p_non_income_activity_bar_broadcast(e)}};return n}),define("roomGiftHistory",["jquery","entAppLive","entAppHandler","roomGift","analogscroll"],function(e,t,n,i,a){var o={offset:0,pageSize:200,renderOffset:0,renderPageSize:20,giftHistoryList:[],trTemplate:'<li m="%`orderId`%" class="%`liClass`%"><div class="col-1">%`time`%</div><div class="col-2 ellipsis">%`userName`%</div><div class="col-3"><img src="%`giftUrl`%"> %`giftNum`%</div></li>',init:function(){n=n||require("entAppHandler"),o.btn=e(".ent-content .buttons .gift-record-btn"),o.box=e(".ent-content .gift-record"),o.table=e(".ent-content .gift-record #gift-record-table"),o.container=o.table.find("ul"),o.scrollarea=e(".ent-content .gift-record .w-liveplayer-scrollarea"),o.closeBtn=o.box.find(".head .close");try{o.scrollObj=a(o.table,{scrollbar:o.scrollarea,onend:o.scrollEnd,distance:5,endDistance:10}),o.scrollObj.resize()}catch(t){}o.bindEvent()},addEntListeners:function(){n.addEventListener("receive_gift_history",o.receiveGiftHistory)},scrollEnd:function(){o.renderOffset<o.giftHistoryList.length-1?o.renderNextPage():o.getGiftHistory(o.offset,o.pageSize)},bindEvent:function(){o.box.click(function(e){o.stopEventBubble(e)}),o.btn.click(function(e){o.cleanData(),0>=o.container.find("tr").length&&o.getGiftHistory(o.offset,o.pageSize),o.box.hasClass("current")?t.hideMask():t.showMask(),o.box.toggleClass("current"),o.scrollObj&&o.scrollObj.resize(),o.stopEventBubble(e)}),o.closeBtn.click(function(){o.box.removeClass("current"),t.hideMask()}),e("body").on("click",function(){o.box.hasClass("current")&&(o.box.removeClass("current"),t.hideMask())})},cleanData:function(){o.offset=0,o.renderOffset=0,o.giftHistoryList=[],o.container.empty()},getGiftHistory:function(e,t){n.call("call_gift_history",{offset:e,size:t,expandInfo:null})},receiveGiftHistory:function(e){if(e){var t=e.mlist||[];0>=t.length||(o.offset+=t.length,t=o.filter(t),o.giftHistoryList=o.giftHistoryList.concat(o.giftHistoryList,t),o.renderNextPage())}},renderNextPage:function(){var e=o.giftHistoryList.slice(o.renderOffset,o.renderOffset+o.renderPageSize);o.renderOffset+=e.length,o.render(e)},render:function(t){if(t&&!(0>=t.length)){var n="",a=LoginUtil.getLoginUid()||"";e.each(t,function(e,t){var r=t.UID||"999",s=t.NICK||"",l=(t.NOBLE||0,t.PROPTYPE||""),c=t.PROPNUM||"",d=t.TIMESTAMP||0,u=t.ORDERID||(new Date).getTime()+parseInt(1e5*Math.random()),h=new Date;h.setTime(1e3*d);var f=h.getHours(),p=h.getMinutes(),g=h.getSeconds(),v=(10>f?"0"+f:f)+":"+(10>p?"0"+p:p)+":"+(10>g?"0"+g:g),m=i.giftMap[l]?i.giftMap[l].iconUrl||"":"",y="";a===r&&(y="active");var b=o.trTemplate.replace(/%`liClass`%/gi,y).replace(/%`giftId`%/gi,l).replace(/%`orderId`%/gi,u).replace(/%`time`%/gi,v).replace(/%`userName`%/gi,s).replace(/%`giftUrl`%/gi,m).replace(/%`giftNum`%/gi,c);n+=b}),o.container.append(n),o.scrollObj&&o.scrollObj.resize()}},filter:function(t){if(0>=o.giftHistoryList.length)return t;var n=[];n=5>=o.giftHistoryList.length?o.giftHistoryList:o.giftHistoryList.slice(o.giftHistoryList.length-5);var i={};e.each(n,function(t,n){i[e(n).attr("m")]=!0});var a=n[n.length-1].TIMESTAMP||0;return t=t.filter(function(e,t,n){var o=e.ORDERID||(new Date).getTime()+parseInt(1e5*Math.random());if(i[o])return!1;var r=e.TIMESTAMP||999;return!(r>a)})},stopEventBubble:function(e){var e=e||window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}};return o}),define("roomBroadcastHistory",["jquery","entAppLive","entAppHandler","roomGift"],function(e,t,n,i){var a={rollBox:e("#roll-broadcast-id"),rollBroadcastContent:e("#roll-broadcast-content"),timeoutId:0,intervalId:0,broadcastDivs:null,isShowingOwnRoom:!1,init:function(){var e=this;e.rollBox.unbind("click").bind("click",function(){i.popTurntable()}),e.rollBox.hover(function(){e.rollBox.css("cursor","pointer")})},addEntListeners:function(){n.addEventListener("callJsTurnTableEntryNotice",this.receiveBroadcastHistory)},receiveBroadcastHistory:function(e){clearTimeout(a.intervalId),a.renderRoll(e)},renderRoll:function(n){var i=this;if(null!=n){var a=n.N,o=n.ch_id,r=n.desc,s=n.name,l=n.needTicket,c=n.sid,d=n.ssid;if(t&&t.pageInfo)if(t.pageInfo.sid==c&&t.pageInfo.ssid==d)i.isShowingOwnRoom=!0;else if(i.isShowingOwnRoom)return;if(r){try{var u="<div class='item'>";if(s&&(r=r.replace("[name]",s)),o){var h="";h=1==l?"<a href='"+domain+"/"+c+"/"+d+"?tempId=16777217' class='ticket'><i class='plan icon'></i>("+o+")</a>":"<a href='javascript:void(0);'>("+o+")</a>",r=r.replace("[short_chId]",h)}a&&a>0&&(r=r.replace("[N]",a)),u+=r,u+="</div>",i.rollBroadcastContent.html(u),i.broadcastDivs=e("#roll-broadcast-content .item"),i.rollBox.show();var f=i.broadcastDivs.parent().innerHeight(),p=Math.ceil(i.broadcastDivs.innerHeight()/f),g=0;p>1&&(i.intervalId=window.setInterval(function(){g=++g%p,i.broadcastDivs.animate({top:-f*g+"px"},500)},3e3))}catch(v){}i.timeToHide()}}},timeToHide:function(){var e=this,t=1e4;e.isShowingOwnRoom&&(t=2e4),clearTimeout(e.timeoutId),e.timeoutId=setTimeout(function(){e.rollBox.hide(),e.isShowingOwnRoom=!1},t)}};return a}),define("VRShow",["util"],function(e){var t=function(t){var n=e.cookies.get("isVrShow");1!=n&&(console.log("isVrShow hide"),$(".VRShow").css("display","block"),setTimeout(function(){$(".VRShow").css("display","none"),e.cookies.set("isVrShow","1",24,"/",window.location.hostname)},5e3)),$("#VRShow").on("click",function(e){console.log("click VRShow hide"),e.preventDefault(),e.stopPropagation(),$(".VRShow").css("display","none")})};return t}),require(["require","jquery","util","lazyload","sideTool","leftMenu","liveplay","taskBar","taskTips","thirdmonitor","loginUtil","entAppHandler","entAppReady","includeFile","pageContext","roomFlashContainer","roomGift","roomCherish","roomDedicate","roomNoble","roomWeekStar","roomRegistGuide","roomTurntable","roomTaskBar","roomGiftHistory","roomStatistics","roomBroadcastHistory","roomRecharge","VRShow","roomBroadcastHistory","web2playerStudio"],function(e,t,n,i,a,o,r,s,l,c,d,u,h,f,p,g,v,m,y,b,w,C,k,T,I,_,L,E,x,S,A){function R(){G("#activityBanner{display:none}")}function P(){t("#appendStyle").remove()}t=window.$;var M=window.pageInfo,$=window.header,D=window.user,N=window.statistics,B=window.statisticEvent;"yy.duowan.com"==window.location.hostname&&(console.log("studio: yy.duowan.com"),window.domain="//yy.duowan.com"),window.onerror=null,!M||5!=M.type&&13!=M.type||t("#wLiveplayerGongpin .phiz").hide(),o.init({onToggle:function(){return $.resize&&$.resize()}});var U=document.getElementsByTagName("html")[0];$.resize&&$.resize(),t(window).on("resize",function(){/glimit|g1024|g1200/.test(U.className)&&!/hidemenu/.test(U.className)&&o.hideLargeMenu()}),r.init(),1==M.vr&&x(M.vr);({type:n.request.search("type"),sid:n.request.search("sid"),ssid:n.request.search("ssid")||0,anchorInfo:M.anchorInfo});if(t(".lazy").lazyload({placeholder:"",failure_limit:1/0,load:function(){t(this).css("visibility","visible")}}),l.init(),t(window).trigger("resize"),c.init({sid:M.sid,ssid:M.ssid,userId:D.getUidSync()}),N.eventInit("#vidoeRecommend",{onsend:function(e){return e.sid=M.sid,e.uid=M.anchorInfo.id,e.parm2=M.pid||"",e}}),t("#vidoeRecommend").delegate("a","click",function(){B.set({eventid:"20014323",act_type:"8"})}),N({eventid:10008953,act_type:1,parm1:$.ref,parm2:M.pid||"",bak1:$.ref+"_"+$.cpuid,sid:M.sid}),B.set({eventid:"20014313",more_info:{is_sid:"1"}}),M.ad&&M.ad.id&&M.ad.url){var O=new Date,F=M.ad.startTime,j=M.ad.endTime;if(F&&O<F)return;if(j&&O>j)return;N.thirdStat.send({url:M.ad.url,id:M.ad.id,pos:M.ad.position})}A.onMicListChange(function(e){function n(e){for(var n=t(".videoWonderInfo-item"),i=0;i<4;i++)n.eq(i).find(".videoWonderInfo-pic").attr("href",e[i].messageUrl),n.eq(i).find("img").attr("src",e[i].msgImgView),n.eq(i).find(".title").text(e[i].msgTitle).attr("href",e[i].messageUrl),n.eq(i).find(".count").text(e[i].readAmount),n.eq(i).find("strong").text(e[i].publisherName)}var i=-1;0!==e.length&&(i=e[0]),t.ajax({url:"//"+window.location.hostname+"/live/yyuebyid?identity="+i,type:"get",dataType:"json",success:function(e){0!==+e.resultCode&&1!=e.resultCode||e.data&&e.data.length>=4&&n(e.data)}})}),t(".videoWonderInfo").on("click",".videoWonderInfo-item a",function(){N({eventid:10008953,act_type:45})}),p.pageType="room",d.init(),d.addLoginCallbacks(function(){u.sendToFlash("lampLogin")}),d.addLogoutCallbacks(function(){u.sendToFlash("lampLoginOut")}),v.init(),m.init(),y.init(),b.init(),k.init(),I.init(),C.init(),E.init(),S.init(),h.addFlashEntReadyCallback(function(){v.addEntListeners()}),h.addFlashEntReadyCallback(function(){m.addEntListeners(),m.onReady()}),h.addFlashEntReadyCallback(function(){y.addEntListeners()}),h.addFlashEntReadyCallback(function(){b.addEntListeners(),b.getNobleList()}),h.addFlashEntReadyCallback(function(){L.addEntListeners()}),h.addFlashEntReadyCallback(function(){w.onReady()}),h.addFlashEntReadyCallback(function(){T.onReady(),T.requestBar()}),h.addFlashEntReadyCallback(function(){k.addEntListeners(),k.hideTurntableForwardIcon&&k.hideTurntableForwardIcon()}),h.addFlashEntReadyCallback(function(){_.onReady()}),h.addFlashEntReadyCallback(function(){I.addEntListeners()}),f(["//res.duowan.com/pay/auth/web/style.css?v=2.0","//res.duowan.com/pay/auth/js/auth.js"]),e(["//act.m.yystatic.com/act/js/webAct/actTaskPublic.js"],function(e){}),e(["//earn.yystatic.com/earn/js/giftpk/actTaskPublic.js"],function(){});var G=function(){var e,t;1==arguments.length?(e=document,t=arguments[0]):2==arguments.length?(e=arguments[0],t=arguments[1]):alert("addSheet函数最多接受两个参数!");t+="\n";var n=e.getElementsByTagName("head")[0],i=n.getElementsByTagName("style"),a=e.createElement("style");a.setAttribute("type","text/css"),a.setAttribute("id","appendStyle"),n.appendChild(a);var o=i[0],r=o.getAttribute("media");null===r||/screen/.test(r.toLowerCase())||o.setAttribute("media","screen"),o.styleSheet?o.styleSheet.cssText+=t:e.getBoxObjectFor?o.innerHTML+=t:o.appendChild(e.createTextNode(t))};window.yyActivityIsShow=function(e){console.log("isActOpen:"+e),"1"==e?T.hasEnoughPri=!1:T.hasEnoughPri=!0},window.giftPKIsShow=function(e){console.log("isActOpen:"+e),"1"==e?(T.hasEnoughPri=!1,"function"==typeof CloseActivityInfoRsp&&CloseActivityInfoRsp(),"function"==typeof R&&R()):(T.hasEnoughPri=!0,"function"==typeof OpenActivityInfoRsp&&OpenActivityInfoRsp(),"function"==typeof P&&P())},p.isLiving||g.showRecomAnchorMask()}),define("p-studio.js",function(){});